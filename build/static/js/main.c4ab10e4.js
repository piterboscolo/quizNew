/*! For license information please see main.c4ab10e4.js.LICENSE.txt */
(()=>{"use strict";var e={43(e,t,r){e.exports=r(202)},153(e,t,r){var n=r(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:i.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202(e,t){var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}function b(){}function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=y.prototype=new b;w.constructor=y,m(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,n){var a,s={},o=null,i=null;if(null!=t)for(a in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,a)&&!x.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:o,ref:i,props:s,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,s,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return o=o(l=e),e=""===s?"."+N(l,0):s,S(o)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),T(o,t,a,"",function(e){return e})):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",S(e))for(var c=0;c<e.length;c++){var u=s+N(i=e[c],c);l+=T(i,t,a,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(i=e.next()).done;)l+=T(i=i.value,t,a,u=s+N(i,c++),o);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,r){if(null==e)return e;var n=[],a=0;return T(e,n,"","",function(e){return t.call(r,e,a++)}),n}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},I={transition:null},P={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:I,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,r){O(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=y,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),s=e.key,o=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,i=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!x.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:o,props:a,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,r){return A.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,r){return A.current.useReducer(e,t,r)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return A.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234(e,t){function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,o=a>>>1;n<o;){var i=2*(n+1)-1,l=e[i],c=i+1,u=e[c];if(0>s(l,r))c<a&&0>s(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[i]=r,n=i);else{if(!(c<a&&0>s(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function S(e){if(g=!1,w(e),!m)if(null!==n(c))m=!0,I(_);else{var t=n(u);null!==t&&P(S,t.startTime-e)}}function _(e,r){m=!1,g&&(g=!1,b(E),E=-1),p=!0;var s=f;try{for(w(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!T());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var i=o(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof i?h.callback=i:h===n(c)&&a(c),w(r)}else a(c);h=n(c)}if(null!==h)var l=!0;else{var d=n(u);null!==d&&P(S,d.startTime-r),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,x=!1,j=null,E=-1,C=5,N=-1;function T(){return!(t.unstable_now()-N<C)}function O(){if(null!==j){var e=t.unstable_now();N=e;var r=!0;try{r=j(!0,e)}finally{r?k():(x=!1,j=null)}}else x=!1}if("function"===typeof y)k=function(){y(O)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=O,k=function(){A.postMessage(null)}}else k=function(){v(O,0)};function I(e){j=e,x||(x=!0,k())}function P(e,r){E=v(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,a,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>o?(e.sortIndex=s,r(u,e),null===n(c)&&e===n(u)&&(g?(b(E),E=-1):g=!0,P(S,s-o))):(e.sortIndex=i,r(c,e),m||p||(m=!0,I(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},391(e,t,r){var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579(e,t,r){e.exports=r(153)},730(e,t,r){var n=r(43),a=r(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,r,n,a,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,r,n){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var q,z=Object.assign;function U(e){if(void 0===q)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var D=!1;function F(e,t){if(!e||D)return"";D=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),o=a.length-1,i=s.length-1;1<=o&&0<=i&&a[o]!==s[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==s[i]){if(1!==o||1!==i)do{if(o--,0>--i||a[o]!==s[i]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=i);break}}}finally{D=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function M(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case j:return"Profiler";case x:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Q(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function $(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=V(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function X(e,t){Y(e,t);var r=V(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&G(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+V(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:V(r)}}function se(e,t){var r=V(t.value),n=V(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,xe=null;function je(e){if(e=ya(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=Sa(t),_e(e.stateNode,e.type,t))}}function Ee(e){ke?xe?xe.push(e):xe=[e]:ke=e}function Ce(){if(ke){var e=ke,t=xe;if(xe=ke=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Ne(e,t){return e(t)}function Te(){}var Oe=!1;function Re(e,t,r){if(Oe)return e(t,r);Oe=!0;try{return Ne(e,t,r)}finally{Oe=!1,(null!==ke||null!==xe)&&(Te(),Ce())}}function Ae(e,t){var r=e.stateNode;if(null===r)return null;var n=Sa(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Ie=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Ie=!1}function Le(e,t,r,n,a,s,o,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var qe=!1,ze=null,Ue=!1,De=null,Fe={onError:function(e){qe=!0,ze=e}};function Me(e,t,r,n,a,s,o,i,l){qe=!1,ze=null,Le.apply(Fe,arguments)}function Be(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Be(e)!==e)throw Error(s(188))}function Qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(n=a.return)){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return Ve(a),e;if(o===n)return Ve(a),t;o=o.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=o;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=o;break}if(l===n){i=!0,n=a,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=a;break}if(l===n){i=!0,n=o,r=a;break}l=l.sibling}if(!i)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var He=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,Je=a.unstable_shouldYield,$e=a.unstable_requestPaint,Ye=a.unstable_now,Xe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,o=268435455&r;if(0!==o){var i=o&~a;0!==i?n=dt(i):0!==(s&=o)&&(n=dt(s))}else 0!==(o=r&~a)?n=dt(o):0!==s&&(n=dt(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-ot(t)),n|=e[r],t&=~a;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function bt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var yt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,_t,kt,xt,jt,Et=!1,Ct=[],Nt=null,Tt=null,Ot=null,Rt=new Map,At=new Map,It=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function qt(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&_t(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function zt(e){var t=ba(e.target);if(null!==t){var r=Be(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void jt(e.priority,function(){kt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ya(r))&&_t(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);we=n,r.target.dispatchEvent(n),we=null,t.shift()}return!0}function Dt(e,t,r){Ut(e)&&r.delete(t)}function Ft(){Et=!1,null!==Nt&&Ut(Nt)&&(Nt=null),null!==Tt&&Ut(Tt)&&(Tt=null),null!==Ot&&Ut(Ot)&&(Ot=null),Rt.forEach(Dt),At.forEach(Dt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function Bt(e){function t(t){return Mt(t,e)}if(0<Ct.length){Mt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Nt&&Mt(Nt,e),null!==Tt&&Mt(Tt,e),null!==Ot&&Mt(Ot,e),Rt.forEach(t),At.forEach(t),r=0;r<It.length;r++)(n=It[r]).blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&null===(r=It[0]).blockedOn;)zt(r),null===r.blockedOn&&It.shift()}var Wt=w.ReactCurrentBatchConfig,Vt=!0;function Qt(e,t,r,n){var a=yt,s=Wt.transition;Wt.transition=null;try{yt=1,Ht(e,t,r,n)}finally{yt=a,Wt.transition=s}}function Kt(e,t,r,n){var a=yt,s=Wt.transition;Wt.transition=null;try{yt=4,Ht(e,t,r,n)}finally{yt=a,Wt.transition=s}}function Ht(e,t,r,n){if(Vt){var a=Jt(e,t,r,n);if(null===a)Vn(e,t,n,Gt,r),Lt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Nt=qt(Nt,e,t,r,n,a),!0;case"dragenter":return Tt=qt(Tt,e,t,r,n,a),!0;case"mouseover":return Ot=qt(Ot,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return Rt.set(s,qt(Rt.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,At.set(s,qt(At.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<Pt.indexOf(e)){for(;null!==a;){var s=ya(a);if(null!==s&&St(s),null===(s=Jt(e,t,r,n))&&Vn(e,t,n,Gt,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Vn(e,t,n,null,r)}}var Gt=null;function Jt(e,t,r,n){if(Gt=null,null!==(e=ba(e=Se(n))))if(null===(t=Be(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,n=r.length,a="value"in Yt?Yt.value:Yt.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,s){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,or,ir,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),ur=z({},lr,{view:0,detail:0}),dr=ar(ur),hr=z({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ir&&(ir&&"mousemove"===e.type?(sr=e.screenX-ir.screenX,or=e.screenY-ir.screenY):or=sr=0,ir=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:or}}),fr=ar(hr),pr=ar(z({},hr,{dataTransfer:0})),mr=ar(z({},ur,{relatedTarget:0})),gr=ar(z({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=z({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=ar(vr),yr=ar(z({},lr,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function xr(){return kr}var jr=z({},ur,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Er=ar(jr),Cr=ar(z({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nr=ar(z({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr})),Tr=ar(z({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=z({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rr=ar(Or),Ar=[9,13,27,32],Ir=u&&"CompositionEvent"in window,Pr=null;u&&"documentMode"in document&&(Pr=document.documentMode);var Lr=u&&"TextEvent"in window&&!Pr,qr=u&&(!Ir||Pr&&8<Pr&&11>=Pr),zr=String.fromCharCode(32),Ur=!1;function Dr(e,t){switch(e){case"keyup":return-1!==Ar.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Mr=!1;var Br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Br[e.type]:"textarea"===t}function Vr(e,t,r,n){Ee(n),0<(t=Kn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Qr=null,Kr=null;function Hr(e){Un(e,0)}function Gr(e){if(H(wa(e)))return e}function Jr(e,t){if("change"===e)return t}var $r=!1;if(u){var Yr;if(u){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Yr=Xr}else Yr=!1;$r=Yr&&(!document.documentMode||9<document.documentMode)}function en(){Qr&&(Qr.detachEvent("onpropertychange",tn),Kr=Qr=null)}function tn(e){if("value"===e.propertyName&&Gr(Kr)){var t=[];Vr(t,Kr,e,Se(e)),Re(Hr,t)}}function rn(e,t,r){"focusin"===e?(en(),Kr=r,(Qr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Kr)}function an(e,t){if("click"===e)return Gr(t)}function sn(e,t){if("input"===e||"change"===e)return Gr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!d.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=G((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=un(r,s);var o=un(r,n);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,vn=null,bn=null,yn=!1;function wn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==gn||gn!==G(n)||("selectionStart"in(n=gn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&ln(bn,n)||(bn=n,0<(n=Kn(vn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function Sn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _n={animationend:Sn("Animation","AnimationEnd"),animationiteration:Sn("Animation","AnimationIteration"),animationstart:Sn("Animation","AnimationStart"),transitionend:Sn("Transition","TransitionEnd")},kn={},xn={};function jn(e){if(kn[e])return kn[e];if(!_n[e])return e;var t,r=_n[e];for(t in r)if(r.hasOwnProperty(t)&&t in xn)return kn[e]=r[t];return e}u&&(xn=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);var En=jn("animationend"),Cn=jn("animationiteration"),Nn=jn("animationstart"),Tn=jn("transitionend"),On=new Map,Rn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){On.set(e,t),l(t,[e])}for(var In=0;In<Rn.length;In++){var Pn=Rn[In];An(Pn.toLowerCase(),"on"+(Pn[0].toUpperCase()+Pn.slice(1)))}An(En,"onAnimationEnd"),An(Cn,"onAnimationIteration"),An(Nn,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(Tn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function zn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,o,i,l,c){if(Me.apply(this,arguments),qe){if(!qe)throw Error(s(198));var u=ze;qe=!1,ze=null,Ue||(Ue=!0,De=u)}}(n,t,void 0,e),e.currentTarget=null}function Un(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==s&&a.isPropagationStopped())break e;zn(a,i,c),s=l}else for(o=0;o<n.length;o++){if(l=(i=n[o]).instance,c=i.currentTarget,i=i.listener,l!==s&&a.isPropagationStopped())break e;zn(a,i,c),s=l}}}if(Ue)throw e=De,Ue=!1,De=null,e}function Dn(e,t){var r=t[ma];void 0===r&&(r=t[ma]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function Fn(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var Mn="_reactListening"+Math.random().toString(36).slice(2);function Bn(e){if(!e[Mn]){e[Mn]=!0,o.forEach(function(t){"selectionchange"!==t&&(qn.has(t)||Fn(t,!1,e),Fn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Mn]||(t[Mn]=!0,Fn("selectionchange",!1,t))}}function Wn(e,t,r,n){switch($t(t)){case 1:var a=Qt;break;case 4:a=Kt;break;default:a=Ht}r=a.bind(null,t,r,e),a=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Vn(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var i=n.stateNode.containerInfo;if(i===a||8===i.nodeType&&i.parentNode===a)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==i;){if(null===(o=ba(i)))return;if(5===(l=o.tag)||6===l){n=s=o;continue e}i=i.parentNode}}n=n.return}Re(function(){var n=s,a=Se(r),o=[];e:{var i=On.get(e);if(void 0!==i){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Er;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nr;break;case En:case Cn:case Nn:l=gr;break;case Tn:l=Tr;break;case"scroll":l=dr;break;case"wheel":l=Rr;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cr}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==i?i+"Capture":null:i;u=[];for(var f,p=n;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ae(p,h))&&u.push(Qn(p,m,f)))),d)break;p=p.return}0<u.length&&(i=new l(i,c,null,r,a),o.push({event:i,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||r===we||!(c=r.relatedTarget||r.fromElement)||!ba(c)&&!c[pa])&&(l||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ba(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=fr,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cr,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?i:wa(l),f=null==c?i:wa(c),(i=new u(m,p+"leave",l,r,a)).target=d,i.relatedTarget=f,m=null,ba(a)===n&&((u=new u(h,p+"enter",c,r,a)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Hn(f))p++;for(f=0,m=h;m;m=Hn(m))f++;for(;0<p-f;)u=Hn(u),p--;for(;0<f-p;)h=Hn(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Hn(u),h=Hn(h)}u=null}else u=null;null!==l&&Gn(o,i,l,u,!1),null!==c&&null!==d&&Gn(o,d,c,u,!0)}if("select"===(l=(i=n?wa(n):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var g=Jr;else if(Wr(i))if($r)g=sn;else{g=nn;var v=rn}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=an);switch(g&&(g=g(e,n))?Vr(o,g,r,a):(v&&v(e,i,n),"focusout"===e&&(v=i._wrapperState)&&v.controlled&&"number"===i.type&&ee(i,"number",i.value)),v=n?wa(n):window,e){case"focusin":(Wr(v)||"true"===v.contentEditable)&&(gn=v,vn=n,bn=null);break;case"focusout":bn=vn=gn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,wn(o,r,a);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":wn(o,r,a)}var b;if(Ir)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Mr?Dr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(qr&&"ko"!==r.locale&&(Mr||"onCompositionStart"!==y?"onCompositionEnd"===y&&Mr&&(b=er()):(Xt="value"in(Yt=a)?Yt.value:Yt.textContent,Mr=!0)),0<(v=Kn(n,y)).length&&(y=new yr(y,e,null,r,a),o.push({event:y,listeners:v}),b?y.data=b:null!==(b=Fr(r))&&(y.data=b))),(b=Lr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Ur=!0,zr);case"textInput":return(e=t.data)===zr&&Ur?null:e;default:return null}}(e,r):function(e,t){if(Mr)return"compositionend"===e||!Ir&&Dr(e,t)?(e=er(),Zt=Xt=Yt=null,Mr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Kn(n,"onBeforeInput")).length&&(a=new yr("onBeforeInput","beforeinput",null,r,a),o.push({event:a,listeners:n}),a.data=b))}Un(o,t)})}function Qn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Ae(e,r))&&n.unshift(Qn(e,s,a)),null!=(s=Ae(e,t))&&n.push(Qn(e,s,a))),e=e.return}return n}function Hn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gn(e,t,r,n,a){for(var s=t._reactName,o=[];null!==r&&r!==n;){var i=r,l=i.alternate,c=i.stateNode;if(null!==l&&l===n)break;5===i.tag&&null!==c&&(i=c,a?null!=(l=Ae(r,s))&&o.unshift(Qn(r,l,i)):a||null!=(l=Ae(r,s))&&o.push(Qn(r,l,i))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Jn=/\r\n?/g,$n=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace(Jn,"\n").replace($n,"")}function Xn(e,t,r){if(t=Yn(t),Yn(e)!==t&&r)throw Error(s(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(ia)}:na;function ia(e){setTimeout(function(){throw e})}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void Bt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);Bt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ba(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pa]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ua(e);null!==e;){if(r=e[ha])return r;e=ua(e)}return t}r=(e=r).parentNode}return null}function ya(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Sa(e){return e[fa]||null}var _a=[],ka=-1;function xa(e){return{current:e}}function ja(e){0>ka||(e.current=_a[ka],_a[ka]=null,ka--)}function Ea(e,t){ka++,_a[ka]=e.current,e.current=t}var Ca={},Na=xa(Ca),Ta=xa(!1),Oa=Ca;function Ra(e,t){var r=e.type.contextTypes;if(!r)return Ca;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Aa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){ja(Ta),ja(Na)}function Pa(e,t,r){if(Na.current!==Ca)throw Error(s(168));Ea(Na,t),Ea(Ta,r)}function La(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(s(108,W(e)||"Unknown",a));return z({},r,n)}function qa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Oa=Na.current,Ea(Na,e),Ea(Ta,Ta.current),!0}function za(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=La(e,t,Oa),n.__reactInternalMemoizedMergedChildContext=e,ja(Ta),ja(Na),Ea(Na,e)):ja(Ta),Ea(Ta,r)}var Ua=null,Da=!1,Fa=!1;function Ma(e){null===Ua?Ua=[e]:Ua.push(e)}function Ba(){if(!Fa&&null!==Ua){Fa=!0;var e=0,t=yt;try{var r=Ua;for(yt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ua=null,Da=!1}catch(a){throw null!==Ua&&(Ua=Ua.slice(e+1)),He(Ze,Ba),a}finally{yt=t,Fa=!1}}return null}var Wa=[],Va=0,Qa=null,Ka=0,Ha=[],Ga=0,Ja=null,$a=1,Ya="";function Xa(e,t){Wa[Va++]=Ka,Wa[Va++]=Qa,Qa=e,Ka=t}function Za(e,t,r){Ha[Ga++]=$a,Ha[Ga++]=Ya,Ha[Ga++]=Ja,Ja=e;var n=$a;e=Ya;var a=32-ot(n)-1;n&=~(1<<a),r+=1;var s=32-ot(t)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,$a=1<<32-ot(t)+a|r<<a|n,Ya=s+e}else $a=1<<s|r<<a|n,Ya=e}function es(e){null!==e.return&&(Xa(e,1),Za(e,1,0))}function ts(e){for(;e===Qa;)Qa=Wa[--Va],Wa[Va]=null,Ka=Wa[--Va],Wa[Va]=null;for(;e===Ja;)Ja=Ha[--Ga],Ha[Ga]=null,Ya=Ha[--Ga],Ha[Ga]=null,$a=Ha[--Ga],Ha[Ga]=null}var rs=null,ns=null,as=!1,ss=null;function os(e,t){var r=Oc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function is(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ja?{id:$a,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Oc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=ns;if(t){var r=t;if(!is(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var n=rs;t&&is(e,t)?os(n,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!as)return us(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ca(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=ca(e.nextSibling)}function fs(){ns=rs=null,as=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var a=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function ys(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=qc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===k?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&bs(s)===t.type)?((n=a(t,r.props)).ref=gs(e,t,r),n.return=e,n):((n=Ic(r.type,r.key,r.props,null,e.mode,n)).ref=gs(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=zc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function d(e,t,r,n,s){return null===t||7!==t.tag?((t=Pc(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=qc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(r=Ic(t.type,t.key,t.props,null,e.mode,r)).ref=gs(e,null,t),r.return=e,r;case _:return(t=zc(t,e.mode,r)).return=e,t;case A:return h(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Pc(t,e.mode,r,null)).return=e,t;vs(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return r.key===a?c(e,t,r,n):null;case _:return r.key===a?u(e,t,r,n):null;case A:return f(e,t,(a=r._init)(r._payload),n)}if(te(r)||L(r))return null!==a?null:d(e,t,r,n,null);vs(e,r)}return null}function p(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case _:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case A:return p(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||L(n))return d(t,e=e.get(r)||null,n,a,null);vs(t,n)}return null}function m(a,s,i,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<i.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(a,d,i[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===i.length)return r(a,d),as&&Xa(a,m),c;if(null===d){for(;m<i.length;m++)null!==(d=h(a,i[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return as&&Xa(a,m),c}for(d=n(a,d);m<i.length;m++)null!==(g=p(d,a,m,i[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),as&&Xa(a,m),c}function g(a,i,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=i,g=i=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=f(a,m,b.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(a,m),i=o(y,i,g),null===d?u=y:d.sibling=y,d=y,m=v}if(b.done)return r(a,m),as&&Xa(a,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(a,b.value,c))&&(i=o(b,i,g),null===d?u=b:d.sibling=b,d=b);return as&&Xa(a,g),u}for(m=n(a,m);!b.done;g++,b=l.next())null!==(b=p(m,a,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),i=o(b,i,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach(function(e){return t(a,e)}),as&&Xa(a,g),u}return function e(n,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){r(n,u.sibling),(s=a(u,o.props.children)).return=n,n=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&bs(c)===u.type){r(n,u.sibling),(s=a(u,o.props)).ref=gs(n,u,o),s.return=n,n=s;break e}r(n,u);break}t(n,u),u=u.sibling}o.type===k?((s=Pc(o.props.children,n.mode,l,o.key)).return=n,n=s):((l=Ic(o.type,o.key,o.props,null,n.mode,l)).ref=gs(n,s,o),l.return=n,n=l)}return i(n);case _:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){r(n,s.sibling),(s=a(s,o.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=zc(o,n.mode,l)).return=n,n=s}return i(n);case A:return e(n,s,(u=o._init)(o._payload),l)}if(te(o))return m(n,s,o,l);if(L(o))return g(n,s,o,l);vs(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(r(n,s.sibling),(s=a(s,o)).return=n,n=s):(r(n,s),(s=qc(o,n.mode,l)).return=n,n=s),i(n)):r(n,s)}}var ws=ys(!0),Ss=ys(!1),_s=xa(null),ks=null,xs=null,js=null;function Es(){js=xs=ks=null}function Cs(e){var t=_s.current;ja(_s),e._currentValue=t}function Ns(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ts(e,t){ks=e,js=xs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yi=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(js!==e)if(e={context:e,memoizedValue:t,next:null},null===xs){if(null===ks)throw Error(s(308));xs=e,ks.dependencies={lanes:0,firstContext:e}}else xs=xs.next=e;return t}var Rs=null;function As(e){null===Rs?Rs=[e]:Rs.push(e)}function Is(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,As(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ps(e,n)}function Ps(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ls=!1;function qs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Cl)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ps(e,r)}return null===(a=n.interleaved)?(t.next=t,As(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ps(e,r)}function Fs(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}function Ms(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=o:s=s.next=o,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bs(e,t,r,n){var a=e.updateQueue;Ls=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var l=i,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((i=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===i?u.firstBaseUpdate=c:i.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(o=0,u=c=l=null,i=s;;){var h=i.lane,f=i.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,m=i;switch(h=t,f=r,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=z({},d,h);break e;case 2:Ls=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[i]:h.push(i))}else f={eventTime:f,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(h=i).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=d}}function Ws(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(s(191,a));a.call(n)}}}var Vs={},Qs=xa(Vs),Ks=xa(Vs),Hs=xa(Vs);function Gs(e){if(e===Vs)throw Error(s(174));return e}function Js(e,t){switch(Ea(Hs,t),Ea(Ks,e),Ea(Qs,Vs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ja(Qs),Ea(Qs,t)}function $s(){ja(Qs),ja(Ks),ja(Hs)}function Ys(e){Gs(Hs.current);var t=Gs(Qs.current),r=le(t,e.type);t!==r&&(Ea(Ks,e),Ea(Qs,r))}function Xs(e){Ks.current===e&&(ja(Qs),ja(Ks))}var Zs=xa(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function ro(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var no=w.ReactCurrentDispatcher,ao=w.ReactCurrentBatchConfig,so=0,oo=null,io=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function go(e,t,r,n,a,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,no.current=null===e||null===e.memoizedState?Zo:ei,e=r(n,a),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=io=null,t.updateQueue=null,no.current=ti,e=r(n,a)}while(uo)}if(no.current=Xo,t=null!==io&&null!==io.next,so=0,lo=io=oo=null,co=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function yo(){if(null===io){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=io.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,io=e;else{if(null===e)throw Error(s(310));e={memoizedState:(io=e).memoizedState,baseState:io.baseState,baseQueue:io.baseQueue,queue:io.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function So(e){var t=yo(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=io,a=n.baseQueue,o=r.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}n.baseQueue=a=o,r.pending=null}if(null!==a){o=a.next,n=n.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((so&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,i=n):c=c.next=h,oo.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==o);null===c?i=n:c.next=l,on(n,t.memoizedState)||(yi=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{o=a.lane,oo.lanes|=o,Ll|=o,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _o(e){var t=yo(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(null!==a){r.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);on(o,t.memoizedState)||(yi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function ko(){}function xo(e,t){var r=oo,n=yo(),a=t(),o=!on(n.memoizedState,a);if(o&&(n.memoizedState=a,yi=!0),n=n.queue,qo(Co.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(r.flags|=2048,Ro(9,Eo.bind(null,r,n,a,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&so)||jo(r,t,a)}return a}function jo(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Eo(e,t,r,n){t.value=r,t.getSnapshot=n,No(t)&&To(e)}function Co(e,t,r){return r(function(){No(t)&&To(e)})}function No(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function To(e){var t=Ps(e,1);null!==t&&tc(t,e,1,-1)}function Oo(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ao(){return yo().memoizedState}function Io(e,t,r,n){var a=bo();oo.flags|=e,a.memoizedState=Ro(1|t,r,void 0,void 0===n?null:n)}function Po(e,t,r,n){var a=yo();n=void 0===n?null:n;var s=void 0;if(null!==io){var o=io.memoizedState;if(s=o.destroy,null!==n&&mo(n,o.deps))return void(a.memoizedState=Ro(t,r,s,n))}oo.flags|=e,a.memoizedState=Ro(1|t,r,s,n)}function Lo(e,t){return Io(8390656,8,e,t)}function qo(e,t){return Po(2048,8,e,t)}function zo(e,t){return Po(4,2,e,t)}function Uo(e,t){return Po(4,4,e,t)}function Do(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fo(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Po(4,4,Do.bind(null,t,e),r)}function Mo(){}function Bo(e,t){var r=yo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&mo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Wo(e,t){var r=yo();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&mo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Vo(e,t,r){return 0===(21&so)?(e.baseState&&(e.baseState=!1,yi=!0),e.memoizedState=r):(on(r,t)||(r=mt(),oo.lanes|=r,Ll|=r,e.baseState=!0),t)}function Qo(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var n=ao.transition;ao.transition={};try{e(!1),t()}finally{yt=r,ao.transition=n}}function Ko(){return yo().memoizedState}function Ho(e,t,r){var n=ec(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Jo(e))$o(t,r);else if(null!==(r=Is(e,t,r,n))){tc(r,e,n,Zl()),Yo(r,t,n)}}function Go(e,t,r){var n=ec(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))$o(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,i=s(o,r);if(a.hasEagerState=!0,a.eagerState=i,on(i,o)){var l=t.interleaved;return null===l?(a.next=a,As(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Is(e,t,a,n))&&(tc(r,e,n,a=Zl()),Yo(r,t,n))}}function Jo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function $o(e,t){uo=co=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Yo(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}var Xo={readContext:Os,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Os,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Os,useEffect:Lo,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Io(4194308,4,Do.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Io(4194308,4,e,t)},useInsertionEffect:function(e,t){return Io(4,2,e,t)},useMemo:function(e,t){var r=bo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=bo();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ho.bind(null,oo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:Oo,useDebugValue:Mo,useDeferredValue:function(e){return bo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Qo.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=oo,a=bo();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Nl)throw Error(s(349));0!==(30&so)||jo(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,Lo(Co.bind(null,n,o,e),[e]),n.flags|=2048,Ro(9,Eo.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=bo(),t=Nl.identifierPrefix;if(as){var r=Ya;t=":"+t+"R"+(r=($a&~(1<<32-ot($a)-1)).toString(32)+r),0<(r=ho++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ei={readContext:Os,useCallback:Bo,useContext:Os,useEffect:qo,useImperativeHandle:Fo,useInsertionEffect:zo,useLayoutEffect:Uo,useMemo:Wo,useReducer:So,useRef:Ao,useState:function(){return So(wo)},useDebugValue:Mo,useDeferredValue:function(e){return Vo(yo(),io.memoizedState,e)},useTransition:function(){return[So(wo)[0],yo().memoizedState]},useMutableSource:ko,useSyncExternalStore:xo,useId:Ko,unstable_isNewReconciler:!1},ti={readContext:Os,useCallback:Bo,useContext:Os,useEffect:qo,useImperativeHandle:Fo,useInsertionEffect:zo,useLayoutEffect:Uo,useMemo:Wo,useReducer:_o,useRef:Ao,useState:function(){return _o(wo)},useDebugValue:Mo,useDeferredValue:function(e){var t=yo();return null===io?t.memoizedState=e:Vo(t,io.memoizedState,e)},useTransition:function(){return[_o(wo)[0],yo().memoizedState]},useMutableSource:ko,useSyncExternalStore:xo,useId:Ko,unstable_isNewReconciler:!1};function ri(e,t){if(e&&e.defaultProps){for(var r in t=z({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ni(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:z({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ai={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Zl(),a=ec(e),s=Us(n,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Ds(e,s,a))&&(tc(t,e,a,n),Fs(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Zl(),a=ec(e),s=Us(n,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Ds(e,s,a))&&(tc(t,e,a,n),Fs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Zl(),n=ec(e),a=Us(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Ds(e,a,n))&&(tc(t,e,n,r),Fs(t,e,n))}};function si(e,t,r,n,a,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,s))}function oi(e,t,r){var n=!1,a=Ca,s=t.contextType;return"object"===typeof s&&null!==s?s=Os(s):(a=Aa(t)?Oa:Na.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ra(e,a):Ca),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ai,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function ii(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ai.enqueueReplaceState(t,t.state,null)}function li(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},qs(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Os(s):(s=Aa(t)?Oa:Na.current,a.context=Ra(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ni(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ai.enqueueReplaceState(a,a.state,null),Bs(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function ci(e,t){try{var r="",n=t;do{r+=M(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function ui(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function di(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hi="function"===typeof WeakMap?WeakMap:Map;function fi(e,t,r){(r=Us(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wl||(Wl=!0,Vl=n),di(0,t)},r}function pi(e,t,r){(r=Us(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){di(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){di(0,t),"function"!==typeof n&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function mi(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new hi;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=xc.bind(null,e,t,r),t.then(e,e))}function gi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vi(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Us(-1,1)).tag=2,Ds(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bi=w.ReactCurrentOwner,yi=!1;function wi(e,t,r,n){t.child=null===e?Ss(t,null,r,n):ws(t,e.child,r,n)}function Si(e,t,r,n,a){r=r.render;var s=t.ref;return Ts(t,a),n=go(e,t,r,n,s,a),r=vo(),null===e||yi?(as&&r&&es(t),t.flags|=1,wi(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wi(e,t,a))}function _i(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ic(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ki(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var o=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(o,n)&&e.ref===t.ref)return Wi(e,t,a)}return t.flags|=1,(e=Ac(s,n)).ref=t.ref,e.return=t,t.child=e}function ki(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(yi=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,Wi(e,t,a);0!==(131072&e.flags)&&(yi=!0)}}return Ei(e,t,r,n,a)}function xi(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Al,Rl),Rl|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Al,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ea(Al,Rl),Rl|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ea(Al,Rl),Rl|=n;return wi(e,t,a,r),t.child}function ji(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ei(e,t,r,n,a){var s=Aa(r)?Oa:Na.current;return s=Ra(t,s),Ts(t,a),r=go(e,t,r,n,s,a),n=vo(),null===e||yi?(as&&n&&es(t),t.flags|=1,wi(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wi(e,t,a))}function Ci(e,t,r,n,a){if(Aa(r)){var s=!0;qa(t)}else s=!1;if(Ts(t,a),null===t.stateNode)Bi(e,t),oi(t,r,n),li(t,r,n,a),n=!0;else if(null===e){var o=t.stateNode,i=t.memoizedProps;o.props=i;var l=o.context,c=r.contextType;"object"===typeof c&&null!==c?c=Os(c):c=Ra(t,c=Aa(r)?Oa:Na.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==n||l!==c)&&ii(t,o,n,c),Ls=!1;var h=t.memoizedState;o.state=h,Bs(t,n,o,a),l=t.memoizedState,i!==n||h!==l||Ta.current||Ls?("function"===typeof u&&(ni(t,r,u,n),l=t.memoizedState),(i=Ls||si(t,r,i,n,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=i):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,zs(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ri(t.type,i),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=r.contextType)&&null!==l?l=Os(l):l=Ra(t,l=Aa(r)?Oa:Na.current);var f=r.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==d||h!==l)&&ii(t,o,n,l),Ls=!1,h=t.memoizedState,o.state=h,Bs(t,n,o,a);var p=t.memoizedState;i!==d||h!==p||Ta.current||Ls?("function"===typeof f&&(ni(t,r,f,n),p=t.memoizedState),(c=Ls||si(t,r,c,n,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=l,n=c):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ni(e,t,r,n,s,a)}function Ni(e,t,r,n,a,s){ji(e,t);var o=0!==(128&t.flags);if(!n&&!o)return a&&za(t,r,!1),Wi(e,t,s);n=t.stateNode,bi.current=t;var i=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,i,s)):wi(e,t,i,s),t.memoizedState=n.state,a&&za(t,r,!0),t.child}function Ti(e){var t=e.stateNode;t.pendingContext?Pa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pa(0,t.context,!1),Js(e,t.containerInfo)}function Oi(e,t,r,n,a){return fs(),ps(a),t.flags|=256,wi(e,t,r,n),t.child}var Ri,Ai,Ii,Pi={dehydrated:null,treeContext:null,retryLane:0};function Li(e){return{baseLanes:e,cachePool:null,transitions:null}}function qi(e,t,r){var n,a=t.pendingProps,o=Zs.current,i=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ea(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==i?(i.childLanes=0,i.pendingProps=l):i=Lc(l,a,0,null),e=Pc(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Li(r),t.memoizedState=Pi,e):zi(t,l));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,a,o,i){if(r)return 256&t.flags?(t.flags&=-257,Ui(e,t,i,n=ui(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=Lc({mode:"visible",children:n.children},a,0,null),(o=Pc(o,a,i,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&ws(t,e.child,null,i),t.child.memoizedState=Li(i),t.memoizedState=Pi,o);if(0===(1&t.mode))return Ui(e,t,i,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,Ui(e,t,i,n=ui(o=Error(s(419)),n,void 0))}if(l=0!==(i&e.childLanes),yi||l){if(null!==(n=Nl)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|i))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ps(e,a),tc(n,e,a,-1))}return pc(),Ui(e,t,i,n=ui(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ns=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ha[Ga++]=$a,Ha[Ga++]=Ya,Ha[Ga++]=Ja,$a=e.id,Ya=e.overflow,Ja=t),t=zi(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,o,r);if(i){i=a.fallback,l=t.mode,n=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ac(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==n?i=Ac(n,i):(i=Pc(i,l,r,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=null===(l=e.child.memoizedState)?Li(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Pi,a}return e=(i=e.child).sibling,a=Ac(i,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function zi(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ui(e,t,r,n){return null!==n&&ps(n),ws(t,e.child,null,r),(e=zi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Di(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ns(e.return,t,r)}function Fi(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function Mi(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(wi(e,t,n.children,r),0!==(2&(n=Zs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Di(e,r,t);else if(19===e.tag)Di(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ea(Zs,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===eo(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Fi(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===eo(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Fi(t,!0,r,null,s);break;case"together":Fi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wi(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Ac(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ac(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Vi(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qi(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ki(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qi(t),null;case 1:case 17:return Aa(t.type)&&Ia(),Qi(t),null;case 3:return n=t.stateNode,$s(),ja(Ta),ja(Na),ro(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(sc(ss),ss=null))),Qi(t),null;case 5:Xs(t);var a=Gs(Hs.current);if(r=t.type,null!==e&&null!=t.stateNode)Ai(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Qi(t),null}if(e=Gs(Qs.current),ds(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[ha]=t,n[fa]=o,e=0!==(1&t.mode),r){case"dialog":Dn("cancel",n),Dn("close",n);break;case"iframe":case"object":case"embed":Dn("load",n);break;case"video":case"audio":for(a=0;a<Ln.length;a++)Dn(Ln[a],n);break;case"source":Dn("error",n);break;case"img":case"image":case"link":Dn("error",n),Dn("load",n);break;case"details":Dn("toggle",n);break;case"input":$(n,o),Dn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Dn("invalid",n);break;case"textarea":ae(n,o),Dn("invalid",n)}for(var l in be(r,o),a=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xn(n.textContent,c,e),a=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Dn("scroll",n)}switch(r){case"input":K(n),Z(n,o,!0);break;case"textarea":K(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ha]=t,e[fa]=n,Ri(e,t),t.stateNode=e;e:{switch(l=ye(r,n),r){case"dialog":Dn("cancel",e),Dn("close",e),a=n;break;case"iframe":case"object":case"embed":Dn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ln.length;a++)Dn(Ln[a],e);a=n;break;case"source":Dn("error",e),a=n;break;case"img":case"image":case"link":Dn("error",e),Dn("load",e),a=n;break;case"details":Dn("toggle",e),a=n;break;case"input":$(e,n),a=J(e,n),Dn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=z({},n,{value:void 0}),Dn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Dn("invalid",e)}for(o in be(r,a),c=a)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(i.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Dn("scroll",e):null!=u&&y(e,o,u,l))}switch(r){case"input":K(e),Z(e,n,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+V(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qi(t),null;case 6:if(e&&null!=t.stateNode)Ii(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=Gs(Hs.current),Gs(Qs.current),ds(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(o=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return Qi(t),null;case 13:if(ja(Zs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[ha]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qi(t),o=!1}else null!==ss&&(sc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Il&&(Il=3):pc())),null!==t.updateQueue&&(t.flags|=4),Qi(t),null);case 4:return $s(),null===e&&Bn(t.stateNode.containerInfo),Qi(t),null;case 10:return Cs(t.type._context),Qi(t),null;case 19:if(ja(Zs),null===(o=t.memoizedState))return Qi(t),null;if(n=0!==(128&t.flags),null===(l=o.rendering))if(n)Vi(o,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Vi(o,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ea(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Ml&&(t.flags|=128,n=!0,Vi(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=eo(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Vi(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!as)return Qi(t),null}else 2*Ye()-o.renderingStartTime>Ml&&1073741824!==r&&(t.flags|=128,n=!0,Vi(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,r=Zs.current,Ea(Zs,n?1&r|2:1&r),t):(Qi(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Qi(t),6&t.subtreeFlags&&(t.flags|=8192)):Qi(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Hi(e,t){switch(ts(t),t.tag){case 1:return Aa(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),ja(Ta),ja(Na),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(ja(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ja(Zs),null;case 4:return $s(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ri=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ai=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Gs(Qs.current);var s,o=null;switch(r){case"input":a=J(e,a),n=J(e,n),o=[];break;case"select":a=z({},a,{value:void 0}),n=z({},n,{value:void 0}),o=[];break;case"textarea":a=ne(e,a),n=ne(e,n),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(u in be(r,n),r=null,a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(i.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=a?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(o||(o=[]),o.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(i.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Dn("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ii=function(e,t,r,n){r!==n&&(t.flags|=4)};var Gi=!1,Ji=!1,$i="function"===typeof WeakSet?WeakSet:Set,Yi=null;function Xi(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){kc(e,t,n)}else r.current=null}function Zi(e,t,r){try{r()}catch(n){kc(e,t,n)}}var el=!1;function tl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&Zi(t,r,s)}a=a.next}while(a!==n)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function nl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function il(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(il(e,t,r),e=e.sibling;null!==e;)il(e,t,r),e=e.sibling}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}var cl=null,ul=!1;function dl(e,t,r){for(r=r.child;null!==r;)hl(e,t,r),r=r.sibling}function hl(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(i){}switch(r.tag){case 5:Ji||Xi(r,t);case 6:var n=cl,a=ul;cl=null,dl(e,t,r),ul=a,null!==(cl=n)&&(ul?(e=cl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):cl.removeChild(r.stateNode));break;case 18:null!==cl&&(ul?(e=cl,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),Bt(e)):la(cl,r.stateNode));break;case 4:n=cl,a=ul,cl=r.stateNode.containerInfo,ul=!0,dl(e,t,r),cl=n,ul=a;break;case 0:case 11:case 14:case 15:if(!Ji&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&Zi(r,t,o),a=a.next}while(a!==n)}dl(e,t,r);break;case 1:if(!Ji&&(Xi(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){kc(r,t,i)}dl(e,t,r);break;case 21:dl(e,t,r);break;case 22:1&r.mode?(Ji=(n=Ji)||null!==r.memoizedState,dl(e,t,r),Ji=n):dl(e,t,r);break;default:dl(e,t,r)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $i),t.forEach(function(t){var n=Cc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function pl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(s(160));hl(o,i,a),cl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){kc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),gl(e),4&n){try{tl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{tl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:pl(t,e),gl(e),512&n&&null!==r&&Xi(r,r.return);break;case 5:if(pl(t,e),gl(e),512&n&&null!==r&&Xi(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){kc(e,e.return,g)}}if(4&n&&null!=(a=e.stateNode)){var o=e.memoizedProps,i=null!==r?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(a,o),ye(l,i);var u=ye(l,o);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):y(a,d,h,u)}switch(l){case"input":X(a,o);break;case"textarea":se(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?re(a,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?re(a,!!o.multiple,o.defaultValue,!0):re(a,!!o.multiple,o.multiple?[]:"",!1))}a[fa]=o}catch(g){kc(e,e.return,g)}}break;case 6:if(pl(t,e),gl(e),4&n){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(g){kc(e,e.return,g)}}break;case 3:if(pl(t,e),gl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:pl(t,e),gl(e);break;case 13:pl(t,e),gl(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Fl=Ye())),4&n&&fl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Ji=(u=Ji)||d,pl(t,e),Ji=u):pl(t,e),gl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Yi=e,d=e.child;null!==d;){for(h=Yi=d;null!==Yi;){switch(p=(f=Yi).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:Xi(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(n,r,g)}}break;case 5:Xi(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Yi=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,i=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",i))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),gl(e),4&n&&fl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(sl(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),ll(e,ol(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;il(e,ol(e),o);break;default:throw Error(s(161))}}catch(i){kc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,r){Yi=e,bl(e,t,r)}function bl(e,t,r){for(var n=0!==(1&e.mode);null!==Yi;){var a=Yi,s=a.child;if(22===a.tag&&n){var o=null!==a.memoizedState||Gi;if(!o){var i=a.alternate,l=null!==i&&null!==i.memoizedState||Ji;i=Gi;var c=Ji;if(Gi=o,(Ji=l)&&!c)for(Yi=a;null!==Yi;)l=(o=Yi).child,22===o.tag&&null!==o.memoizedState?Sl(a):null!==l?(l.return=o,Yi=l):Sl(a);for(;null!==s;)Yi=s,bl(s,t,r),s=s.sibling;Yi=a,Gi=i,Ji=c}yl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Yi=s):yl(e)}}function yl(e){for(;null!==Yi;){var t=Yi;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ji||rl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ji)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ri(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ws(t,o,n);break;case 3:var i=t.updateQueue;if(null!==i){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ws(t,i,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Ji||512&t.flags&&nl(t)}catch(f){kc(t,t.return,f)}}if(t===e){Yi=null;break}if(null!==(r=t.sibling)){r.return=t.return,Yi=r;break}Yi=t.return}}function wl(e){for(;null!==Yi;){var t=Yi;if(t===e){Yi=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Yi=r;break}Yi=t.return}}function Sl(e){for(;null!==Yi;){var t=Yi;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{rl(4,t)}catch(l){kc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){kc(t,a,l)}}var s=t.return;try{nl(t)}catch(l){kc(t,s,l)}break;case 5:var o=t.return;try{nl(t)}catch(l){kc(t,o,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Yi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Yi=i;break}Yi=t.return}}var _l,kl=Math.ceil,xl=w.ReactCurrentDispatcher,jl=w.ReactCurrentOwner,El=w.ReactCurrentBatchConfig,Cl=0,Nl=null,Tl=null,Ol=0,Rl=0,Al=xa(0),Il=0,Pl=null,Ll=0,ql=0,zl=0,Ul=null,Dl=null,Fl=0,Ml=1/0,Bl=null,Wl=!1,Vl=null,Ql=null,Kl=!1,Hl=null,Gl=0,Jl=0,$l=null,Yl=-1,Xl=0;function Zl(){return 0!==(6&Cl)?Ye():-1!==Yl?Yl:Yl=Ye()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Ol?Ol&-Ol:null!==ms.transition?(0===Xl&&(Xl=mt()),Xl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function tc(e,t,r,n){if(50<Jl)throw Jl=0,$l=null,Error(s(185));vt(e,r,n),0!==(2&Cl)&&e===Nl||(e===Nl&&(0===(2&Cl)&&(ql|=r),4===Il&&oc(e,Ol)),rc(e,n),1===r&&0===Cl&&0===(1&t.mode)&&(Ml=Ye()+500,Da&&Ba()))}function rc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),i=1<<o,l=a[o];-1===l?0!==(i&r)&&0===(i&n)||(a[o]=ft(i,t)):l<=t&&(e.expiredLanes|=i),s&=~i}}(e,t);var n=ht(e,e===Nl?Ol:0);if(0===n)null!==r&&Ge(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ge(r),1===t)0===e.tag?function(e){Da=!0,Ma(e)}(ic.bind(null,e)):Ma(ic.bind(null,e)),oa(function(){0===(6&Cl)&&Ba()}),r=null;else{switch(wt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Nc(r,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nc(e,t){if(Yl=-1,Xl=0,0!==(6&Cl))throw Error(s(327));var r=e.callbackNode;if(Sc()&&e.callbackNode!==r)return null;var n=ht(e,e===Nl?Ol:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=mc(e,n);else{t=n;var a=Cl;Cl|=2;var o=fc();for(Nl===e&&Ol===t||(Bl=null,Ml=Ye()+500,dc(e,t));;)try{vc();break}catch(l){hc(e,l)}Es(),xl.current=o,Cl=a,null!==Tl?t=0:(Nl=null,Ol=0,t=Il)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(n=a,t=ac(e,a))),1===t)throw r=Pl,dc(e,0),oc(e,n),rc(e,Ye()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!on(s(),a))return!1}catch(i){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=mc(e,n))&&(0!==(o=pt(e))&&(n=o,t=ac(e,o))),1===t))throw r=Pl,dc(e,0),oc(e,n),rc(e,Ye()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Dl,Bl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=Fl+500-Ye())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){Zl(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(wc.bind(null,e,Dl,Bl),t);break}wc(e,Dl,Bl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-ot(n);o=1<<i,(i=t[i])>a&&(a=i),n&=~o}if(n=a,10<(n=(120>(n=Ye()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kl(n/1960))-n)){e.timeoutHandle=na(wc.bind(null,e,Dl,Bl),n);break}wc(e,Dl,Bl);break;default:throw Error(s(329))}}}return rc(e,Ye()),e.callbackNode===r?nc.bind(null,e):null}function ac(e,t){var r=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Dl,Dl=r,null!==t&&sc(t)),e}function sc(e){null===Dl?Dl=e:Dl.push.apply(Dl,e)}function oc(e,t){for(t&=~zl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function ic(e){if(0!==(6&Cl))throw Error(s(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var r=mc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=ac(e,n))}if(1===r)throw r=Pl,dc(e,0),oc(e,t),rc(e,Ye()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Dl,Bl),rc(e,Ye()),null}function lc(e,t){var r=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=r)&&(Ml=Ye()+500,Da&&Ba())}}function cc(e){null!==Hl&&0===Hl.tag&&0===(6&Cl)&&Sc();var t=Cl;Cl|=1;var r=El.transition,n=yt;try{if(El.transition=null,yt=1,e)return e()}finally{yt=n,El.transition=r,0===(6&(Cl=t))&&Ba()}}function uc(){Rl=Al.current,ja(Al)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Tl)for(r=Tl.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ia();break;case 3:$s(),ja(Ta),ja(Na),ro();break;case 5:Xs(n);break;case 4:$s();break;case 13:case 19:ja(Zs);break;case 10:Cs(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Nl=e,Tl=e=Ac(e.current,null),Ol=Rl=t,Il=0,Pl=null,zl=ql=Ll=0,Dl=Ul=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(n=(r=Rs[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var o=s.next;s.next=a,n.next=o}r.pending=n}Rs=null}return e}function hc(e,t){for(;;){var r=Tl;try{if(Es(),no.current=Xo,co){for(var n=oo.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}co=!1}if(so=0,lo=io=oo=null,uo=!1,ho=0,jl.current=null,null===r||null===r.return){Il=1,Pl=t,Tl=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gi(i);if(null!==p){p.flags&=-257,vi(p,i,l,0,t),1&p.mode&&mi(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mi(o,u,t),pc();break e}c=Error(s(426))}else if(as&&1&l.mode){var v=gi(i);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vi(v,i,l,0,t),ps(ci(c,l));break e}}o=c=ci(c,l),4!==Il&&(Il=2),null===Ul?Ul=[o]:Ul.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,fi(0,c,t));break e;case 1:l=c;var b=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Ql||!Ql.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pi(o,l,t));break e}}o=o.return}while(null!==o)}yc(r)}catch(w){t=w,Tl===r&&null!==r&&(Tl=r=r.return);continue}break}}function fc(){var e=xl.current;return xl.current=Xo,null===e?Xo:e}function pc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Nl||0===(268435455&Ll)&&0===(268435455&ql)||oc(Nl,Ol)}function mc(e,t){var r=Cl;Cl|=2;var n=fc();for(Nl===e&&Ol===t||(Bl=null,dc(e,t));;)try{gc();break}catch(a){hc(e,a)}if(Es(),Cl=r,xl.current=n,null!==Tl)throw Error(s(261));return Nl=null,Ol=0,Il}function gc(){for(;null!==Tl;)bc(Tl)}function vc(){for(;null!==Tl&&!Je();)bc(Tl)}function bc(e){var t=_l(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?yc(e):Tl=t,jl.current=null}function yc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ki(r,t,Rl)))return void(Tl=r)}else{if(null!==(r=Hi(r,t)))return r.flags&=32767,void(Tl=r);if(null===e)return Il=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,r){var n=yt,a=El.transition;try{El.transition=null,yt=1,function(e,t,r,n){do{Sc()}while(null!==Hl);if(0!==(6&Cl))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ot(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,o),e===Nl&&(Tl=Nl=null,Ol=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Kl||(Kl=!0,Nc(tt,function(){return Sc(),null})),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=El.transition,El.transition=null;var i=yt;yt=1;var l=Cl;Cl|=4,jl.current=null,function(e,t){if(ea=Vt,fn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(S){r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==a&&3!==h.nodeType||(l=i+a),h!==o||0!==n&&3!==h.nodeType||(c=i+n),3===h.nodeType&&(i+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===a&&(l=i),f===o&&++d===n&&(c=i),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Vt=!1,Yi=t;null!==Yi;)if(e=(t=Yi).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yi=e;else for(;null!==Yi;){t=Yi;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ri(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(S){kc(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Yi=e;break}Yi=t.return}m=el,el=!1}(e,r),ml(r,e),pn(ta),Vt=!!ea,ta=ea=null,e.current=r,vl(r,e,a),$e(),Cl=l,yt=i,El.transition=o}else e.current=r;if(Kl&&(Kl=!1,Hl=e,Gl=a),o=e.pendingLanes,0===o&&(Ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),rc(e,Ye()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Gl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,Ba()}(e,t,r,n)}finally{El.transition=a,yt=n}return null}function Sc(){if(null!==Hl){var e=wt(Gl),t=El.transition,r=yt;try{if(El.transition=null,yt=16>e?16:e,null===Hl)var n=!1;else{if(e=Hl,Hl=null,Gl=0,0!==(6&Cl))throw Error(s(331));var a=Cl;for(Cl|=4,Yi=e.current;null!==Yi;){var o=Yi,i=o.child;if(0!==(16&Yi.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Yi=u;null!==Yi;){var d=Yi;switch(d.tag){case 0:case 11:case 15:tl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Yi=h;else for(;null!==Yi;){var f=(d=Yi).sibling,p=d.return;if(al(d),d===u){Yi=null;break}if(null!==f){f.return=p,Yi=f;break}Yi=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Yi=o}}if(0!==(2064&o.subtreeFlags)&&null!==i)i.return=o,Yi=i;else e:for(;null!==Yi;){if(0!==(2048&(o=Yi).flags))switch(o.tag){case 0:case 11:case 15:tl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Yi=b;break e}Yi=o.return}}var y=e.current;for(Yi=y;null!==Yi;){var w=(i=Yi).child;if(0!==(2064&i.subtreeFlags)&&null!==w)w.return=i,Yi=w;else e:for(i=y;null!==Yi;){if(0!==(2048&(l=Yi).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){kc(l,l.return,_)}if(l===i){Yi=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Yi=S;break e}Yi=l.return}}if(Cl=a,Ba(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(_){}n=!0}return n}finally{yt=r,El.transition=t}}return!1}function _c(e,t,r){e=Ds(e,t=fi(0,t=ci(r,t),1),1),t=Zl(),null!==e&&(vt(e,1,t),rc(e,t))}function kc(e,t,r){if(3===e.tag)_c(e,e,r);else for(;null!==t;){if(3===t.tag){_c(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Ql||!Ql.has(n))){t=Ds(t,e=pi(t,e=ci(r,e),1),1),e=Zl(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function xc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&r,Nl===e&&(Ol&r)===r&&(4===Il||3===Il&&(130023424&Ol)===Ol&&500>Ye()-Fl?dc(e,0):zl|=r),rc(e,t)}function jc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=Zl();null!==(e=Ps(e,t))&&(vt(e,t,r),rc(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),jc(e,r)}function Cc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),jc(e,r)}function Nc(e,t){return He(e,t)}function Tc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,r,n){return new Tc(e,t,r,n)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var r=e.alternate;return null===r?((r=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ic(e,t,r,n,a,o){var i=2;if(n=e,"function"===typeof e)Rc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case k:return Pc(r.children,a,o,t);case x:i=8,a|=8;break;case j:return(e=Oc(12,r,t,2|a)).elementType=j,e.lanes=o,e;case T:return(e=Oc(13,r,t,a)).elementType=T,e.lanes=o,e;case O:return(e=Oc(19,r,t,a)).elementType=O,e.lanes=o,e;case I:return Lc(r,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:i=10;break e;case C:i=9;break e;case N:i=11;break e;case R:i=14;break e;case A:i=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(i,r,t,a)).elementType=e,t.type=n,t.lanes=o,t}function Pc(e,t,r,n){return(e=Oc(7,e,n,t)).lanes=r,e}function Lc(e,t,r,n){return(e=Oc(22,e,n,t)).elementType=I,e.lanes=r,e.stateNode={isHidden:!1},e}function qc(e,t,r){return(e=Oc(6,e,null,t)).lanes=r,e}function zc(e,t,r){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Dc(e,t,r,n,a,s,o,i,l){return e=new Uc(e,t,r,i,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qs(s),e}function Fc(e){if(!e)return Ca;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Aa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Aa(r))return La(e,r,t)}return t}function Mc(e,t,r,n,a,s,o,i,l){return(e=Dc(r,n,!0,e,0,s,0,i,l)).context=Fc(null),r=e.current,(s=Us(n=Zl(),a=ec(r))).callback=void 0!==t&&null!==t?t:null,Ds(r,s,a),e.current.lanes=a,vt(e,a,n),rc(e,n),e}function Bc(e,t,r,n){var a=t.current,s=Zl(),o=ec(a);return r=Fc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Us(s,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ds(a,t,o))&&(tc(e,a,o,s),Fs(e,a,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}_l=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)yi=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return yi=!1,function(e,t,r){switch(t.tag){case 3:Ti(t),fs();break;case 5:Ys(t);break;case 1:Aa(t.type)&&qa(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ea(_s,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ea(Zs,1&Zs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?qi(e,t,r):(Ea(Zs,1&Zs.current),null!==(e=Wi(e,t,r))?e.sibling:null);Ea(Zs,1&Zs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Mi(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(Zs,Zs.current),n)break;return null;case 22:case 23:return t.lanes=0,xi(e,t,r)}return Wi(e,t,r)}(e,t,r);yi=0!==(131072&e.flags)}else yi=!1,as&&0!==(1048576&t.flags)&&Za(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Bi(e,t),e=t.pendingProps;var a=Ra(t,Na.current);Ts(t,r),a=go(null,t,n,e,a,r);var o=vo();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Aa(n)?(o=!0,qa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,qs(t),a.updater=ai,t.stateNode=a,a._reactInternals=t,li(t,n,e,r),t=Ni(null,t,n,!0,o,r)):(t.tag=0,as&&o&&es(t),wi(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Bi(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(n),e=ri(n,e),a){case 0:t=Ei(null,t,n,e,r);break e;case 1:t=Ci(null,t,n,e,r);break e;case 11:t=Si(null,t,n,e,r);break e;case 14:t=_i(null,t,n,ri(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,Ei(e,t,n,a=t.elementType===n?a:ri(n,a),r);case 1:return n=t.type,a=t.pendingProps,Ci(e,t,n,a=t.elementType===n?a:ri(n,a),r);case 3:e:{if(Ti(t),null===e)throw Error(s(387));n=t.pendingProps,a=(o=t.memoizedState).element,zs(e,t),Bs(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oi(e,t,n,r,a=ci(Error(s(423)),t));break e}if(n!==a){t=Oi(e,t,n,r,a=ci(Error(s(424)),t));break e}for(ns=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=Ss(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fs(),n===a){t=Wi(e,t,r);break e}wi(e,t,n,r)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),n=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,ra(n,a)?i=null:null!==o&&ra(n,o)&&(t.flags|=32),ji(e,t),wi(e,t,i,r),t.child;case 6:return null===e&&cs(t),null;case 13:return qi(e,t,r);case 4:return Js(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ws(t,null,n,r):wi(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,Si(e,t,n,a=t.elementType===n?a:ri(n,a),r);case 7:return wi(e,t,t.pendingProps,r),t.child;case 8:case 12:return wi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,Ea(_s,n._currentValue),n._currentValue=i,null!==o)if(on(o.value,i)){if(o.children===a.children&&!Ta.current){t=Wi(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){i=o.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===o.tag){(c=Us(-1,r&-r)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,null!==(c=o.alternate)&&(c.lanes|=r),Ns(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===o.tag)i=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(i=o.return))throw Error(s(341));i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),Ns(i,r,t),i=o.sibling}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===t){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}wi(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ts(t,r),n=n(a=Os(a)),t.flags|=1,wi(e,t,n,r),t.child;case 14:return a=ri(n=t.type,t.pendingProps),_i(e,t,n,a=ri(n.type,a),r);case 15:return ki(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ri(n,a),Bi(e,t),t.tag=1,Aa(n)?(e=!0,qa(t)):e=!1,Ts(t,r),oi(t,n,a),li(t,n,a,r),Ni(null,t,n,!0,e,r);case 19:return Mi(e,t,r);case 22:return xi(e,t,r)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Hc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Xc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if("function"===typeof a){var i=a;a=function(){var e=Wc(o);i.call(e)}}Bc(t,o,e,a)}else o=function(e,t,r,n,a){if(a){if("function"===typeof n){var s=n;n=function(){var e=Wc(o);s.call(e)}}var o=Mc(t,n,e,0,null,!1,0,"",Yc);return e._reactRootContainer=o,e[pa]=o.current,Bn(8===e.nodeType?e.parentNode:e),cc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var i=n;n=function(){var e=Wc(l);i.call(e)}}var l=Dc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=l,e[pa]=l.current,Bn(8===e.nodeType?e.parentNode:e),cc(function(){Bc(t,l,r,n)}),l}(r,t,e,a,n);return Wc(o)}Gc.prototype.render=Hc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Gc.prototype.unmount=Hc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Bc(null,e,null,null)}),t[pa]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&0!==t&&t<It[r].priority;r++);It.splice(r,0,e),0===r&&zt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(bt(t,1|r),rc(t,Ye()),0===(6&Cl)&&(Ml=Ye()+500,Ba()))}break;case 13:cc(function(){var t=Ps(e,1);if(null!==t){var r=Zl();tc(t,e,1,r)}}),Qc(e,1)}},_t=function(e){if(13===e.tag){var t=Ps(e,134217728);if(null!==t)tc(t,e,134217728,Zl());Qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=ec(e),r=Ps(e,t);if(null!==r)tc(r,e,t,Zl());Qc(e,t)}},xt=function(){return yt},jt=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},_e=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Sa(n);if(!a)throw Error(s(90));H(n),X(n,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ne=lc,Te=cc;var Zc={usingClientEntryPoint:!1,Events:[ya,wa,Sa,Ee,Ce,lc]},eu={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(tu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var r=!1,n="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Dc(e,1,!1,null,0,r,0,n,a),e[pa]=t.current,Bn(8===e.nodeType?e.parentNode:e),new Hc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,r){if(!$c(t))throw Error(s(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Jc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,a=!1,o="",i=Kc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(i=r.onRecoverableError)),t=Mc(t,null,e,1,null!=r?r:null,a,0,o,i),e[pa]=t.current,Bn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Gc(t)},t.render=function(e,t,r){if(!$c(t))throw Error(s(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(cc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$c(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Xc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,r){e.exports=r(234)},950(e,t,r){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&n;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>o[e]=()=>n[e]);return o.default=()=>n,r.d(s,o),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n,a=r(43),s=r.t(a,2),o=r(391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,r,n){return void 0===r&&(r=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function p(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function m(e,t,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:o=!1}=a,u=s.history,p=n.Pop,m=null,g=v();function v(){return(u.state||{idx:null}).idx}function b(){p=n.Pop;let e=v(),t=null==e?null:e-g;g=e,m&&m({action:p,location:w.location,delta:t})}function y(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"===typeof e?e:f(e);return r=r.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==g&&(g=0,u.replaceState(i({},u.state,{idx:g}),""));let w={get action(){return p},get location(){return e(s,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,b),m=e,()=>{s.removeEventListener(l,b),m=null}},createHref:e=>t(s,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=n.Push;let a=h(w.location,e,t);r&&r(a,e),g=v()+1;let i=d(a,g),l=w.createHref(a);try{u.pushState(i,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}o&&m&&m({action:p,location:w.location,delta:1})},replace:function(e,t){p=n.Replace;let a=h(w.location,e,t);r&&r(a,e),g=v();let s=d(a,g),i=w.createHref(a);u.replaceState(s,"",i),o&&m&&m({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,r){return void 0===r&&(r="/"),b(e,t,r,!1)}function b(e,t,r,n){let a=A(("string"===typeof t?p(t):t).pathname||"/",r);if(null==a)return null;let s=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let i=0;null==o&&i<s.length;++i){let e=R(a);o=T(s[i],e,n)}return o}function y(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let i=F([n,o.relativePath]),l=r.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+i+'".'),y(e.children,t,l,i)),(null!=e.path||e.index)&&t.push({path:i,score:N(i,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of w(e.path))a(e,t,n);else a(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let o=w(n.join("/")),i=[];return i.push(...o.map(e=>""===e?s:[s,e].join("/"))),a&&i.push(...o),i.map(t=>e.startsWith("/")&&""===t?"/":t)}const S=/^:[\w-]+$/,_=3,k=2,x=1,j=10,E=-2,C=e=>"*"===e;function N(e,t){let r=e.split("/"),n=r.length;return r.some(C)&&(n+=E),t&&(n+=k),r.filter(e=>!C(e)).reduce((e,t)=>e+(S.test(t)?_:""===t?x:j),n)}function T(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},s="/",o=[];for(let i=0;i<n.length;++i){let e=n[i],l=i===n.length-1,c="/"===s?t:t.slice(s.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:F([s,u.pathname]),pathnameBase:M(F([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=F([s,u.pathnameBase]))}return o}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=i[r]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:o,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}const I=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function P(e,t){void 0===t&&(t="/");let r,{pathname:n,search:a="",hash:s=""}="string"===typeof e?p(e):e;if(n)if(o=n,I.test(o))r=n;else{if(n.includes("//")){let e=n;n=n.replace(/\/\/+/g,"/"),u(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+n)}r=n.startsWith("/")?L(n.substring(1),"/"):L(n,t)}else r=t;var o;return{pathname:r,search:B(a),hash:W(s)}}function L(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function q(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e,t){let r=z(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function D(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=p(e):(a=i({},e),c(!a.pathname||!a.pathname.includes("?"),q("?","pathname","search",a)),c(!a.pathname||!a.pathname.includes("#"),q("#","pathname","hash",a)),c(!a.search||!a.search.includes("#"),q("#","search","hash",a)));let s,o=""===e||""===a.pathname,l=o?"/":a.pathname;if(null==l)s=r;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=P(a,s),d=l&&"/"!==l&&l.endsWith("/"),h=(o||"."===l)&&r.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const F=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Q=["post","put","patch","delete"],K=(new Set(Q),["get",...Q]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H.apply(this,arguments)}const G=a.createContext(null);const J=a.createContext(null);const $=a.createContext(null);const Y=a.createContext(null);const X=a.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=a.createContext(null);function ee(){return null!=a.useContext(Y)}function te(){return ee()||c(!1),a.useContext(Y).location}function re(e){a.useContext($).static||a.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=a.useContext(X);return e?function(){let{router:e}=he(ue.UseNavigateStable),t=pe(de.UseNavigateStable),r=a.useRef(!1);return re(()=>{r.current=!0}),a.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,H({fromRouteId:t},a)))},[e,t])}():function(){ee()||c(!1);let e=a.useContext(G),{basename:t,future:r,navigator:n}=a.useContext($),{matches:s}=a.useContext(X),{pathname:o}=te(),i=JSON.stringify(U(s,r.v7_relativeSplatPath)),l=a.useRef(!1);return re(()=>{l.current=!0}),a.useCallback(function(r,a){if(void 0===a&&(a={}),!l.current)return;if("number"===typeof r)return void n.go(r);let s=D(r,JSON.parse(i),o,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(a.replace?n.replace:n.push)(s,a.state,a)},[t,n,i,o,e])}()}function ae(e,t,r,s){ee()||c(!1);let{navigator:o}=a.useContext($),{matches:i}=a.useContext(X),l=i[i.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=te();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",b=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=v(e,{pathname:b});let w=ce(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:F([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:F([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,r,s);return t&&w?a.createElement(Y.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:n.Pop}},w):w}function se(){let e=function(){var e;let t=a.useContext(Z),r=fe(de.UseRouteError),n=pe(de.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:s},r):null,null)}const oe=a.createElement(se,null);class ie extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(X.Provider,{value:this.props.routeContext},a.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:r,children:n}=e,s=a.useContext(G);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),a.createElement(X.Provider,{value:t},n)}function ce(e,t,r,n){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var o;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(o=n)&&o.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let i=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=i.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),i=i.slice(0,Math.min(i.length,e+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let a=0;a<i.length;a++){let e=i[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=a),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){u=!0,i=d>=0?i.slice(0,d+1):[i[0]];break}}}return i.reduceRight((e,n,s)=>{let o,c=!1,h=null,f=null;var p;r&&(o=l&&n.route.id?l[n.route.id]:void 0,h=n.route.errorElement||oe,u&&(d<0&&0===s?(p="route-fallback",!1||me[p]||(me[p]=!0),c=!0,f=null):d===s&&(c=!0,f=n.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,s+1)),g=()=>{let t;return t=o?h:c?f:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(le,{match:n,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?a.createElement(ie,{location:r.location,revalidation:r.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let t=a.useContext(G);return t||c(!1),t}function fe(e){let t=a.useContext(J);return t||c(!1),t}function pe(e){let t=function(){let e=a.useContext(X);return e||c(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||c(!1),r.route.id}const me={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ve(e){let{to:t,replace:r,state:n,relative:s}=e;ee()||c(!1);let{future:o,static:i}=a.useContext($),{matches:l}=a.useContext(X),{pathname:u}=te(),d=ne(),h=D(t,U(l,o.v7_relativeSplatPath),u,"path"===s),f=JSON.stringify(h);return a.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:s}),[d,f,s,r,n]),null}function be(e){c(!1)}function ye(e){let{basename:t="/",children:r=null,location:s,navigationType:o=n.Pop,navigator:i,static:l=!1,future:u}=e;ee()&&c(!1);let d=t.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:d,navigator:i,static:l,future:H({v7_relativeSplatPath:!1},u)}),[d,u,i,l]);"string"===typeof s&&(s=p(s));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:b="default"}=s,y=a.useMemo(()=>{let e=A(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:b},navigationType:o}},[d,f,m,g,v,b,o]);return null==y?null:a.createElement($.Provider,{value:h},a.createElement(Y.Provider,{children:r,value:y}))}function we(e){let{children:t,location:r}=e;return ae(Se(t),r)}new Promise(()=>{});a.Component;function Se(e,t){void 0===t&&(t=[]);let r=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let s=[...t,n];if(e.type===a.Fragment)return void r.push.apply(r,Se(e.props.children,s));e.type!==be&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Se(e.props.children,s)),r.push(o)}),r}var _e=r(950),ke=r.t(_e,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(rs){}new Map;const xe=s.startTransition;ke.flushSync,s.useId;function je(e){let{basename:t,children:r,future:n,window:s}=e,o=a.useRef();var i;null==o.current&&(o.current=(void 0===(i={window:s,v5Compat:!0})&&(i={}),m(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return h("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,i)));let l=o.current,[c,u]=a.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},p=a.useCallback(e=>{d&&xe?xe(()=>u(e)):u(e)},[u,d]);return a.useLayoutEffect(()=>l.listen(p),[l,p]),a.useEffect(()=>ge(n),[n]),a.createElement(ye,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:n})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ee,Ce;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ee||(Ee={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));function Ne(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function Te(e,t,r,n){return new(r||(r=Promise))(function(a,s){function o(e){try{l(n.next(e))}catch(rs){s(rs)}}function i(e){try{l(n.throw(e))}catch(rs){s(rs)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,i)}l((n=n.apply(e,t||[])).next())})}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class Oe extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class Re extends Oe{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ae extends Oe{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ie extends Oe{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pe;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Pe||(Pe={}));class Le{constructor(e){let{headers:t={},customFetch:r,region:n=Pe.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return Te(this,arguments,void 0,function(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var n;let a,s;try{const{headers:o,method:i,body:l,signal:c,timeout:u}=r;let d={},{region:h}=r;h||(h=t.region);const f=new URL("".concat(t.url,"/").concat(e));let p;h&&"any"!==h&&(d["x-region"]=h,f.searchParams.set("forceFunctionRegion",h)),l&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?"undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=l):"string"===typeof l?(d["Content-Type"]="text/plain",p=l):"undefined"!==typeof FormData&&l instanceof FormData?p=l:(d["Content-Type"]="application/json",p=JSON.stringify(l)):p=l;let m=c;u&&(s=new AbortController,a=setTimeout(()=>s.abort(),u),c?(m=s.signal,c.addEventListener("abort",()=>s.abort())):m=s.signal);const g=yield t.fetch(f.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),t.headers),o),body:p,signal:m}).catch(e=>{throw new Re(e)}),v=g.headers.get("x-relay-error");if(v&&"true"===v)throw new Ae(g);if(!g.ok)throw new Ie(g);let b,y=(null!==(n=g.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return b="application/json"===y?yield g.json():"application/octet-stream"===y||"application/pdf"===y?yield g.blob():"text/event-stream"===y?g:"multipart/form-data"===y?yield g.formData():yield g.text(),{data:b,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof Ie||o instanceof Ae?o.context:void 0}}finally{a&&clearTimeout(a)}}()})}}var qe=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ze=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{let t=null,n=null,a=null,s=e.status,o=e.statusText;if(e.ok){var i,l;if("HEAD"!==r.method){var c;const t=await e.text();""===t||(n="text/csv"===r.headers.get("Accept")||r.headers.get("Accept")&&(null===(c=r.headers.get("Accept"))||void 0===c?void 0:c.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}const u=null===(i=r.headers.get("Prefer"))||void 0===i?void 0:i.match(/count=(exact|planned|estimated)/),d=null===(l=e.headers.get("content-range"))||void 0===l?void 0:l.split("/");u&&d&&d.length>1&&(a=parseInt(d[1])),r.isMaybeSingle&&"GET"===r.method&&Array.isArray(n)&&(n.length>1?(t={code:"PGRST116",details:"Results contain ".concat(n.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,a=null,s=406,o="Not Acceptable"):n=1===n.length?n[0]:null)}else{var u;const a=await e.text();try{t=JSON.parse(a),Array.isArray(t)&&404===e.status&&(n=[],t=null,s=200,o="OK")}catch(d){404===e.status&&""===a?(s=204,o="No Content"):t={message:a}}if(t&&r.isMaybeSingle&&(null===t||void 0===t||null===(u=t.details)||void 0===u?void 0:u.includes("0 rows"))&&(t=null,s=200,o="OK"),t&&r.shouldThrowOnError)throw new qe(t)}return{error:t,data:n,count:a,status:s,statusText:o}});return this.shouldThrowOnError||(n=n.catch(e=>{var t;let r="";const n=null===e||void 0===e?void 0:e.cause;if(n){var a,s,o,i;const t=null!==(a=null===n||void 0===n?void 0:n.message)&&void 0!==a?a:"",l=null!==(s=null===n||void 0===n?void 0:n.code)&&void 0!==s?s:"";r="".concat(null!==(o=null===e||void 0===e?void 0:e.name)&&void 0!==o?o:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),r+="\n\nCaused by: ".concat(null!==(i=null===n||void 0===n?void 0:n.name)&&void 0!==i?i:"Error",": ").concat(t),l&&(r+=" (".concat(l,")")),(null===n||void 0===n?void 0:n.stack)&&(r+="\n".concat(n.stack))}else{var l;r=null!==(l=null===e||void 0===e?void 0:e.stack)&&void 0!==l?l:""}return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:r,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},Ue=class extends ze{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=a?"".concat(a,".order"):"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(o?"".concat(o,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof n?"offset":"".concat(n,".offset"),s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o;const i=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(i,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}};const De=new RegExp("[,()]");var Fe=class extends Ue{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}regexMatch(e,t){return this.url.searchParams.append(e,"match.".concat(t)),this}regexIMatch(e,t){return this.url.searchParams.append(e,"imatch.".concat(t)),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}isDistinct(e,t){return this.url.searchParams.append(e,"isdistinct.".concat(t)),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&De.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}notIn(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&De.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"not.in.(".concat(r,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===n?a="pl":"phrase"===n?a="ph":"websearch"===n&&(a="w");const s=void 0===r?"":"(".concat(r,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r?"".concat(r,".or"):"or";return this.url.searchParams.append(n,"(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}},Me=class{constructor(e,t){let{headers:r={},schema:n,fetch:a}=t;this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(e,t){const{head:r=!1,count:n}=null!==t&&void 0!==t?t:{},a=r?"HEAD":"GET";let s=!1;const o=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer","count=".concat(n)),new Fe({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;if(t&&this.headers.append("Prefer","count=".concat(t)),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new Fe({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(this.headers.append("Prefer","resolution=".concat(r?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer","count=".concat(n)),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new Fe({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return t&&this.headers.append("Prefer","count=".concat(t)),new Fe({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new Fe({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}},Be=class e{constructor(e){let{headers:t={},schema:r,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){if(!e||"string"!==typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new Me(new URL("".concat(this.url,"/").concat(e)),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:n=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let o;const i=new URL("".concat(this.url,"/rpc/").concat(e));let l;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;i.searchParams.append(t,r)})):(o="POST",l=t);const c=new Headers(this.headers);return a&&c.set("Prefer","count=".concat(a)),new Fe({method:o,url:i,headers:c,schema:this.schemaName,body:l,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}};const We=class{constructor(){}static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof r.g&&"undefined"!==typeof r.g.WebSocket)return{type:"native",constructor:r.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(r," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(r," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},Ve="realtime-js/".concat("2.89.0"),Qe="1.0.0",Ke=Qe,He=1e4;var Ge,Je,$e,Ye,Xe,Ze;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Ge||(Ge={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Je||(Je={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}($e||($e={})),function(e){e.websocket="websocket"}(Ye||(Ye={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Xe||(Xe={}));class et{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!==e&&void 0!==e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"===typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const n=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var t,r;const n=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:{},a=(new TextEncoder).encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,r){var n,a;const s=e.topic,o=null!==(n=e.ref)&&void 0!==n?n:"",i=null!==(a=e.join_ref)&&void 0!==a?a:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(i.length>255)throw new Error("joinRef length ".concat(i.length," exceeds maximum of 255"));if(o.length>255)throw new Error("ref length ".concat(o.length," exceeds maximum of 255"));if(s.length>255)throw new Error("topic length ".concat(s.length," exceeds maximum of 255"));if(l.length>255)throw new Error("userEvent length ".concat(l.length," exceeds maximum of 255"));if(u.length>255)throw new Error("metadata length ".concat(u.length," exceeds maximum of 255"));const d=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+o.length+s.length+l.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let f=new DataView(h),p=0;f.setUint8(p++,this.KINDS.userBroadcastPush),f.setUint8(p++,i.length),f.setUint8(p++,o.length),f.setUint8(p++,s.length),f.setUint8(p++,l.length),f.setUint8(p++,u.length),f.setUint8(p++,t),Array.from(i,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(o,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(s,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(l,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(u,e=>f.setUint8(p++,e.charCodeAt(0)));var m=new Uint8Array(h.byteLength+r.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(r),h.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"===typeof e){const r=JSON.parse(e),[n,a,s,o,i]=r;return t({join_ref:n,ref:a,topic:s,event:o,payload:i})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),n=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,n)}_decodeUserBroadcast(e,t,r){const n=t.getUint8(1),a=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4);let i=this.HEADER_LENGTH+4;const l=r.decode(e.slice(i,i+n));i+=n;const c=r.decode(e.slice(i,i+a));i+=a;const u=r.decode(e.slice(i,i+s));i+=s;const d=e.slice(i,e.byteLength),h=o===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,f={type:this.BROADCAST_EVENT,event:c,payload:h};return s>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"===typeof e?Object.fromEntries(Object.entries(e).filter(e=>{let[r]=e;return t.includes(r)})):{}}}class tt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Ze||(Ze={}));const rt=function(e,t){var r;const n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((r,a)=>(r[a]=nt(a,e,t,n),r),{}):{}},nt=(e,t,r,n)=>{const a=t.find(t=>t.name===e),s=null===a||void 0===a?void 0:a.type,o=r[e];return s&&!n.includes(s)?at(s,o):st(o)},at=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return ct(t,r)}switch(e){case Ze.bool:return ot(t);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return it(t);case Ze.json:case Ze.jsonb:return lt(t);case Ze.timestamp:return ut(t);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:default:return st(t)}},st=e=>e,ot=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},it=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},lt=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return e}return e},ct=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(a){n=s?s.split(","):[]}return n.map(e=>at(t,e))}return e},ut=e=>"string"===typeof e?e.replace(" ","T"):e,dt=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ht{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:He;this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ft,pt,mt,gt;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(ft||(ft={}));class vt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vt.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=vt.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=vt.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const a=this.cloneDeep(e),s=this.transformState(t),o={},i={};return this.map(a,(e,t)=>{s[e]||(i[e]=t)}),this.map(s,(e,t)=>{const r=a[e];if(r){const n=t.map(e=>e.presence_ref),a=r.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);s.length>0&&(o[e]=s),l.length>0&&(i[e]=l)}else o[e]=t}),this.syncDiff(a,{joins:o,leaves:i},r,n)}static syncDiff(e,t,r,n){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(a,(t,n)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map(e=>e.presence_ref),n=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let a=e[t];if(!a)return;const s=r.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,n(t,a,r),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(pt||(pt={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(mt||(mt={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(gt||(gt={}));class bt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;var n,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ht(this,$e.join,this.params,this.timeout),this.rejoinTimer=new tt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=Je.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on($e.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new vt(this),this.broadcastEndpointURL=dt(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(n=this.params.config)||void 0===n?void 0:n.broadcast)||void 0===a?void 0:a.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Je.closed){const{config:{broadcast:s,presence:o,private:i}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[mt.PRESENCE]&&this.bindings[mt.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:i};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(gt.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(gt.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var n;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,a=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,s=[];for(let n=0;n<a;n++){const a=t[n],{filter:{event:o,schema:i,table:l,filter:c}}=a,u=r&&r[n];if(!(u&&u.event===o&&bt.isFilterValueEqual(u.schema,i)&&bt.isFilterValueEqual(u.table,l)&&bt.isFilterValueEqual(u.filter,c)))return this.unsubscribe(),this.state=Je.errored,void(null===e||void 0===e||e(gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(gt.SUBSCRIBED))}null===e||void 0===e||e(gt.SUBSCRIBED)}).receive("error",t=>{this.state=Je.errored,null===e||void 0===e||e(gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Je.joined&&e===mt.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n;if(void 0===t||null===t)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization="Bearer ".concat(this.socket.accessTokenValue));const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);if(202===o.status)return{success:!0};let i=o.statusText;try{const e=await o.json();i=e.error||e.message||i}catch(l){}return Promise.reject(new Error(i))}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,a,s;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||r("ok"),o.receive("ok",()=>r("ok")),o.receive("error",()=>r("error")),o.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization="Bearer ".concat(this.socket.accessTokenValue));const l={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Je.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger($e.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new ht(this,$e.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null===r||void 0===r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Je.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,a=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),s}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let n=new ht(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,a;const s=e.toLocaleLowerCase(),{close:o,error:i,leave:l,join:c}=$e;if(r&&[o,i,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let u=this._onMessage(s,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(u,r)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var r,n,a,o,i,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,o=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===o||(null===o||void 0===o?void 0:o.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const r=null===(i=null===(o=null===e||void 0===e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:a,errors:s}=e,o={schema:t,table:r,commit_timestamp:n,eventType:a,new:{},old:{},errors:s};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&bt.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(null!==e&&void 0!==e?e:void 0)===(null!==t&&void 0!==t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($e.close,{},e)}_onError(e){this._on($e.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=rt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=rt(e.columns,e.old_record)),t}}const yt=()=>{},wt=25e3,St=10,_t=100,kt=[1e3,2e3,5e3,1e4];class xt{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=He,this.transport=null,this.heartbeatIntervalMs=wt,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yt,this.ref=0,this.reconnectTimer=null,this.vsn=Ke,this.logger=yt,this.conn=null,this.sendBuffer=[],this.serializer=new et,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(Ye.websocket),this.httpEndpoint=dt(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=We.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"===typeof this.conn.close&&(e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ge.connecting:return Xe.Connecting;case Ge.open:return Xe.Open;case Ge.closing:return Xe.Closing;default:return Xe.Closed}}isConnected(){return this.connectionState()===Xe.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r="realtime:".concat(e),n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new bt("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(a,")"),n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(rs){this.log("error","error in heartbeat callback",rs)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},_t)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(rs){this.log("error","error in heartbeat callback",rs)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(rs){this.log("error","error in heartbeat callback",rs)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(rs){this.log("error","error in heartbeat callback",rs)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:a}=e,s=a?"(".concat(a,")"):"",o=n.status||"";this.log("receive","".concat(o," ").concat(t," ").concat(r," ").concat(s).trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ge.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ge.open||this.conn.readyState===Ge.connecting)try{this.conn.close()}catch(rs){this.log("error","Error closing connection",rs)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL()));(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger($e.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=!1;if(t)e=t,r=!0;else if(this.accessToken)try{e=await this.accessToken()}catch(rs){this.log("error","Error fetching access token from callback",rs),e=this.accessTokenValue}else e=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const r={access_token:e,version:Ve};e&&t.updateJoinPayload(r),t.joinedOnce&&t._isJoined()&&t._push($e.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this._isManualToken()||this.setAuth().catch(t=>{this.log("error","Error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(rs){this.log("error","error in ".concat(e," callback"),rs)}})}catch(rs){this.log("error","error triggering ".concat(e," callbacks"),rs)}}_setupReconnectionTimer(){this.reconnectTimer=new tt(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},St)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,a,s,o,i,l,c,u,d,h;switch(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null===e||void 0===e?void 0:e.timeout)&&void 0!==r?r:He,this.heartbeatIntervalMs=null!==(n=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:wt,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(o=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==o?o:yt,this.vsn=null!==(i=null===e||void 0===e?void 0:e.vsn)&&void 0!==i?i:Ke,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>kt[e-1]||1e4,this.vsn){case Qe:this.encode=null!==(c=null===e||void 0===e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null===e||void 0===e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null===e||void 0===e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null===e||void 0===e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error("Unsupported serializer version: ".concat(this.vsn))}if(this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Et(e){var t=function(e,t){if("object"!=jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jt(t)?t:t+""}function Ct(e,t,r){return(t=Et(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach(function(t){Ct(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ot=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null===(r=t.icebergType)||void 0===r?void 0:r.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function Rt(e){var t;const r=null!==(t=e.fetchImpl)&&void 0!==t?t:globalThis.fetch;return{async request(t){let{method:n,path:a,query:s,body:o,headers:i}=t;const l=function(e,t,r){const n=new URL(t,e);if(r)for(const[a,s]of Object.entries(r))void 0!==s&&n.searchParams.set(a,s);return n.toString()}(e.baseUrl,a,s),c=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:"Bearer ".concat(e.token)}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),u=await r(l,{method:n,headers:Tt(Tt(Tt({},o?{"Content-Type":"application/json"}:{}),c),i),body:o?JSON.stringify(o):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){var p;const e=h?f:void 0,t=null===e||void 0===e?void 0:e.error;throw new Ot(null!==(p=null===t||void 0===t?void 0:t.message)&&void 0!==p?p:"Request failed with status ".concat(u.status),{status:u.status,icebergType:null===t||void 0===t?void 0:t.type,icebergCode:null===t||void 0===t?void 0:t.code,details:e})}return{status:u.status,headers:u.headers,data:f}}}}function At(e){return e.join("\x1f")}var It=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:At(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces"),query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:null===t||void 0===t?void 0:t.properties};return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces"),body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(At(e.namespace))})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(At(e.namespace))})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(At(e.namespace))}),!0}catch(t){if(t instanceof Ot&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ot&&409===r.status)return;throw r}}};function Pt(e){return e.join("\x1f")}var Lt=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(Pt(e.namespace),"/tables")})).data.identifiers}async createTable(e,t){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(Pt(e.namespace),"/tables"),body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(Pt(e.namespace),"/tables/").concat(e.name),body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){var r;await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(Pt(e.namespace),"/tables/").concat(e.name),query:{purgeRequested:String(null!==(r=null===t||void 0===t?void 0:t.purge)&&void 0!==r&&r)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(Pt(e.namespace),"/tables/").concat(e.name),headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(Pt(e.namespace),"/tables/").concat(e.name),headers:t}),!0}catch(r){if(r instanceof Ot&&404===r.status)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ot&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},qt=class{constructor(e){var t;let r="v1";e.catalogName&&(r+="/".concat(e.catalogName));const n=e.baseUrl.endsWith("/")?e.baseUrl:"".concat(e.baseUrl,"/");this.client=Rt({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null===(t=e.accessDelegation)||void 0===t?void 0:t.join(","),this.namespaceOps=new It(this.client,r),this.tableOps=new Lt(this.client,r,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var zt=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ut(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}var Dt=class extends zt{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ft=class extends zt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Mt=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},Bt=e=>{if(Array.isArray(e))return e.map(e=>Bt(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,n]=e;const a=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=Bt(n)}),t};function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e){var t=function(e,t){if("object"!=Wt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wt(t)?t:t+""}function Qt(e,t,r){return(t=Vt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach(function(t){Qt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Gt=e=>{var t;return e.msg||e.message||e.error_description||("string"===typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Jt=async(e,t,r)=>{e instanceof await Response&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(r=>{const n=e.status||500,a=(null===r||void 0===r?void 0:r.statusCode)||n+"";t(new Dt(Gt(r),n,a))}).catch(e=>{t(new Ft(Gt(e),e))}):t(new Ft(Gt(e),e))},$t=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Ht({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Ht(Ht({},a),r)):a};async function Yt(e,t,r,n,a,s){return new Promise((o,i)=>{e(r,$t(t,n,a,s)).then(e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>Jt(e,i,n))})}async function Xt(e,t,r,n){return Yt(e,"GET",t,r,n)}async function Zt(e,t,r,n,a){return Yt(e,"POST",t,n,a,r)}async function er(e,t,r,n,a){return Yt(e,"PUT",t,n,a,r)}async function tr(e,t,r,n,a){return Yt(e,"DELETE",t,n,a,r)}var rr=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ut(e))return{data:null,error:e};throw e}}};let nr;nr=Symbol.toStringTag;var ar=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[nr]="BlobDownloadBuilder",this.promise=null}asStream(){return new rr(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await(await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ut(e))return{data:null,error:e};throw e}}};const sr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},or={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ir=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Mt(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var a=this;try{let s;const o=Ht(Ht({},or),n);let i=Ht(Ht({},a.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const l=o.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",a.encodeMetadata(l)),s.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",a.encodeMetadata(l))):(s=r,i["cache-control"]="max-age=".concat(o.cacheControl),i["content-type"]=o.contentType,l&&(i["x-metadata"]=a.toBase64(a.encodeMetadata(l))),("undefined"!==typeof ReadableStream&&s instanceof ReadableStream||s&&"object"===typeof s&&"pipe"in s&&"function"===typeof s.pipe)&&!o.duplex&&(o.duplex="half")),(null===n||void 0===n?void 0:n.headers)&&(i=Ht(Ht({},i),n.headers));const c=a._removeEmptyFolders(t),u=a._getFinalPath(c),d=await("PUT"==e?er:Zt)(a.fetch,"".concat(a.url,"/object/").concat(u),s,Ht({headers:i},(null===o||void 0===o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(a.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const s=a._removeEmptyFolders(e),o=a._getFinalPath(s),i=new URL(a.url+"/object/upload/sign/".concat(o));i.searchParams.set("token",t);try{let e;const t=Ht({upsert:or.upsert},n),o=Ht(Ht({},a.headers),{"x-upsert":String(t.upsert)});return"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,o["cache-control"]="max-age=".concat(t.cacheControl),o["content-type"]=t.contentType),{data:{path:s,fullPath:(await er(a.fetch,i.toString(),e,{headers:o})).Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Ut(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const a=Ht({},r.headers);(null===t||void 0===t?void 0:t.upsert)&&(a["x-upsert"]="true");const s=await Zt(r.fetch,"".concat(r.url,"/object/upload/sign/").concat(n),{},{headers:a}),o=new URL(r.url+s.url),i=o.searchParams.get("token");if(!i)throw new zt("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:i},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Zt(n.fetch,"".concat(n.url,"/object/move"),{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async copy(e,t,r){var n=this;try{return{data:{path:(await Zt(n.fetch,"".concat(n.url,"/object/copy"),{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,r){var n=this;try{let a=n._getFinalPath(e),s=await Zt(n.fetch,"".concat(n.url,"/object/sign/").concat(a),Ht({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:n.headers});const o=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return s={signedUrl:encodeURI("".concat(n.url).concat(s.signedURL).concat(o))},{data:s,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,r){var n=this;try{const a=await Zt(n.fetch,"".concat(n.url,"/object/sign/").concat(n.bucketId),{expiresIn:t,paths:e},{headers:n.headers}),s=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{data:a.map(e=>Ht(Ht({},e),{},{signedUrl:e.signedURL?encodeURI("".concat(n.url).concat(e.signedURL).concat(s)):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}download(e,t){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=n?"?".concat(n):"",s=this._getFinalPath(e);return new ar(()=>Xt(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(s).concat(a),{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Bt(await Xt(t.fetch,"".concat(t.url,"/object/info/").concat(r),{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await async function(e,t,r,n){return Yt(e,"HEAD",t,Ht(Ht({},r),{},{noResolveJson:!0}),n)}(t.fetch,"".concat(t.url,"/object/").concat(r),{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n)&&n instanceof Ft){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&n.push(a);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==o&&n.push(o);let i=n.join("&");return""!==i&&(i="?".concat(i)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(r).concat(i))}}}async remove(e){var t=this;try{return{data:await tr(t.fetch,"".concat(t.url,"/object/").concat(t.bucketId),{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const a=Ht(Ht(Ht({},sr),t),{},{prefix:e||""});return{data:await Zt(n.fetch,"".concat(n.url,"/object/list/").concat(n.bucketId),a,{headers:n.headers},r),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async listV2(e,t){var r=this;try{const n=Ht({},e);return{data:await Zt(r.fetch,"".concat(r.url,"/object/list-v2/").concat(r.bucketId),n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}};const lr="2.89.0",cr={"X-Client-Info":"storage-js/".concat(lr)};var ur=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const a=new URL(e);(null===n||void 0===n?void 0:n.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Ht(Ht({},cr),t),this.fetch=Mt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Xt(t.fetch,"".concat(t.url,"/bucket").concat(r),{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Xt(t.fetch,"".concat(t.url,"/bucket/").concat(e),{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}async createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};var r=this;try{return{data:await Zt(r.fetch,"".concat(r.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await er(r.fetch,"".concat(r.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Zt(t.fetch,"".concat(t.url,"/bucket/").concat(e,"/empty"),{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await tr(t.fetch,"".concat(t.url,"/bucket/").concat(e),{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},dr=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ht(Ht({},cr),t),this.fetch=Mt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Zt(t.fetch,"".concat(t.url,"/bucket"),{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;void 0!==(null===e||void 0===e?void 0:e.limit)&&r.set("limit",e.limit.toString()),void 0!==(null===e||void 0===e?void 0:e.offset)&&r.set("offset",e.offset.toString()),(null===e||void 0===e?void 0:e.sortColumn)&&r.set("sortColumn",e.sortColumn),(null===e||void 0===e?void 0:e.sortOrder)&&r.set("sortOrder",e.sortOrder),(null===e||void 0===e?void 0:e.search)&&r.set("search",e.search);const n=r.toString(),a=n?"".concat(t.url,"/bucket?").concat(n):"".concat(t.url,"/bucket");return{data:await Xt(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await tr(t.fetch,"".concat(t.url,"/bucket/").concat(e),{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!(e=>!(!e||"string"!==typeof e)&&!(0===e.length||e.length>100)&&e.trim()===e&&!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e))(e))throw new zt("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new qt({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(e,t){const r=e[t];return"function"!==typeof r?r:async function(){try{for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return{data:await r.apply(e,a),error:null}}catch(o){if(n)throw o;return{data:null,error:o}}}}})}};const hr={"X-Client-Info":"storage-js/".concat(lr),"Content-Type":"application/json"};var fr=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function pr(e){return"object"===typeof e&&null!==e&&"__isStorageVectorsError"in e}var mr=class extends fr{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},gr=class extends fr{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const vr=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},br=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yr=(e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(a.headers=Ht({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Ht(Ht({},a),r)):a};async function wr(e,t,r,n,a,s){return new Promise((o,i)=>{e(r,yr(t,n,a,s)).then(e=>{if(!e.ok)throw e;if(null===n||void 0===n?void 0:n.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>o(e)).catch(e=>(async(e,t,r)=>{if(e&&"object"===typeof e&&"status"in e&&"ok"in e&&"number"===typeof e.status&&!(null===r||void 0===r?void 0:r.noResolveJson)){const r=e.status||500,n=e;if("function"===typeof n.json)n.json().then(e=>{const n=(null===e||void 0===e?void 0:e.statusCode)||(null===e||void 0===e?void 0:e.code)||r+"";t(new mr(br(e),r,n))}).catch(()=>{const e=r+"";t(new mr(n.statusText||"HTTP ".concat(r," error"),r,e))});else{const e=r+"";t(new mr(n.statusText||"HTTP ".concat(r," error"),r,e))}}else t(new gr(br(e),e))})(e,i,n))})}async function Sr(e,t,r,n,a){return wr(e,"POST",t,n,a,r)}var _r=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ht(Ht({},hr),t),this.fetch=vr(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Sr(t.fetch,"".concat(t.url,"/CreateIndex"),e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Sr(r.fetch,"".concat(r.url,"/GetIndex"),{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await Sr(t.fetch,"".concat(t.url,"/ListIndexes"),e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Sr(r.fetch,"".concat(r.url,"/DeleteIndex"),{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}}},kr=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ht(Ht({},hr),t),this.fetch=vr(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Sr(t.fetch,"".concat(t.url,"/PutVectors"),e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Sr(t.fetch,"".concat(t.url,"/GetVectors"),e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1))}return{data:await Sr(t.fetch,"".concat(t.url,"/ListVectors"),e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Sr(t.fetch,"".concat(t.url,"/QueryVectors"),e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Sr(t.fetch,"".concat(t.url,"/DeleteVectors"),e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}},xr=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ht(Ht({},hr),t),this.fetch=vr(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Sr(t.fetch,"".concat(t.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Sr(t.fetch,"".concat(t.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async listBuckets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=this;try{return{data:await Sr(t.fetch,"".concat(t.url,"/ListVectorBuckets"),e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Sr(t.fetch,"".concat(t.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}},jr=class extends xr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t.headers||{},t.fetch)}from(e){return new Er(this.url,this.headers,e,this.fetch)}async createBucket(e){return(()=>super.createBucket)().call(this,e)}async getBucket(e){return(()=>super.getBucket)().call(this,e)}async listBuckets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(()=>super.listBuckets)().call(this,e)}async deleteBucket(e){return(()=>super.deleteBucket)().call(this,e)}},Er=class extends _r{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){return(()=>super.createIndex)().call(this,Ht(Ht({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(()=>super.listIndexes)().call(this,Ht(Ht({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return(()=>super.getIndex)().call(this,this.vectorBucketName,e)}async deleteIndex(e){return(()=>super.deleteIndex)().call(this,this.vectorBucketName,e)}index(e){return new Cr(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Cr=class extends kr{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=this;return(()=>super.putVectors)().call(t,Ht(Ht({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(e){var t=this;return(()=>super.getVectors)().call(t,Ht(Ht({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=this;return(()=>super.listVectors)().call(t,Ht(Ht({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(e){var t=this;return(()=>super.queryVectors)().call(t,Ht(Ht({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(e){var t=this;return(()=>super.deleteVectors)().call(t,Ht(Ht({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Nr=class extends ur{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ir(this.url,this.headers,e,this.fetch)}get vectors(){return new jr(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new dr(this.url+"/iceberg",this.headers,this.fetch)}};const Tr="2.89.0",Or=3e4,Rr=9e4,Ar={"X-Client-Info":"gotrue-js/".concat(Tr)},Ir="X-Supabase-Api-Version",Pr={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Lr=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class qr extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function zr(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Ur extends qr{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Dr extends qr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Fr extends qr{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class Mr extends Fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Br extends Fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wr extends Fr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vr extends Fr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qr extends Fr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kr extends Fr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Hr extends Fr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Gr(e){return zr(e)&&"AuthRetryableFetchError"===e.name}class Jr extends Fr{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class $r extends Fr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xr=" \t\n\r=".split(""),Zr=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xr.length;t+=1)e[Xr[t].charCodeAt(0)]=-2;for(let t=0;t<Yr.length;t+=1)e[Yr[t].charCodeAt(0)]=t;return e})();function en(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Yr[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Yr[e]),t.queuedBits-=6}}function tn(e,t,r){const n=Zr[e];if(!(n>-1)){if(-2===n)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function rn(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let o=0;o<e.length;o+=1)tn(e.charCodeAt(o),a,s);return t.join("")}function nn(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function an(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}nn(n,t)}}function sn(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)tn(e.charCodeAt(a),r,n);return new Uint8Array(t)}function on(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>en(e,r,n)),en(null,r,n),t.join("")}const ln=()=>"undefined"!==typeof window&&"undefined"!==typeof document,cn={tested:!1,writable:!1},un=()=>{if(!ln())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(rs){return!1}if(cn.tested)return cn.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cn.tested=!0,cn.writable=!0}catch(rs){cn.tested=!0,cn.writable=!1}return cn.writable};const dn=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},hn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},fn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},pn=async(e,t)=>{await e.removeItem(t)};class mn{constructor(){this.promise=new mn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function gn(e){const t=e.split(".");if(3!==t.length)throw new $r("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Lr.test(t[r]))throw new $r("JWT not in base64url format");return{header:JSON.parse(rn(t[0])),payload:JSON.parse(rn(t[1])),signature:sn(t[2]),raw:{header:t[0],payload:t[1]}}}function vn(e){return("0"+e.toString(16)).substr(-2)}async function bn(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,vn).join("")}();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await hn(e,"".concat(t,"-code-verifier"),a);const s=await bn(n);return[s,n===s?"plain":"s256"]}mn.promiseConstructor=Promise;const wn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Sn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _n(e){if(!Sn.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kn(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function xn(e){return JSON.parse(JSON.stringify(e))}const jn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),En=[502,503,504];async function Cn(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Hr(jn(e),0);if(En.includes(e.status))throw new Hr(jn(e),e.status);let n,a;try{n=await e.json()}catch(rs){throw new Dr(jn(rs),rs)}const s=function(e){const t=e.headers.get(Ir);if(!t)return null;if(!t.match(wn))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(rs){return null}}(e);if(s&&s.getTime()>=Pr.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?a=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(a=n.error_code),a){if("weak_password"===a)throw new Jr(jn(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Mr}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Jr(jn(n),e.status,n.weak_password.reasons);throw new Ur(jn(n),e.status||500,a)}async function Nn(e,t,r,n){var a;const s=Object.assign({},null===n||void 0===n?void 0:n.headers);s[Ir]||(s[Ir]=Pr.name),(null===n||void 0===n?void 0:n.jwt)&&(s.Authorization="Bearer ".concat(n.jwt));const o=null!==(a=null===n||void 0===n?void 0:n.query)&&void 0!==a?a:{};(null===n||void 0===n?void 0:n.redirectTo)&&(o.redirect_to=n.redirectTo);const i=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,r,n,a,s){const o=((e,t,r,n)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))})(t,n,a,s);let i;try{i=await e(r,Object.assign({},o))}catch(rs){throw console.error(rs),new Hr(jn(rs),0)}i.ok||await Cn(i);if(null===n||void 0===n?void 0:n.noResolveJson)return i;try{return await i.json()}catch(rs){await Cn(rs)}}(e,t,r+i,{headers:s,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function Tn(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function On(e){const t=Tn(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Rn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function An(e){return{data:e,error:null}}function In(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,o=Ne(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},user:Object.assign({},o)},error:null}}function Pn(e){return e}const Ln=["global","local","others"];class qn{constructor(e){let{url:t="",headers:r={},fetch:n}=e;this.url=t,this.headers=r,this.fetch=dn(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln[0];if(Ln.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Ln.join(", ")));try{return await Nn(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(zr(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Nn(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Rn})}catch(r){if(zr(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Ne(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null===r||void 0===r?void 0:r.newEmail,delete n.newEmail),await Nn(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:n,headers:this.headers,xform:In,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(zr(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Nn(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Rn})}catch(t){if(zr(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,a,s,o,i;try{const l={nextPage:null,lastPage:0,total:0},c=await Nn(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:Pn});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(i=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==i?i:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(zr(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){_n(e);try{return await Nn(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Rn})}catch(t){if(zr(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){_n(e);try{return await Nn(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Rn})}catch(r){if(zr(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_n(e);try{return await Nn(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Rn})}catch(r){if(zr(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_n(e.userId);try{const{data:t,error:r}=await Nn(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(zr(t))return{data:null,error:t};throw t}}async _deleteFactor(e){_n(e.userId),_n(e.id);try{return{data:await Nn(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(zr(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,a,s,o,i;try{const l={nextPage:null,lastPage:0,total:0},c=await Nn(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(a=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==a?a:""},xform:Pn});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(i=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==i?i:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(zr(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Nn(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(zr(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Nn(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(zr(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Nn(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(zr(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Nn(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(zr(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Nn(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(zr(t))return{data:null,error:t};throw t}}}function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Un=!!(globalThis&&un()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Dn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Fn extends Dn{}async function Mn(e,t,r){Un&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Un&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw Un&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Fn('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Un)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(rs){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",rs)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Un&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Un&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}function Bn(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function Wn(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Vn extends Error{constructor(e){let{message:t,code:r,cause:n,name:a}=e;var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(s=null!==a&&void 0!==a?a:n instanceof Error?n.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=r}}class Qn extends Vn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Kn(e){let{error:t,options:r}=e;var n,a,s;const{publicKey:o}=r;if(!o)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(r.signal instanceof AbortSignal)return new Vn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(n=o.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new Vn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===r.mediation&&"required"===(null===(a=o.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new Vn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(s=o.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new Vn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new Vn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new Vn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===o.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Vn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Vn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!Zn(e))return new Vn({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(o.rp.id!==e)return new Vn({message:'The RP ID "'.concat(o.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Vn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new Vn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Vn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Hn(e){let{error:t,options:r}=e;const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(r.signal instanceof AbortSignal)return new Vn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new Vn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!Zn(e))return new Vn({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(n.rpId!==e)return new Vn({message:'The RP ID "'.concat(n.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new Vn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Vn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const Gn=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Jn(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Ne(e,["challenge","user","excludeCredentials"]),s=sn(t).buffer,o=Object.assign(Object.assign({},r),{id:sn(r.id).buffer}),i=Object.assign(Object.assign({},a),{challenge:s,user:o});if(n&&n.length>0){i.excludeCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];i.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:sn(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return i}function $n(e){if(!e)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Ne(e,["challenge","allowCredentials"]),a=sn(t).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:sn(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function Yn(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:on(new Uint8Array(e.response.attestationObject)),clientDataJSON:on(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Xn(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:on(new Uint8Array(a.authenticatorData)),clientDataJSON:on(new Uint8Array(a.clientDataJSON)),signature:on(new Uint8Array(a.signature)),userHandle:a.userHandle?on(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Zn(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function ea(){var e,t;return!!(ln()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const ta={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ra={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function na(){const e=e=>null!==e&&"object"===typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];for(const o of a)if(o)for(const n in o){const a=o[n];if(void 0!==a)if(Array.isArray(a))r[n]=a;else if(t(a))r[n]=a;else if(e(a)){const t=r[n];e(t)?r[n]=na(t,a):r[n]=na(a)}else r[n]=a}return r}class aa{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){let{factorId:r,webauthn:n,friendlyName:a,signal:s}=e;try{const{data:e,error:o}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!e)return{data:null,error:o};const i=null!==s&&void 0!==s?s:Gn.createNewAbortSignal();if("create"===e.webauthn.type){const{user:t}=e.webauthn.credential_options.publicKey;t.name||(t.name="".concat(t.id,":").concat(a)),t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{const n=function(e,t){return na(ta,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.create),{data:a,error:s}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qn("Browser returned unexpected credential type",t)}:{data:null,error:new Qn("Empty credential response",t)}}catch(t){return{data:null,error:Kn({error:t,options:e})}}}({publicKey:n,signal:i});return a?{data:{factorId:r,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:s}}case"request":{const n=function(e,t){return na(ra,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.request),{data:a,error:s}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qn("Browser returned unexpected credential type",t)}:{data:null,error:new Qn("Empty credential response",t)}}catch(t){return{data:null,error:Hn({error:t,options:e})}}}(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:n,signal:i}));return a?{data:{factorId:r,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:s}}}}catch(o){return zr(o)?{data:null,error:o}:{data:null,error:new Dr("Unexpected error in challenge",o)}}}async _verify(e){let{challengeId:t,factorId:r,webauthn:n}=e;return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate(e,t){let{factorId:r,webauthn:{rpId:n=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:s}={}}=e;if(!n)return{data:null,error:new qr("rpId is required for WebAuthn authentication")};try{if(!ea())return{data:null,error:new Dr("Browser does not support WebAuthn",null)};const{data:e,error:o}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:a},signal:s},{request:t});if(!e)return{data:null,error:o};const{webauthn:i}=e;return this._verify({factorId:r,challengeId:e.challengeId,webauthn:{type:i.type,rpId:n,rpOrigins:a,credential_response:i.credential_response}})}catch(o){return zr(o)?{data:null,error:o}:{data:null,error:new Dr("Unexpected error in authenticate",o)}}}async _register(e,t){let{friendlyName:r,webauthn:{rpId:n=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:s}={}}=e;if(!n)return{data:null,error:new qr("rpId is required for WebAuthn registration")};try{if(!ea())return{data:null,error:new Dr("Browser does not support WebAuthn",null)};const{data:e,error:o}=await this._enroll({friendlyName:r});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===r&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null===e||void 0===e?void 0:e.id}):void 0),{data:null,error:o};const{data:i,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:s},{create:t});return i?this._verify({factorId:e.id,challengeId:i.challengeId,webauthn:{rpId:n,rpOrigins:a,type:i.webauthn.type,credential_response:i.webauthn.credential_response}}):{data:null,error:l}}catch(o){return zr(o)?{data:null,error:o}:{data:null,error:new Dr("Unexpected error in register",o)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(rs){"undefined"!==typeof self&&(self.globalThis=self)}}();const sa={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ar,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function oa(e,t,r){return await r()}const ia={};class la{get jwks(){var e,t;return null!==(t=null===(e=ia[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){ia[this.storageKey]=Object.assign(Object.assign({},ia[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=ia[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ia[this.storageKey]=Object.assign(Object.assign({},ia[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},sa),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(t=la.nextInstanceID[this.storageKey])&&void 0!==t?t:0,la.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"===typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&ln()){const e="".concat(this._logPrefix()," Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new qn({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=dn(a.fetch),this.lock=a.lock||oa,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&ln()&&(null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===r?void 0:r.locks)?this.lock=Mn:this.lock=oa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new aa(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:un()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zn(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=zn(this.memoryStorage)),ln()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(rs){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",rs)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return"GoTrueClient@"+"".concat(this.storageKey,":").concat(this.instanceID," (").concat(Tr,") ").concat((new Date).toISOString())}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger(this._logPrefix(),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(ln()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(rs){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),ln()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return zr(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return zr(t)?this._returnResult({error:t}):this._returnResult({error:new Dr("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const a=await Nn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:Tn}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const i=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",i)),this._returnResult({data:{user:l,session:i},error:null})}catch(a){if(zr(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,r,n;try{let a;if("email"in e){const{email:r,password:n,options:s}=e;let o=null,i=null;"pkce"===this.flowType&&([o,i]=await yn(this.storage,this.storageKey)),a=await Nn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:o,code_challenge_method:i},xform:Tn})}else{if(!("phone"in e))throw new Wr("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:o}=e;a=await Nn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null===o||void 0===o?void 0:o.data)&&void 0!==r?r:{},channel:null!==(n=null===o||void 0===o?void 0:o.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:Tn})}}const{data:s,error:o}=a;if(o||!s)return await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),this._returnResult({data:{user:null,session:null},error:o});const i=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",i)),this._returnResult({data:{user:l,session:i},error:null})}catch(a){if(await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),zr(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:a}=e;t=await Nn(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:On})}else{if(!("phone"in e))throw new Wr("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:a}=e;t=await Nn(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:On})}}const{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const e=new Br;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(zr(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,r,n,a,s,o,i,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:p,options:m}=e;let g;if(ln())if("object"===typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!==typeof d||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const v=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href),b=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!b||0===b.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const y=Bn(b[0]);let w=null===(r=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!w){const e=await g.request({method:"eth_chainId"});w=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:o,notBefore:i,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(r));if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(o));if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(h));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const f=Bn(e.address),p=u?"".concat(u,"://").concat(n):n,m=e.statement?"".concat(e.statement,"\n"):"",g="".concat(p," wants you to sign in with your Ethereum account:\n").concat(f,"\n\n").concat(m);let v="URI: ".concat(d,"\nVersion: ").concat(h,"\nChain ID: ").concat(r).concat(o?"\nNonce: ".concat(o):"","\nIssued At: ").concat(s.toISOString());if(a&&(v+="\nExpiration Time: ".concat(a.toISOString())),i&&(v+="\nNot Before: ".concat(i.toISOString())),l&&(v+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}v+=e}return"".concat(g,"\n").concat(v)}({domain:v.host,address:y,statement:p,uri:v.href,version:"1",chainId:w,nonce:null===(n=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(s=null===(a=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(o=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.expirationTime,notBefore:null===(i=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.notBefore,requestId:null===(l=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[Wn(h),y]})}try{const{data:t,error:r}=await Nn(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Tn});if(r)throw r;if(!t||!t.session||!t.user){const e=new Br;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(p){if(zr(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,r,n,a,s,o,i,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let v;if(ln())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const b=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(b.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(b.href),"Issued At: ".concat(null!==(n=null===(r=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Nn(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:on(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Tn});if(r)throw r;if(!t||!t.session||!t.user){const e=new Br;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(m){if(zr(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await fn(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,n]=(null!==t&&void 0!==t?t:"").split("/");try{if(!r&&"pkce"===this.flowType)throw new Kr;const{data:t,error:a}=await Nn(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Tn});if(await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;if(!t||!t.session||!t.user){const e=new Br;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:a})}catch(a){if(await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),zr(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:a,nonce:s}=e,o=await Nn(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:n,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Tn}),{data:i,error:l}=o;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!i||!i.session||!i.user){const e=new Br;return this._returnResult({data:{user:null,session:null},error:e})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:i,error:l})}catch(t){if(zr(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,n,a,s;try{if("email"in e){const{email:n,options:a}=e;let s=null,o=null;"pkce"===this.flowType&&([s,o]=await yn(this.storage,this.storageKey));const{error:i}=await Nn(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:n,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(r=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:o},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}if("phone"in e){const{phone:t,options:r}=e,{data:o,error:i}=await Nn(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(a=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(s=null===r||void 0===r?void 0:r.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:i})}throw new Wr("You must provide either an email or phone number.")}catch(o){if(await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),zr(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var t,r;try{let n,a;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:o}=await Nn(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Tn});if(o)throw o;if(!s){throw new Error("An error occurred on token verification.")}const i=s.session,l=s.user;return(null===i||void 0===i?void 0:i.access_token)&&(await this._saveSession(i),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",i)),this._returnResult({data:{user:l,session:i},error:null})}catch(n){if(zr(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,r,n,a,s;try{let o=null,i=null;"pkce"===this.flowType&&([o,i]=await yn(this.storage,this.storageKey));const l=await Nn(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:An});return(null===(a=l.data)||void 0===a?void 0:a.url)&&ln()&&!(null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(o){if(await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),zr(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Mr;const{error:n}=await Nn(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(zr(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:r,type:n,options:a}=e,{error:s}=await Nn(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:r,type:n,options:a}=e,{data:s,error:o}=await Nn(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:o})}throw new Wr("You must provide either an email or phone number and a type")}catch(t){if(zr(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(rs){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(rs){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await fn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Rr;if(this._debug("#__loadSession()","session has".concat(r?"":" not"," expired"),"expires_at",e.expires_at),!r){if(this.userStorage){const t=await fn(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=kn()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,n)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"===typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,n)}return t.value||"string"!==typeof r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,n)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Nn(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Rn}):await this._useSession(async e=>{var t,r,n;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Nn(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Rn}):{data:{user:null},error:new Mr}})}catch(t){if(zr(t))return function(e){return zr(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await pn(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:n,error:a}=r;if(a)throw a;if(!n.session)throw new Mr;const s=n.session;let o=null,i=null;"pkce"===this.flowType&&null!=e.email&&([o,i]=await yn(this.storage,this.storageKey));const{data:l,error:c}=await Nn(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:i}),jwt:s.access_token,xform:Rn});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),zr(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Mr;const t=Date.now()/1e3;let r=t,n=!0,a=null;const{payload:s}=gn(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(zr(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:a}=t;if(a)throw a;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Mr;const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(zr(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!ln())throw new Vr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Qr("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Vr("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qr("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:a,refresh_token:s,expires_in:o,expires_at:i,token_type:l}=e;if(!a||!o||!s||!l)throw new Vr("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(o);let d=c+u;i&&(d=parseInt(i));const h=d-c;1e3*h<=Or&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:m}=await this._getUser(a);if(m)throw m;const g={provider_token:r,provider_refresh_token:n,access_token:a,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(zr(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return"function"===typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await fn(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({error:a});const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return zr(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await pn(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:a}=t;if(a)throw a;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(a){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null;"pkce"===this.flowType&&([r,n]=await yn(this.storage,this.storageKey,!0));try{return await Nn(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),zr(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(zr(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,a,s,o;const{data:i,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Nn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==o?o:void 0})});if(n)throw n;return ln()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null})}catch(r){if(zr(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:a}}=t;if(n)throw n;const{options:s,provider:o,token:i,access_token:l,nonce:c}=e,u=await Nn(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:null!==(r=null===a||void 0===a?void 0:a.access_token)&&void 0!==r?r:void 0,body:{provider:o,id_token:i,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Tn}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new Br})}catch(n){if(await pn(this.storage,"".concat(this.storageKey,"-code-verifier")),zr(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)throw s;return await Nn(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(n=null===(r=a.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(zr(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Nn(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Tn})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&Gr(t)&&Date.now()+r-a<Or},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!n(a,null,t))return void e(t)}catch(rs){if(!n(a,rs))return void t(rs)}})()}))}catch(a){if(this._debug(t,"error",a),zr(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ln()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await fn(this.storage,this.storageKey);if(a&&this.userStorage){let t=await fn(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await hn(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:kn()}else if(a&&!a.user&&!a.user){const e=await fn(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await pn(this.storage,this.storageKey+"-user"),await hn(this.storage,this.storageKey,a)):a.user=kn()}if(this._debug(r,"session from storage",a),!this._isValidSession(a))return this._debug(r,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<Rr;if(this._debug(r,"session has".concat(s?"":" not"," expired with margin of ").concat(Rr,"s")),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Gr(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(r,"error",a),void console.error(a)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Mr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(n,"begin");try{this.refreshingDeferred=new mn;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Mr;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(a){if(this._debug(n,"error",a),zr(a)){const e={data:null,error:a};return Gr(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n="#_notifyAllSubscribers(".concat(e,")");this._debug(n,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(rs){n.push(rs)}});if(await Promise.all(a),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await pn(this.storage,"".concat(this.storageKey,"-code-verifier"));const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await hn(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=xn(e);await hn(this.storage,this.storageKey,n)}else{const e=xn(t);await hn(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await pn(this.storage,this.storageKey),await pn(this.storage,this.storageKey+"-code-verifier"),await pn(this.storage,this.storageKey+"-user"),this.userStorage&&await pn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ln()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(rs){console.error("removing visibilitychange callback failed",rs)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Or);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/Or);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(n," ticks, a tick lasts ").concat(Or,"ms, refresh threshold is ").concat(3," ticks")),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(rs){console.error("Auto refresh tick failed with error. This is likely a transient error.",rs)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(rs){if(!(rs.isAcquireTimeout||rs instanceof Dn))throw rs;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ln()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=["provider=".concat(encodeURIComponent(t))];if((null===r||void 0===r?void 0:r.redirectTo)&&n.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null===r||void 0===r?void 0:r.scopes)&&n.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){const[e,t]=await yn(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});n.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&n.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(n.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;return a?this._returnResult({data:null,error:a}):await Nn(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(zr(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:i,error:l}=await Nn(this.fetch,"POST","".concat(this.url,"/factors"),{body:o,headers:this.headers,jwt:null===(r=null===a||void 0===a?void 0:a.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===i.type&&(null===(n=null===i||void 0===i?void 0:i.totp)||void 0===n?void 0:n.qr_code)&&(i.totp.qr_code="data:image/svg+xml;utf-8,".concat(i.totp.qr_code)),this._returnResult({data:i,error:null}))})}catch(t){if(zr(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Yn(e.webauthn.credential_response):Xn(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:i}=await Nn(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:s,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return i?this._returnResult({data:null,error:i}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:i}))})}catch(t){if(zr(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=await Nn(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});if(s.error)return s;const{data:o}=s;if("webauthn"!==o.type)return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Jn(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:$n(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(zr(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null===t||void 0===t?void 0:t.factors)&&void 0!==e?e:[])n.all.push(a),"verified"===a.status&&n[a.factor_type].push(a);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=gn(r.access_token);let s=null;a.aal&&(s=a.aal);let o=s;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(o="aal2");return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Nn(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(e),{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Mr})})}catch(t){if(zr(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new Mr});const s=await Nn(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&ln()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(zr(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new Mr});const s=await Nn(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&ln()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(zr(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await Nn(this.fetch,"GET","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Mr})})}catch(e){if(zr(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?(await Nn(this.fetch,"DELETE","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Mr})})}catch(t){if(zr(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const r=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>r)return t;const{data:n,error:a}=await Nn(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return n.keys&&0!==n.keys.length?(this.jwks=n,this.jwks_cached_at=r,t=n.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:n,payload:a,signature:s,raw:{header:o,payload:i}}=gn(r);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:a,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,s,function(e){const t=[];return an(e,e=>t.push(e)),new Uint8Array(t)}("".concat(o,".").concat(i))))throw new $r("Invalid JWT signature");return{data:{claims:a,header:n,signature:s},error:null}}catch(r){if(zr(r))return this._returnResult({data:null,error:r});throw r}}}la.nextInstanceID={};const ca=la;let ua="";ua="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const da={headers:{"X-Client-Info":"supabase-js-".concat(ua,"/").concat("2.89.0")}},ha={schema:"public"},fa={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pa={};function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e){var t=function(e,t){if("object"!=ma(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ma(t)?t:t+""}function va(e,t,r){return(t=ga(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ba(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(r),!0).forEach(function(t){va(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ba(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const wa=(e,t,r)=>{const n=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(r),a=Headers;return async(r,s)=>{var o;const i=null!==(o=await t())&&void 0!==o?o:e;let l=new a(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(i)),n(r,ya(ya({},s),{},{headers:l}))}};var Sa=class extends ca{constructor(e){super(e)}},_a=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const s=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o="sb-".concat(s.hostname.split(".")[0],"-auth-token"),i=function(e,t){var r,n;const{db:a,auth:s,realtime:o,global:i}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:ya(ya({},l),a),auth:ya(ya({},c),s),realtime:ya(ya({},u),o),storage:{},global:ya(ya(ya({},d),i),{},{headers:ya(ya({},null!==(r=null===d||void 0===d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null===i||void 0===i?void 0:i.headers)&&void 0!==n?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==r&&void 0!==r?r:{},{db:ha,realtime:pa,auth:ya(ya({},fa),{},{storageKey:o}),global:da});var l;(this.storageKey=null!==(n=i.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(a=i.global.headers)&&void 0!==a?a:{},i.accessToken)?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(l=i.auth)&&void 0!==l?l:{},this.headers,i.global.fetch);this.fetch=wa(t,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(ya({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new Be(new URL("rest/v1",s).href,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),this.storage=new Nr(this.storageUrl.href,this.headers,this.fetch,null===r||void 0===r?void 0:r.storage),i.accessToken||this._listenForAuthEvents()}get functions(){return new Le(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t,r=this;if(r.accessToken)return await r.accessToken();const{data:n}=await r.auth.getSession();return null!==(e=null===(t=n.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:r.supabaseKey}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:o,userStorage:i,storageKey:l,flowType:c,lock:u,debug:d,throwOnError:h}=e;const f={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Sa({url:this.authUrl.href,headers:ya(ya({},f),t),storageKey:l,autoRefreshToken:n,persistSession:a,detectSessionInUrl:s,storage:o,userStorage:i,flowType:c,lock:u,debug:d,throwOnError:h,fetch:r,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new xt(this.realtimeUrl.href,ya(ya({},e),{},{params:ya(ya({},{apikey:this.supabaseKey}),null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}};(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ka="https://autzgrrevjmckxbydahx.supabase.co",xa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF1dHpncnJldmptY2t4YnlkYWh4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0NDg4ODcsImV4cCI6MjA4MzAyNDg4N30.Y1Yyc2DGLy6gLvvRBEcfRpThG9xHALN0G725YDNW1BA";xa||(console.error("\u26a0\ufe0f Vari\xe1veis de ambiente do Supabase n\xe3o configuradas!"),console.error("Verifique se REACT_APP_SUPABASE_URL e REACT_APP_SUPABASE_ANON_KEY est\xe3o no arquivo .env")),(xa.startsWith("sb_secret_")||xa.includes("service_role"))&&(console.error("\u274c ERRO CR\xcdTICO: Voc\xea est\xe1 usando a SERVICE_ROLE KEY (chave secreta)!"),console.error("\u274c Esta chave N\xc3O pode ser usada no navegador!"),console.error("\u2705 Solu\xe7\xe3o: Use a ANON KEY (chave p\xfablica) no arquivo .env"),console.error("\ud83d\udcd6 Veja o arquivo CORRIGIR_CHAVE_SUPABASE.md para instru\xe7\xf5es"),console.error('\ud83d\udd17 Acesse: Settings \u2192 API no Supabase e copie a chave "anon" (n\xe3o a "service_role")'));const ja=((e,t,r)=>new _a(e,t,r))(ka,xa,{auth:{persistSession:!1}});var Ea=r(579);const Ca=(0,a.createContext)(void 0);function Na(e){let{children:t}=e;const[r,n]=(0,a.useState)(()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null});(0,a.useEffect)(()=>{(async()=>{const e=localStorage.getItem("user");if(e)try{const t=JSON.parse(e);if(null===t||void 0===t||!t.id)return;const{data:r,error:a}=await ja.from("users").select("*").eq("id",t.id).maybeSingle();if(a)return console.error("Erro ao carregar usu\xe1rio:",a),localStorage.removeItem("user"),void n(null);if(r){const e=r,t={id:e.id,username:e.username,password:e.password,role:e.role,avatar:e.avatar||void 0};n(t),localStorage.setItem("user",JSON.stringify(t))}else localStorage.removeItem("user"),n(null)}catch(t){console.error("Erro ao carregar usu\xe1rio:",t),localStorage.removeItem("user"),n(null)}})()},[]);return(0,Ea.jsx)(Ca.Provider,{value:{user:r,login:async(e,t)=>{try{console.log("\ud83d\udd10 Tentando fazer login:",e),console.log("\ud83d\udd11 Senha fornecida:",t.substring(0,2)+"***"),console.log("\ud83d\udd0d Buscando usu\xe1rio no banco...");const{data:o,error:i}=await ja.from("users").select("*").eq("username",e).eq("password",t).maybeSingle();var r,a;if(i)return console.error("\u274c Erro na query de login:",i),console.error("Detalhes do erro:",{code:i.code,message:i.message,details:i.details,hint:i.hint}),("42501"===i.code||null!==(r=i.message)&&void 0!==r&&r.includes("permission")||null!==(a=i.message)&&void 0!==a&&a.includes("policy"))&&(console.error("\ud83d\udd12 PROBLEMA: Pol\xedtica RLS bloqueando leitura!"),console.error("\ud83d\udca1 Solu\xe7\xe3o: Execute supabase_fix_rls.sql no Supabase")),!1;if(!o){console.log("\u274c Usu\xe1rio n\xe3o encontrado ou senha incorreta");const{data:t}=await ja.from("users").select("username").eq("username",e).limit(1);return t&&t.length>0?console.log("\u26a0\ufe0f Usu\xe1rio existe mas senha est\xe1 incorreta"):(console.log("\u26a0\ufe0f Usu\xe1rio n\xe3o existe no banco"),console.log("\ud83d\udca1 Solu\xe7\xe3o: Execute supabase_fix_login.sql no Supabase para criar usu\xe1rios padr\xe3o")),!1}const l=o;console.log("\u2705 Login bem-sucedido!",{id:l.id,username:l.username,role:l.role});const c={id:l.id,username:l.username,password:l.password,role:l.role,avatar:l.avatar||void 0};n(c),localStorage.setItem("user",JSON.stringify(c));try{const e={user_id:c.id,username:c.username,login_time:(new Date).toISOString(),is_active:!0},{error:t}=await ja.from("user_sessions").insert(e);t&&console.error("Erro ao salvar sess\xe3o:",t)}catch(s){console.error("Erro ao criar sess\xe3o:",s)}return!0}catch(o){return console.error("Erro no login:",o),!1}},register:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"aluno";try{if(console.log("\ud83d\udcdd Tentando cadastrar usu\xe1rio:",e),e.length<3)return console.log("\u274c Valida\xe7\xe3o falhou: username muito curto"),{success:!1,message:"Usu\xe1rio deve ter pelo menos 3 caracteres"};if(t.length<6)return console.log("\u274c Valida\xe7\xe3o falhou: senha muito curta"),{success:!1,message:"Senha deve ter pelo menos 6 caracteres"};console.log("\u2705 Valida\xe7\xf5es passaram"),console.log("\ud83d\udd0d Verificando se usu\xe1rio j\xe1 existe...");const{data:u,error:d}=await ja.from("users").select("id, username").eq("username",e).limit(1);var n;if(d)if(console.error("\u274c Erro ao verificar usu\xe1rio:",d),console.error("Detalhes:",{code:d.code,message:d.message,details:d.details,hint:d.hint}),"42501"===d.code||null!==(n=d.message)&&void 0!==n&&n.includes("permission"))return{success:!1,message:"Erro de permiss\xe3o. Verifique as pol\xedticas RLS no Supabase."};if(u&&u.length>0){const e=u[0];return console.log("\u274c Usu\xe1rio j\xe1 existe:",e.username),{success:!1,message:"Usu\xe1rio j\xe1 existe"}}console.log("\u2705 Usu\xe1rio n\xe3o existe, prosseguindo com cadastro...");const h={username:e,password:t,role:r};console.log("\ud83d\udcbe Tentando inserir usu\xe1rio no banco..."),console.log("\ud83d\udce4 Dados a inserir:",{username:e,role:r,password:"***"});const{data:f,error:p}=await ja.from("users").insert(h).select().maybeSingle();var a,s,o,i,l,c;if(p)return console.error("\u274c Erro ao criar usu\xe1rio:",p),console.error("Detalhes do erro:",{code:p.code,message:p.message,details:p.details,hint:p.hint}),"23505"===p.code||null!==(a=p.message)&&void 0!==a&&a.includes("duplicate")||null!==(s=p.message)&&void 0!==s&&s.includes("unique")?(console.log("\u26a0\ufe0f Usu\xe1rio j\xe1 existe no banco"),{success:!1,message:"Usu\xe1rio j\xe1 existe"}):"42501"===p.code||null!==(o=p.message)&&void 0!==o&&o.includes("permission")||null!==(i=p.message)&&void 0!==i&&i.includes("policy")?(console.error("\ud83d\udd12 ERRO CR\xcdTICO: Pol\xedtica RLS bloqueando inser\xe7\xe3o!"),console.error("\ud83d\udca1 Solu\xe7\xe3o: Execute o script supabase_fix_rls.sql no Supabase"),console.error("\ud83d\udcd6 Veja TROUBLESHOOTING_PRODUCAO.md para mais detalhes"),{success:!1,message:"Erro de permiss\xe3o. Execute o script supabase_fix_rls.sql no Supabase para corrigir as pol\xedticas RLS."}):"PGRST301"===p.code||null!==(l=p.message)&&void 0!==l&&l.includes("JWT")||null!==(c=p.message)&&void 0!==c&&c.includes("secret")?(console.error("\ud83d\udd12 ERRO CR\xcdTICO: Problema de autentica\xe7\xe3o JWT!"),console.error("\ud83d\udca1 Solu\xe7\xe3o: Verifique as vari\xe1veis de ambiente no Vercel"),console.error("\ud83d\udcd6 Veja TROUBLESHOOTING_PRODUCAO.md para mais detalhes"),{success:!1,message:"Erro de autentica\xe7\xe3o. Verifique as vari\xe1veis de ambiente no Vercel e fa\xe7a um novo deploy."}):(console.error("\u274c Erro desconhecido ao criar usu\xe1rio"),{success:!1,message:"Erro ao criar usu\xe1rio: ".concat(p.message||"Tente novamente")});if(!f){console.error("\u274c Usu\xe1rio n\xe3o foi criado (sem dados retornados)"),console.error("\ud83d\udca1 Isso pode indicar que:"),console.error("   1. A inser\xe7\xe3o foi bloqueada silenciosamente"),console.error("   2. As pol\xedticas RLS n\xe3o permitem retornar dados"),console.error("   3. H\xe1 um problema com a query SELECT ap\xf3s INSERT"),console.log("\ud83d\udd0d Verificando se o usu\xe1rio foi criado mesmo sem retorno...");const{data:t}=await ja.from("users").select("id, username, role").eq("username",e).maybeSingle();return t?(console.log("\u2705 Usu\xe1rio FOI criado! Mas n\xe3o foi retornado pela query INSERT"),console.log("\ud83d\udccb Dados do usu\xe1rio:",t),{success:!0,message:"Cadastro realizado com sucesso!"}):(console.error("\u274c Usu\xe1rio realmente N\xc3O foi criado no banco"),{success:!1,message:"Erro ao criar usu\xe1rio. Nenhum dado retornado do banco."})}const m=f;console.log("\u2705 Usu\xe1rio cadastrado com sucesso!",{id:m.id,username:m.username,role:m.role,created_at:m.created_at}),console.log("\ud83d\udd0d Verifica\xe7\xe3o adicional: confirmando que usu\xe1rio existe no banco...");const{data:g}=await ja.from("users").select("id, username").eq("id",m.id).maybeSingle();return g?console.log("\u2705 Confirma\xe7\xe3o: Usu\xe1rio existe no banco de dados"):console.error("\u26a0\ufe0f AVISO: Usu\xe1rio n\xe3o encontrado na verifica\xe7\xe3o adicional!"),{success:!0,message:"Cadastro realizado com sucesso!"}}catch(u){return console.error("\u274c Erro no registro:",u),console.error("Stack trace:",u.stack),{success:!1,message:"Erro ao criar usu\xe1rio: ".concat(u.message||"Tente novamente")}}},logout:async()=>{const e=r;if(n(null),localStorage.removeItem("user"),e)try{const t={is_active:!1,logout_time:(new Date).toISOString()};await ja.from("user_sessions").update(t).eq("user_id",e.id).eq("is_active",!0)}catch(t){console.error("Erro ao atualizar sess\xe3o:",t)}},refreshUser:async()=>{const e=r;if(null!==e&&void 0!==e&&e.id)try{const{data:t,error:r}=await ja.from("users").select("*").eq("id",e.id).maybeSingle();if(r)return void console.error("\u274c Erro ao atualizar usu\xe1rio:",r);if(t){const{data:r}=await ja.from("user_profiles").select("uploaded_image, avatar").eq("user_id",e.id).maybeSingle(),a=r,s=t,o=(null===a||void 0===a?void 0:a.uploaded_image)||(null===a||void 0===a?void 0:a.avatar)||s.avatar||void 0,i={id:s.id,username:s.username,password:s.password,role:s.role,avatar:o};n(i),localStorage.setItem("user",JSON.stringify(i)),console.log("\u2705 Usu\xe1rio atualizado com sucesso")}}catch(t){console.error("\u274c Erro ao atualizar usu\xe1rio:",t)}},isAuthenticated:!!r},children:t})}function Ta(){const e=(0,a.useContext)(Ca);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const Oa=[{id:"1",name:"Matem\xe1tica",description:"Quest\xf5es de matem\xe1tica"},{id:"2",name:"Portugu\xeas",description:"Quest\xf5es de portugu\xeas"},{id:"3",name:"Hist\xf3ria",description:"Quest\xf5es de hist\xf3ria"},{id:"4",name:"Geografia",description:"Quest\xf5es de geografia"},{id:"5",name:"Ci\xeancias",description:"Quest\xf5es de ci\xeancias"},{id:"6",name:"Ingl\xeas",description:"Quest\xf5es de ingl\xeas"},{id:"7",name:"F\xedsica",description:"Quest\xf5es de f\xedsica"},{id:"8",name:"Qu\xedmica",description:"Quest\xf5es de qu\xedmica"}],Ra=[{id:"1",subjectId:"1",question:"Quanto \xe9 2 + 2?",options:["3","4","5","6"],correctAnswer:1,funFact:"O n\xfamero 4 \xe9 considerado um n\xfamero perfeito em v\xe1rias culturas e aparece frequentemente na natureza, como nas 4 esta\xe7\xf5es do ano e nos 4 pontos cardeais."},{id:"2",subjectId:"1",question:"Quanto \xe9 5 \xd7 3?",options:["10","15","20","25"],correctAnswer:1,funFact:"A multiplica\xe7\xe3o \xe9 uma forma r\xe1pida de fazer adi\xe7\xf5es repetidas. 5 \xd7 3 \xe9 o mesmo que 5 + 5 + 5. A tabuada foi criada para facilitar c\xe1lculos mentais!"},{id:"100",subjectId:"2",question:'Qual \xe9 a locu\xe7\xe3o adjetiva na frase: "A casa de pedra \xe9 antiga"?',options:["casa antiga","de pedra","\xe9 antiga","a casa"],correctAnswer:1,funFact:"Locu\xe7\xe3o adjetiva \xe9 uma express\xe3o formada por preposi\xe7\xe3o + substantivo que funciona como adjetivo."},{id:"101",subjectId:"2",question:"Qual alternativa cont\xe9m uma locu\xe7\xe3o adjetiva?",options:["casa bonita","cachorro feroz","p\xe1ssaro cantador","copo de vidro"],correctAnswer:3,funFact:"Locu\xe7\xf5es adjetivas s\xe3o muito usadas no dia a dia para descrever caracter\xedsticas dos objetos."},{id:"102",subjectId:"2",question:'Qual \xe9 o adjetivo correspondente \xe0 locu\xe7\xe3o "de ouro"?',options:["dourado","prateado","bronzeado","prateado"],correctAnswer:0,funFact:"Muitas joias s\xe3o feitas de ouro, que \xe9 um metal precioso."},{id:"103",subjectId:"2",question:'Qual \xe9 a locu\xe7\xe3o adjetiva que equivale a "ferrovi\xe1rio"?',options:["de trem","de ferro","de estrada","de carro"],correctAnswer:0,funFact:"As primeiras estradas de ferro no Brasil foram constru\xeddas no s\xe9culo XIX."},{id:"104",subjectId:"2",question:"Qual alternativa N\xc3O cont\xe9m uma locu\xe7\xe3o adjetiva?",options:["copo de pl\xe1stico","cadeira de madeira","casa bonita","anel de prata"],correctAnswer:2,funFact:"As locu\xe7\xf5es adjetivas geralmente s\xe3o formadas por preposi\xe7\xe3o + substantivo."},{id:"105",subjectId:"2",question:'Qual palavra \xe9 um adjetivo na frase: "O gato preto pulou o muro alto"?',options:["gato","preto","pulou","muro"],correctAnswer:1,funFact:"Os adjetivos podem variar em g\xeanero (masculino/feminino) e n\xfamero (singular/plural)."},{id:"106",subjectId:"2",question:"Qual alternativa cont\xe9m apenas adjetivos?",options:["r\xe1pido, lento, feliz","correr, pular, nadar","casa, escola, parque","eu, ele, n\xf3s, voc\xeas"],correctAnswer:0,funFact:"Os adjetivos s\xe3o palavras que caracterizam os substantivos."},{id:"107",subjectId:"2",question:'Qual \xe9 o grau superlativo de "feliz"?',options:["feliz\xe3o","muito feliz","felizinho","felizardos"],correctAnswer:1,funFact:"O superlativo pode ser de superioridade (muito feliz) ou de inferioridade (pouco feliz)."},{id:"108",subjectId:"2",question:"Qual alternativa cont\xe9m um adjetivo no grau aumentativo?",options:["carr\xe3o","casinha","florzinha","livreto"],correctAnswer:0,funFact:"O aumentativo pode indicar tamanho grande ou ser usado de forma afetiva."},{id:"109",subjectId:"2",question:'Qual \xe9 o feminino de "ator"?',options:["atora","atriz","atrizes","atores"],correctAnswer:1,funFact:"Muitas profiss\xf5es t\xeam formas diferentes para o masculino e feminino em portugu\xeas."},{id:"110",subjectId:"2",question:"Qual \xe9 o adjetivo p\xe1trio de quem nasce na Fran\xe7a?",options:["franc\xeas","francense","francano","francino"],correctAnswer:0,funFact:"Os adjetivos p\xe1trios tamb\xe9m s\xe3o conhecidos como gent\xedlicos."},{id:"111",subjectId:"2",question:"Qual \xe9 o adjetivo p\xe1trio de quem nasce em Portugal?",options:["portugu\xeas","portugalense","portugal\xeas","portugano"],correctAnswer:0,funFact:"O portugu\xeas \xe9 a l\xedngua oficial de Portugal, Brasil e mais 7 pa\xedses."},{id:"112",subjectId:"2",question:"Qual \xe9 o adjetivo p\xe1trio de quem nasce no Rio de Janeiro?",options:["carioca","fluminense","rio-janeirense","rio-grandense"],correctAnswer:1,funFact:'O termo "fluminense" vem do latim "flumen", que significa rio.'},{id:"113",subjectId:"2",question:"Qual \xe9 o adjetivo p\xe1trio de quem nasce em S\xe3o Paulo (capital)?",options:["paulista","paulistano","s\xe3o-paulino","s\xe3o-paulense"],correctAnswer:1,funFact:"S\xe3o Paulo \xe9 a maior cidade do Brasil e uma das maiores do mundo!"},{id:"114",subjectId:"2",question:"Qual \xe9 o adjetivo p\xe1trio de quem nasce na Bahia?",options:["baiano","baiense","baiano/a","baianense"],correctAnswer:0,funFact:"A Bahia foi o primeiro local onde os portugueses chegaram no Brasil em 1500."},{id:"115",subjectId:"2",question:"Qual destas palavras \xe9 um substantivo sobrecomum?",options:["a crian\xe7a","o artista","a v\xedtima","o estudante"],correctAnswer:2,funFact:"Substantivos sobrecomuns t\xeam uma \xfanica forma para os dois g\xeaneros."},{id:"116",subjectId:"2",question:"Qual destas palavras \xe9 um substantivo comum de dois g\xeaneros?",options:["o artista/a artista","o/a estudante","a v\xedtima","o jacar\xe9/a jacar\xe9"],correctAnswer:1,funFact:"Muitas profiss\xf5es modernas usam substantivos comuns de dois g\xeaneros."},{id:"117",subjectId:"2",question:"Qual destas palavras \xe9 um substantivo epiceno?",options:["o aluno/a aluna","o jacar\xe9","o/a estudante","a crian\xe7a"],correctAnswer:1,funFact:'Muitos nomes de animais s\xe3o substantivos epicenos, como "a cobra" e "o tigre".'},{id:"118",subjectId:"2",question:"Qual alternativa cont\xe9m um substantivo comum de dois g\xeaneros?",options:["o menino/a menina","o int\xe9rprete/a int\xe9rprete","o le\xe3o/a leoa","o ator/a atriz"],correctAnswer:1,funFact:'Muitas profiss\xf5es terminadas em "e" s\xe3o comuns de dois g\xeaneros.'},{id:"119",subjectId:"2",question:"Qual destas palavras N\xc3O \xe9 um substantivo sobrecomum?",options:["a pessoa","o c\xf4njuge","a testemunha","o professor"],correctAnswer:3,funFact:'Substantivos sobrecomuns n\xe3o variam em g\xeanero, como "a pessoa" e "o c\xf4njuge".'},{id:"120",subjectId:"2",question:'Qual \xe9 o diminutivo de "c\xe3o"?',options:["c\xe3ozinho","c\xe3ozito","c\xe3zinho","c\xe3oz\xe3o"],correctAnswer:0,funFact:'Em portugu\xeas, os sufixos mais comuns para formar o diminutivo s\xe3o "-inho" e "-zinho".'},{id:"121",subjectId:"2",question:'Qual \xe9 o aumentativo de "casa"?',options:["cas\xe3o","casinha","casebre","casota"],correctAnswer:0,funFact:"O aumentativo pode indicar tamanho grande ou ser usado para expressar afeto ou desprezo."},{id:"122",subjectId:"2",question:"Qual destas palavras est\xe1 no grau diminutivo?",options:["carr\xe3o","livr\xe3o","florzinha","casa\xe7o"],correctAnswer:2,funFact:'O sufixo "-zinho" \xe9 o mais usado para formar diminutivos em portugu\xeas.'},{id:"123",subjectId:"2",question:'Qual \xe9 o aumentativo de "homem"?',options:["homenzarr\xe3o","homemz\xe3o","homem\xe3o","homenzarr\xe3o"],correctAnswer:0,funFact:"Algumas palavras t\xeam formas irregulares de aumentativo."},{id:"124",subjectId:"2",question:"Qual alternativa cont\xe9m um diminutivo afetivo?",options:["carr\xe3o","florzinha","casota","livr\xe3o"],correctAnswer:1,funFact:"Os diminutivos s\xe3o muito usados no portugu\xeas para expressar afeto ou diminui\xe7\xe3o de tamanho."},{id:"125",subjectId:"2",question:'Qual \xe9 o plural de "p\xe3o"?',options:["p\xe3es","p\xe3os","p\xe3oes","p\xe3os"],correctAnswer:0,funFact:'Palavras terminadas em "-\xe3o" podem formar o plural de tr\xeas maneiras: -\xe3es, -\xe3os ou -\xf5es.'},{id:"126",subjectId:"2",question:'Qual \xe9 o plural de "m\xe3o"?',options:["m\xe3os","m\xe3es","m\xf5es","m\xe3s"],correctAnswer:0,funFact:'"M\xe3o" \xe9 uma palavra que vem do latim "manus" e mant\xe9m uma forma irregular no plural.'},{id:"127",subjectId:"2",question:'Qual \xe9 o plural de "cidad\xe3o"?',options:["cidad\xe3os","cidad\xe3es","cidad\xf5es","cidad\xe3s"],correctAnswer:0,funFact:'As palavras terminadas em "-\xe3o" geralmente formam o plural com "-\xe3os", "-\xe3es" ou "-\xf5es".'},{id:"128",subjectId:"2",question:'Qual \xe9 o plural de "c\xe3o"?',options:["c\xe3es","c\xe3os","c\xe3es/c\xe3os","c\xe3s"],correctAnswer:0,funFact:'A forma "c\xe3es" \xe9 a mais comum, mas "c\xe3os" tamb\xe9m \xe9 aceita, embora menos usada.'},{id:"129",subjectId:"2",question:'Qual \xe9 o plural de "avi\xe3o"?',options:["avi\xf5es","avi\xe3es","avi\xe3os","avi\xe3s"],correctAnswer:0,funFact:'A maioria das palavras terminadas em "-\xe3o" forma o plural com "-\xf5es".'},{id:"130",subjectId:"2",question:'Qual palavra \xe9 formada pelo sufixo "-eza"?',options:["beleza","natureza","riqueza","todas as alternativas"],correctAnswer:3,funFact:'O sufixo "-eza" \xe9 usado para formar substantivos que indicam qualidade ou estado.'},{id:"131",subjectId:"2",question:'Qual palavra N\xc3O \xe9 formada pelo sufixo "-eza"?',options:["beleza","riqueza","natureza","pobreza"],correctAnswer:2,funFact:'"Natureza" n\xe3o \xe9 formada por sufixo, \xe9 uma palavra primitiva.'},{id:"132",subjectId:"2",question:'Qual palavra \xe9 formada pelo sufixo "-esa"?',options:["princesa","condessa","duquesa","todas as alternativas"],correctAnswer:3,funFact:'O sufixo "-esa" \xe9 usado para formar o feminino de algumas profiss\xf5es ou t\xedtulos nobres.'},{id:"133",subjectId:"2",question:'Qual \xe9 o feminino de "conde"?',options:["condessa","condesa","conda","condesa"],correctAnswer:0,funFact:"Algumas palavras t\xeam formas irregulares para o feminino em portugu\xeas."},{id:"134",subjectId:"2",question:"Qual destas palavras N\xc3O \xe9 formada por sufixo?",options:["beleza","pobreza","natureza","riqueza"],correctAnswer:2,funFact:"\xc9 importante distinguir entre palavras primitivas e palavras derivadas em portugu\xeas."},{id:"135",subjectId:"2",question:'Qual \xe9 o feminino de "ator"?',options:["atora","atriz","atores","atrizes"],correctAnswer:1,funFact:"Algumas profiss\xf5es t\xeam formas diferentes para o masculino e feminino em portugu\xeas."},{id:"136",subjectId:"2",question:'Qual \xe9 o masculino de "dona"?',options:["dono","dom","senhor","dono/donato"],correctAnswer:0,funFact:'"Dona" \xe9 usado como t\xedtulo de tratamento para mulheres, assim como "Dom" para homens em alguns contextos.'},{id:"137",subjectId:"2",question:"Qual destas palavras \xe9 do g\xeanero masculino?",options:["caneta","l\xe1pis","mesa","cadeira"],correctAnswer:1,funFact:"Em portugu\xeas, os substantivos podem ser masculinos ou femininos."},{id:"138",subjectId:"2",question:'Qual \xe9 o feminino de "poeta"?',options:["poetisa","poeta","poetiza","poetisa/poeta"],correctAnswer:3,funFact:"Algumas profiss\xf5es t\xeam formas espec\xedficas para o feminino, enquanto outras s\xe3o comuns de dois g\xeaneros."},{id:"139",subjectId:"2",question:"Qual destas palavras \xe9 do g\xeanero feminino?",options:["mapa","dia","foto","cinema"],correctAnswer:2,funFact:'Apesar de terminar em "o", "foto" \xe9 uma palavra feminina porque \xe9 uma abrevia\xe7\xe3o de "fotografia".'},{id:"140",subjectId:"2",question:"Qual palavra \xe9 primitiva em rela\xe7\xe3o \xe0s outras?",options:["livro","livraria","livreto","livrinho"],correctAnswer:0,funFact:"Palavras primitivas s\xe3o aquelas que n\xe3o derivam de outras palavras da l\xedngua."},{id:"141",subjectId:"2",question:'Qual palavra \xe9 derivada de "mar"?',options:["marinho","mar\xe9","mar\xedtimo","todas as alternativas"],correctAnswer:3,funFact:"Uma palavra primitiva pode dar origem a v\xe1rias palavras derivadas."},{id:"142",subjectId:"2",question:"Qual destas palavras \xe9 primitiva?",options:["casa","casebre","caseiro","casinha"],correctAnswer:0,funFact:"As palavras derivadas s\xe3o formadas a partir de palavras primitivas por meio de prefixos, sufixos ou ambos."},{id:"143",subjectId:"2",question:'Qual palavra N\xc3O \xe9 derivada de "\xe1gua"?',options:["aguaceiro","\xe1guia","aguado","aguardente"],correctAnswer:1,funFact:'Nem todas as palavras que come\xe7am com "agu" s\xe3o derivadas de "\xe1gua".'},{id:"144",subjectId:"2",question:'Qual palavra \xe9 derivada de "paz"?',options:["pazada","pazento","pazada","paz"],correctAnswer:1,funFact:'O sufixo "-ento" pode indicar posse de uma qualidade.'},{id:"145",subjectId:"2",question:'Qual \xe9 o plural de "carrinho"?',options:["carrinhos","carri\xf5es","carri\xe7os","carrinhas"],correctAnswer:0,funFact:'Os diminutivos em "-inho" formam o plural trocando o "-o" final por "-os".'},{id:"146",subjectId:"2",question:'Qual \xe9 o plural de "florzinha"?',options:["florzinhas","floreszinhas","florinhas","florzinhas"],correctAnswer:0,funFact:'Os diminutivos em "-zinha" formam o plural trocando o "-a" final por "-as".'},{id:"147",subjectId:"2",question:'Qual \xe9 o plural de "c\xe3ozinho"?',options:["c\xe3eszinhos","c\xe3zinhos","c\xe3ozinhos","c\xe3eszinhos"],correctAnswer:2,funFact:'O plural dos diminutivos em "-zinho" segue a regra geral de forma\xe7\xe3o de plural em portugu\xeas.'},{id:"148",subjectId:"2",question:'Qual \xe9 o plural de "livrinho"?',options:["livrinhos","livrozinhos","livr\xf5es","livretos"],correctAnswer:0,funFact:'O sufixo "-inho" \xe9 um dos mais produtivos na forma\xe7\xe3o de diminutivos em portugu\xeas.'},{id:"149",subjectId:"2",question:'Qual \xe9 o plural de "copinho"?',options:["copinhos","copinhas","cop\xf5es","copinhos"],correctAnswer:0,funFact:'Os diminutivos em "-inho" s\xe3o muito usados no portugu\xeas para expressar afeto ou tamanho reduzido.'},{id:"150",subjectId:"2",question:"Qual destas palavras \xe9 um substantivo composto?",options:["guarda-chuva","casa","livro","cadeira"],correctAnswer:0,funFact:"Os substantivos compostos s\xe3o formados por mais de um radical."},{id:"151",subjectId:"2",question:"Qual destas palavras \xe9 um substantivo simples?",options:["p\xe9-de-moleque","guarda-roupa","cachorro-quente","livro"],correctAnswer:3,funFact:"Substantivos simples s\xe3o formados por apenas um elemento m\xf3rfico."},{id:"152",subjectId:"2",question:"Qual destas palavras \xe9 um substantivo composto por verbo + substantivo?",options:["guarda-chuva","couve-flor","p\xe9-de-moleque","passatempo"],correctAnswer:0,funFact:"Muitos substantivos compostos em portugu\xeas s\xe3o formados por verbo + substantivo."},{id:"153",subjectId:"2",question:"Qual destas palavras \xe9 um substantivo composto por substantivo + adjetivo?",options:["couve-flor","guarda-chuva","p\xe9-de-moleque","passatempo"],correctAnswer:0,funFact:'Em "couve-flor", "flor" funciona como adjetivo, descrevendo o tipo de couve.'},{id:"154",subjectId:"2",question:"Qual destas palavras N\xc3O \xe9 um substantivo composto?",options:["guarda-chuva","p\xe9-de-moleque","livro","couve-flor"],correctAnswer:2,funFact:"Os substantivos compostos podem ser escritos com h\xedfen, juntos ou separados, dependendo da regra ortogr\xe1fica."},{id:"200",subjectId:"3",question:"O que eram as Entradas no per\xedodo colonial brasileiro?",options:["Expedi\xe7\xf5es oficiais organizadas pelo governo portugu\xeas","Festas tradicionais dos ind\xedgenas","Rituais religiosos dos bandeirantes","Tipos de embarca\xe7\xf5es usadas no litoral"],correctAnswer:0,funFact:'Voc\xea sabia que o nome "Bandeirantes" vem das bandeiras que carregavam durante as expedi\xe7\xf5es?'},{id:"201",subjectId:"3",question:"Em que data foi fundado o Col\xe9gio de Piratininga, marco da funda\xe7\xe3o de S\xe3o Paulo?",options:["25 de janeiro de 1500","25 de janeiro de 1554","7 de setembro de 1822","22 de abril de 1500"],correctAnswer:1,funFact:"O local onde foi fundado o col\xe9gio hoje \xe9 o P\xe1tio do Col\xe9gio, no centro de S\xe3o Paulo!"},{id:"202",subjectId:"3",question:"Quem foram os fundadores do Col\xe9gio de Piratininga?",options:["Padres Ant\xf4nio Vieira e Bartolomeu de Gusm\xe3o","Padres Jos\xe9 de Anchieta e Manuel da N\xf3brega","Padres Diogo Ant\xf4nio Feij\xf3 e Feij\xf3","Padres Jo\xe3o Ramalho e Leonardo Nunes"],correctAnswer:1,funFact:"Jos\xe9 de Anchieta tinha apenas 19 anos quando chegou ao Brasil e se tornou um dos fundadores de S\xe3o Paulo!"},{id:"203",subjectId:"3",question:"Qual foi o primeiro nome da cidade de S\xe3o Paulo?",options:["S\xe3o Paulo dos Campos de Piratininga","Vila de S\xe3o Paulo","S\xe3o Paulo de Piratininga","Cidade de S\xe3o Paulo"],correctAnswer:2,funFact:'O nome "Piratininga" vem do tupi e significa "peixe seco", uma refer\xeancia ao per\xedodo de seca do rio Tamanduate\xed, quando os peixes ficavam presos nas po\xe7as d\'\xe1gua!'},{id:"204",subjectId:"3",question:"O que motivava os bandeirantes em suas expedi\xe7\xf5es?",options:["Apenas a busca por ouro","Busca por ind\xedgenas, ouro e pedras preciosas","Explora\xe7\xe3o cient\xedfica do territ\xf3rio","Convers\xe3o de ind\xedgenas ao cristianismo"],correctAnswer:1,funFact:'Voc\xea sabia que o nome "Vila Rica" (atual Ouro Preto) foi dado por causa da grande quantidade de ouro encontrada na regi\xe3o?'},{id:"205",subjectId:"3",question:"O que foi a Guerra dos Emboabas (1707)?",options:["Uma batalha entre portugueses e espanh\xf3is","Um conflito entre paulistas e forasteiros pelo controle das minas","Uma revolta de escravizados","Uma disputa entre bandeirantes e jesu\xedtas"],correctAnswer:1,funFact:'A palavra "emboaba" era usada para se referir aos forasteiros e significa "ave de p\xe9s emplumados", em refer\xeancia \xe0s botas que usavam!'},{id:"206",subjectId:"3",question:"Em que ano chegaram os primeiros navios negreiros ao Brasil?",options:["1500","1532","1568","1600"],correctAnswer:2,funFact:"Voc\xea sabia que o Brasil foi o pa\xeds que mais recebeu escravizados africanos nas Am\xe9ricas? Foram cerca de 4,8 milh\xf5es de pessoas!"},{id:"207",subjectId:"3",question:"Como era a rela\xe7\xe3o entre a Casa-Grande e a Senzala?",options:["Eram constru\xe7\xf5es iguais para diferentes classes sociais","A Casa-Grande era a moradia dos senhores e a Senzala dos escravizados","Eram nomes de cidades coloniais","Eram tipos de planta\xe7\xf5es"],correctAnswer:1,funFact:'O livro "Casa-Grande & Senzala", de Gilberto Freyre, \xe9 um dos mais importantes sobre a forma\xe7\xe3o da sociedade brasileira!'},{id:"208",subjectId:"3",question:"Como os escravos africanos chegaram ao Brasil?",options:["Atrav\xe9s de navios negreiros","Por rotas terrestres da \xc1frica","Em embarca\xe7\xf5es pequenas pelo Oceano Pac\xedfico","Por meio de acordos comerciais com tribos ind\xedgenas"],correctAnswer:0,funFact:'A travessia do Atl\xe2ntico nos navios negreiros era chamada de "Travessia do Meio" e era t\xe3o terr\xedvel que muitos escravos morriam durante a viagem.'},{id:"209",subjectId:"3",question:"Qual era a principal atividade econ\xf4mica que utilizava m\xe3o de obra escrava no Brasil Colonial?",options:["Extrair borracha na Amaz\xf4nia","Fabrica\xe7\xe3o de a\xe7\xfacar nos engenhos","Cultivo de caf\xe9 no Sudeste","Minera\xe7\xe3o de diamantes"],correctAnswer:1,funFact:"Voc\xea sabia que um \xfanico engenho de a\xe7\xfacar podia ter centenas de escravos trabalhando? Era um trabalho extremamente pesado e perigoso!"},{id:"210",subjectId:"3",question:"Qual era o imposto cobrado pela Coroa Portuguesa sobre o ouro extra\xeddo?",options:["Um ter\xe7o do ouro encontrado","Um quinto do ouro encontrado","Metade do ouro encontrado","Um d\xe9cimo do ouro encontrado"],correctAnswer:1,funFact:'Voc\xea sabia que a express\xe3o "tirar o couro" vem do h\xe1bito de esconder ouro em couro de animais para fugir dos impostos?'},{id:"211",subjectId:"3",question:"O que era a Casa de Fundi\xe7\xe3o, criada em 1719?",options:["Local onde se fabricavam ferramentas para as minas","Oficina de ourivesaria","Local onde o ouro era derretido e transformado em barras para cobran\xe7a de impostos","F\xe1brica de moedas"],correctAnswer:2,funFact:"Para cada barra de ouro, uma parte era retirada como imposto e a barra recebia um selo real, comprovando o pagamento!"},{id:"212",subjectId:"3",question:'Qual foi o per\xedodo conhecido como "Ciclo do Ouro" no Brasil?',options:["1500-1600","1600-1700","1691-1800","1750-1850"],correctAnswer:2,funFact:"Nesse per\xedodo, a popula\xe7\xe3o de Minas Gerais cresceu tanto que a capital da col\xf4nia foi transferida de Salvador para o Rio de Janeiro, que estava mais pr\xf3ximo das minas!"},{id:"213",subjectId:"3",question:'O que era o "quinto" no per\xedodo do Ciclo do Ouro?',options:["Um imposto que correspondia \xe0 quinta parte de toda produ\xe7\xe3o de ouro","O nome dado aos cinco principais garimpos de ouro","A dist\xe2ncia m\xednima entre as minas de ouro","O n\xfamero de dias de trabalho obrigat\xf3rio por semana"],correctAnswer:0,funFact:"Para garantir o pagamento do quinto, foram criadas as Casas de Fundi\xe7\xe3o, onde todo o ouro em p\xf3 deveria ser transformado em barras e taxado!"},{id:"214",subjectId:"3",question:"Quem foi o l\xedder da Inconfid\xeancia Mineira?",options:["Dom Pedro I","Joaquim Jos\xe9 da Silva Xavier (Tiradentes)","Tom\xe1s Ant\xf4nio Gonzaga","Cl\xe1udio Manuel da Costa"],correctAnswer:1,funFact:"Voc\xea sabia que Tiradentes recebeu esse apelido porque tamb\xe9m trabalhava como dentista?"},{id:"215",subjectId:"3",question:"Qual era o principal objetivo da Inconfid\xeancia Mineira?",options:["Abolir a escravid\xe3o no Brasil","Proclamar a independ\xeancia de Minas Gerais","Aumentar os impostos sobre o ouro","Criar uma universidade em Vila Rica"],correctAnswer:1,funFact:'Voc\xea sabia que o lema da bandeira de Minas Gerais, "Libertas Quae Sera Tamen", foi inspirado no movimento da Inconfid\xeancia Mineira?'},{id:"216",subjectId:"3",question:"Em que ano foi criada a vila de Vila Rica, atual Ouro Preto?",options:["1701","1711","1721","1731"],correctAnswer:1,funFact:"Vila Rica foi a primeira vila criada na regi\xe3o das minas e mais tarde se tornou a capital de Minas Gerais!"},{id:"217",subjectId:"3",question:"Em que ano a capital do Brasil foi transferida de Salvador para o Rio de Janeiro?",options:["1750","1763","1775","1789"],correctAnswer:1,funFact:"O Rio de Janeiro permaneceu como capital do Brasil por quase 200 anos, at\xe9 a constru\xe7\xe3o de Bras\xedlia em 1960!"},{id:"218",subjectId:"3",question:"Quais s\xe3o considerados tr\xeas dos principais bandeirantes do per\xedodo colonial?",options:["Dom Pedro I, Dom Jo\xe3o VI e Jos\xe9 Bonif\xe1cio","Fern\xe3o Dias Paes, Borba Gato e Bartolomeu Bueno da Silva","Tiradentes, Tom\xe1s Ant\xf4nio Gonzaga e Cl\xe1udio Manuel da Costa","Anchieta, N\xf3brega e Manuel da N\xf3brega"],correctAnswer:1,funFact:'O apelido "Anhanguera" dado a Bartolomeu Bueno significa "diabo velho" em tupi, pois ele teria ateado fogo em \xe1lcool para assustar os ind\xedgenas!'},{id:"300",subjectId:"4",question:"Qual \xe9 o rio mais extenso do Brasil?",options:["Rio Amazonas","Rio S\xe3o Francisco","Rio Paran\xe1","Rio Tocantins"],correctAnswer:0,funFact:"O Rio Amazonas despeja no oceano cerca de 209 milh\xf5es de litros de \xe1gua por segundo!"},{id:"301",subjectId:"4",question:"Complete a frase: O Rio S\xe3o Francisco nasce em ______ e des\xe1gua no Oceano ______.",options:["Bahia, Atl\xe2ntico","Minas Gerais, Pac\xedfico","Minas Gerais, Atl\xe2ntico","Bahia, Pac\xedfico"],correctAnswer:2,funFact:'O Rio S\xe3o Francisco \xe9 conhecido como "rio da integra\xe7\xe3o nacional" por cortar cinco estados brasileiros!'},{id:"302",subjectId:"4",question:"Qual parte do rio \xe9 conhecida como sua nascente?",options:["Onde o rio encontra o mar","O ponto mais largo do rio","O local onde o rio come\xe7a","O trecho mais profundo do rio"],correctAnswer:2,funFact:"Algumas nascentes do Brasil t\xeam \xe1guas termais que podem chegar a 40\xb0C!"},{id:"303",subjectId:"4",question:"Qual \xe9 a maior bacia hidrogr\xe1fica do Brasil?",options:["Bacia do Rio S\xe3o Francisco","Bacia Amaz\xf4nica","Bacia do Rio Paran\xe1","Bacia do Rio Tocantins"],correctAnswer:1,funFact:"A vaz\xe3o m\xe9dia da Bacia Amaz\xf4nica \xe9 maior que a soma das vaz\xf5es dos 6 maiores rios do mundo juntos!"},{id:"304",subjectId:"4",question:"O clima tropical predomina no Brasil por causa da localiza\xe7\xe3o do pa\xeds na zona intertropical.",options:["Verdadeiro","Falso"],correctAnswer:0,funFact:"O Brasil \xe9 o \xfanico pa\xeds cortado pelo Equador e pelo Tr\xf3pico de Capric\xf3rnio!"},{id:"305",subjectId:"4",question:'Qual destes biomas \xe9 conhecido como "Savana brasileira" e possui \xe1rvores de troncos retorcidos?',options:["Mata Atl\xe2ntica","Cerrado","Caatinga","Pantanal"],correctAnswer:1,funFact:"O Cerrado \xe9 considerado a savana mais rica em biodiversidade do mundo, abrigando cerca de 5% de todas as esp\xe9cies do planeta!"},{id:"306",subjectId:"4",question:"Qual \xe9 a capital do Amazonas?",options:["Bel\xe9m","Manaus","Porto Velho","Rio Branco"],correctAnswer:1,funFact:'Manaus \xe9 chamada de "Paris dos Tr\xf3picos" por seu per\xedodo \xe1ureo durante o ciclo da borracha!'},{id:"307",subjectId:"4",question:"Qual desses parques nacionais N\xc3O est\xe1 na Regi\xe3o Norte?",options:["Parque Nacional do Ja\xfa","Parque Nacional da Chapada dos Veadeiros","Parque Nacional do Monte Roraima","Parque Nacional da Amaz\xf4nia"],correctAnswer:1,funFact:"O Parque Nacional do Ja\xfa \xe9 o maior parque de floresta tropical do mundo, com 2.367.333 hectares!"},{id:"308",subjectId:"4",question:"Qual \xe9 a diferen\xe7a entre clima e tempo?",options:["Clima \xe9 o que acontece agora e tempo \xe9 a previs\xe3o para a semana","Clima \xe9 o comportamento m\xe9dio da atmosfera em longo prazo, tempo \xe9 o estado moment\xe2neo","Tempo \xe9 o que medimos em anos e clima em dias","N\xe3o h\xe1 diferen\xe7a, os termos s\xe3o sin\xf4nimos"],correctAnswer:1,funFact:"Voc\xea sabia que o Brasil tem todos os tipos de clima do mundo, exceto o clima des\xe9rtico e o clima polar?"},{id:"309",subjectId:"4",question:"Qual caracter\xedstica \xe9 t\xedpica dos rios de planalto?",options:["Pouco aproveitamento para gera\xe7\xe3o de energia","Pouco desn\xedvel ao longo do curso","Grande potencial para navega\xe7\xe3o","Grande desn\xedvel e quedas d'\xe1gua"],correctAnswer:3,funFact:"A Usina de Itaipu, no Rio Paran\xe1, \xe9 a segunda maior usina hidrel\xe9trica do mundo em gera\xe7\xe3o de energia!"},{id:"310",subjectId:"4",question:"O que caracteriza um rio perene?",options:["Secam completamente em determinadas \xe9pocas do ano","Mant\xeam \xe1gua durante todo o ano, mesmo na esta\xe7\xe3o seca","S\xf3 possuem \xe1gua durante e logo ap\xf3s as chuvas","Mudam completamente de curso ao longo do ano"],correctAnswer:1,funFact:"O Rio Amazonas \xe9 um exemplo de rio perene, mantendo seu volume durante todo o ano!"},{id:"311",subjectId:"4",question:"O que significa o per\xedodo de vazante de um rio?",options:["Momento em que o rio atinge seu n\xedvel mais baixo","Per\xedodo em que o rio transborda suas margens","Quando o rio est\xe1 em seu n\xedvel normal","Momento em que o rio seca completamente"],correctAnswer:0,funFact:"No Rio S\xe3o Francisco, a diferen\xe7a entre o per\xedodo de cheia e vazante pode chegar a v\xe1rios metros de altura!"},{id:"312",subjectId:"4",question:"O que caracteriza um rio de regime fluvial?",options:["Seu volume \xe9 determinado pelo derretimento de geleiras","Sua vaz\xe3o \xe9 controlada por chuvas em sua bacia hidrogr\xe1fica","\xc9 alimentado principalmente por \xe1guas subterr\xe2neas","Seca completamente em determinadas \xe9pocas do ano"],correctAnswer:1,funFact:"O Rio Amazonas tem um regime fluvial complexo, com diferentes per\xedodos de cheia ao longo de seu curso!"},{id:"313",subjectId:"4",question:"O que s\xe3o rios tempor\xe1rios ou intermitentes?",options:["Rios que mudam de nome ao longo do ano","Rios que secam completamente em determinadas \xe9pocas","Rios que correm apenas em dire\xe7\xe3o ao mar","Rios que n\xe3o possuem nascente definida"],correctAnswer:1,funFact:"Muitos rios do sert\xe3o nordestino s\xe3o tempor\xe1rios, secando completamente na esta\xe7\xe3o seca!"},{id:"314",subjectId:"4",question:"O que caracteriza o per\xedodo de cheia de um rio?",options:["Quando o rio atinge seu menor volume de \xe1gua","Momento em que o rio seca completamente","Per\xedodo em que o rio atinge seu maior volume e transborda","Quando o rio muda de curso repentinamente"],correctAnswer:2,funFact:"As cheias anuais do Rio Amazonas podem alagar uma \xe1rea de at\xe9 100 km de largura em algumas regi\xf5es!"},{id:"315",subjectId:"4",question:"Qual caracter\xedstica define o clima equatorial no Brasil?",options:["Invernos frios com geadas frequentes","Temperaturas elevadas e chuvas bem distribu\xeddas o ano todo","Longos per\xedodos de estiagem e vegeta\xe7\xe3o de caatinga","Ver\xf5es quentes e invernos rigorosos com neve"],correctAnswer:1,funFact:"Na Amaz\xf4nia, a umidade do ar pode chegar a 90% e a diferen\xe7a entre a temperatura mais alta e a mais baixa do ano \xe9 menor que a diferen\xe7a entre o dia e a noite!"},{id:"316",subjectId:"4",question:"O clima tropical t\xedpico do Brasil central \xe9 caracterizado por:",options:["Duas esta\xe7\xf5es bem definidas: inverno seco e ver\xe3o chuvoso","Chuvas constantes durante todo o ano","Temperaturas abaixo de zero no inverno","Aus\xeancia total de chuvas no ver\xe3o"],correctAnswer:0,funFact:"O Cerrado, bioma t\xedpico do clima tropical, \xe9 considerado a savana mais rica em biodiversidade do mundo!"},{id:"317",subjectId:"4",question:"O clima tropical semi\xe1rido, encontrado no Nordeste brasileiro, \xe9 marcado por:",options:["Chuvas abundantes o ano todo","Longos per\xedodos de estiagem e chuvas irregulares","Temperaturas baixas durante todo o ano","Nevascas frequentes no inverno"],correctAnswer:1,funFact:"O pol\xedgono das secas no Nordeste \xe9 maior que a \xe1rea de muitos pa\xedses europeus, como a Fran\xe7a e a Espanha juntas!"},{id:"318",subjectId:"4",question:"O clima tropical \xfamido da costa brasileira se caracteriza por:",options:["Invernos muito frios com neve","Alta pluviosidade e pequena amplitude t\xe9rmica anual","Aus\xeancia de chuvas durante o ver\xe3o","Temperaturas abaixo de zero no inverno"],correctAnswer:1,funFact:"A Mata Atl\xe2ntica, que ocorre nesse clima, \xe9 um dos biomas mais amea\xe7ados do mundo, restando menos de 13% de sua cobertura original!"},{id:"319",subjectId:"4",question:"O clima subtropical do sul do Brasil se diferencia dos outros climas brasileiros por:",options:["Apresentar as quatro esta\xe7\xf5es do ano bem definidas","Ter apenas duas esta\xe7\xf5es: ver\xe3o e inverno","N\xe3o ter varia\xe7\xe3o de temperatura ao longo do ano","Ter chuvas durante todo o ano sem esta\xe7\xe3o seca"],correctAnswer:0,funFact:"Em algumas cidades serranas do Rio Grande do Sul e Santa Catarina, a temperatura pode chegar a -10\xb0C no inverno, com ocorr\xeancia de neve em alguns anos!"},{id:"320",subjectId:"4",question:"Qual caracter\xedstica N\xc3O est\xe1 associada ao bioma da Mata Atl\xe2ntica?",options:["Alta biodiversidade com muitas esp\xe9cies end\xeamicas","Vegeta\xe7\xe3o adaptada a longos per\xedodos de seca","Floresta densa e perene","Ocorr\xeancia de manguezais em \xe1reas costeiras"],correctAnswer:1,funFact:"Apesar de ter mais de 90% de sua \xe1rea original desmatada, a Mata Atl\xe2ntica ainda abriga cerca de 20 mil esp\xe9cies de plantas, sendo 8 mil delas end\xeamicas!"},{id:"321",subjectId:"4",question:"O que caracteriza a vegeta\xe7\xe3o do Cerrado?",options:["\xc1rvores altas e copadas com troncos retil\xedneos","Vegeta\xe7\xe3o rasteira sem \xe1rvores","\xc1rvores de troncos tortuosos e casca grossa","Florestas densas e \xfamidas"],correctAnswer:2,funFact:"O Cerrado \xe9 considerado o ber\xe7o das \xe1guas do Brasil, pois abriga as nascentes de importantes bacias hidrogr\xe1ficas como a do Rio S\xe3o Francisco, Tocantins e Paran\xe1!"},{id:"322",subjectId:"4",question:"Qual caracter\xedstica \xe9 t\xedpica da Caatinga?",options:["Vegeta\xe7\xe3o sempre verde e \xfamida","Plantas com folhas pequenas ou transformadas em espinhos","\xc1rvores de grande porte com copas largas","Solo permanentemente encharcado"],correctAnswer:1,funFact:"Apesar do aspecto seco, a Caatinga abriga mais de 1.000 esp\xe9cies de animais, sendo 44 delas amea\xe7adas de extin\xe7\xe3o, como a arara-azul-de-lear e o tatu-bola!"},{id:"323",subjectId:"4",question:"O que caracteriza o bioma Pantanal?",options:["Vegeta\xe7\xe3o exclusivamente aqu\xe1tica","Altern\xe2ncia entre per\xedodos de cheia e seca","Aus\xeancia de \xe1rvores","Clima frio durante todo o ano"],correctAnswer:1,funFact:"O Pantanal \xe9 considerado pela UNESCO como Patrim\xf4nio Natural Mundial e Reserva da Biosfera, abrigando a maior concentra\xe7\xe3o de vida selvagem das Am\xe9ricas!"},{id:"324",subjectId:"4",question:"O que \xe9 a Mata de Arauc\xe1rias?",options:["Floresta de pinheiros t\xedpica do sul do Brasil","Vegeta\xe7\xe3o rasteira do litoral","Floresta tropical \xfamida","Vegeta\xe7\xe3o de \xe1reas alagadas"],correctAnswer:0,funFact:"Apesar de ser um s\xedmbolo do Paran\xe1, o pinheiro-do-paran\xe1 tamb\xe9m ocorre naturalmente em partes de Santa Catarina, Rio Grande do Sul e at\xe9 em pequenas \xe1reas de S\xe3o Paulo e Minas Gerais!"},{id:"325",subjectId:"4",question:"Qual \xe9 o tipo clim\xe1tico predominante na maior parte da Regi\xe3o Norte do Brasil?",options:["Clima semi\xe1rido","Clima equatorial \xfamido","Clima tropical de altitude","Clima subtropical"],correctAnswer:1,funFact:"Em algumas partes da Amaz\xf4nia, a umidade do ar pode chegar a 90% e a diferen\xe7a de temperatura entre o dia e a noite \xe9 maior que a diferen\xe7a entre as esta\xe7\xf5es do ano!"},{id:"326",subjectId:"4",question:"Qual destas N\xc3O \xe9 uma caracter\xedstica da Floresta Amaz\xf4nica na Regi\xe3o Norte?",options:["Grande biodiversidade de esp\xe9cies vegetais e animais","Vegeta\xe7\xe3o adaptada a longos per\xedodos de seca","Estratifica\xe7\xe3o da vegeta\xe7\xe3o em diferentes alturas","Presen\xe7a de \xe1rvores de grande porte e cip\xf3s"],correctAnswer:1,funFact:"A Amaz\xf4nia abriga cerca de 2.500 esp\xe9cies de \xe1rvores (um ter\xe7o de toda a madeira tropical do mundo) e mais de 30 mil esp\xe9cies de plantas das 100 mil da Am\xe9rica do Sul!"},{id:"327",subjectId:"4",question:"Qual \xe9 a principal atividade econ\xf4mica da Zona Franca de Manaus?",options:["Agricultura de exporta\xe7\xe3o","Pecu\xe1ria extensiva","Ind\xfastria de transforma\xe7\xe3o","Extra\xe7\xe3o de petr\xf3leo"],correctAnswer:2,funFact:"A Zona Franca de Manaus \xe9 respons\xe1vel por mais de 50% do PIB do Amazonas e gera mais de 500 mil empregos diretos e indiretos na regi\xe3o!"},{id:"328",subjectId:"4",question:"Qual destas culturas \xe9 tradicional na agricultura familiar da regi\xe3o Norte?",options:["Soja","Caf\xe9","Mandioca","Trigo"],correctAnswer:2,funFact:"O estado do Par\xe1 \xe9 o maior produtor de mandioca do Brasil, com uma produ\xe7\xe3o que ultrapassa 4 milh\xf5es de toneladas por ano, grande parte proveniente da agricultura familiar!"},{id:"329",subjectId:"4",question:"Qual destas festas populares \xe9 t\xedpica da regi\xe3o Norte do Brasil?",options:["Festa do Pe\xe3o de Boiadeiro","Cirio de Nazar\xe9 e Festival de Parintins","Festa da Uva","Festa do Divino"],correctAnswer:1,funFact:"O C\xedrio de Nazar\xe9 re\xfane cerca de 2 milh\xf5es de pessoas e \xe9 Patrim\xf4nio Cultural da Humanidade pela UNESCO, enquanto o Boi de Parintins, realizado em junho, atrai turistas do mundo todo para o Amazonas e \xe9 considerado o maior espet\xe1culo ao ar livre do Brasil!"},{id:"400",subjectId:"5",question:"Qual dessas N\xc3O \xe9 uma caracter\xedstica da puberdade?",options:["Crescimento dos pelos pubianos","Aumento da estatura","Crescimento dos dentes de leite","Desenvolvimento dos seios nas meninas"],correctAnswer:2,funFact:"A puberdade geralmente come\xe7a entre os 8-13 anos nas meninas e 9-14 anos nos meninos!"},{id:"401",subjectId:"5",question:"O que ocorre com os meninos durante a puberdade?",options:["A voz se torna mais aguda","Come\xe7am a menstruar","Crescimento dos test\xedculos e da voz mais grossa","Aumento da quantidade de leite materno"],correctAnswer:2,funFact:"A mudan\xe7a de voz nos meninos \xe9 causada pelo crescimento da laringe e das cordas vocais."},{id:"402",subjectId:"5",question:"Qual horm\xf4nio \xe9 respons\xe1vel pelo in\xedcio da puberdade?",options:["Insulina","Testosterona","Estrog\xeanio","GnRH (horm\xf4nio liberador de gonadotrofina)"],correctAnswer:3,funFact:'O GnRH age como o "sinal de partida" do desenvolvimento da puberdade.'},{id:"403",subjectId:"5",question:"Qual dessas gl\xe2ndulas est\xe1 localizada no c\xe9rebro e regula o sono?",options:["Tireoide","Hip\xf3fise","Pineal","Paratireoide"],correctAnswer:2,funFact:"Dormir no escuro total ajuda a gl\xe2ndula pineal a produzir mais melatonina!"},{id:"404",subjectId:"5",question:"O que fazem as gl\xe2ndulas sudor\xedparas?",options:["Produzem saliva","Produzem horm\xf4nios sexuais","Produzem leite materno","Produzem suor para controlar a temperatura"],correctAnswer:3,funFact:"As pessoas t\xeam entre 2 e 4 milh\xf5es de gl\xe2ndulas sudor\xedparas!"},{id:"405",subjectId:"5",question:"Qual gl\xe2ndula ajuda a regular o c\xe1lcio no corpo?",options:["Pineal","Paratireoide","Suprarrenal","Timo"],correctAnswer:1,funFact:"Apesar de pequenas, as paratireoides s\xe3o essenciais para o funcionamento muscular e nervoso!"},{id:"406",subjectId:"5",question:"Qual desses alimentos \xe9 considerado um construtor do corpo?",options:["Arroz","\xd3leo","Frango","Refrigerante"],correctAnswer:2,funFact:"As prote\xednas s\xe3o compostas por amino\xe1cidos, os tijolos do nosso corpo!"},{id:"407",subjectId:"5",question:"Qual vitamina ajuda na coagula\xe7\xe3o do sangue?",options:["Vitamina A","Vitamina C","Vitamina D","Vitamina K"],correctAnswer:3,funFact:"Ela \xe9 abundante em vegetais verde-escuros, como espinafre e couve!"},{id:"408",subjectId:"5",question:"Qual mineral ajuda a fortalecer ossos e dentes?",options:["Ferro","S\xf3dio","C\xe1lcio","Zinco"],correctAnswer:2,funFact:"O leite \xe9 uma das principais fontes de c\xe1lcio!"},{id:"409",subjectId:"5",question:"Como a vacina protege nosso corpo?",options:["Matando os v\xedrus diretamente","Aumentando a temperatura do corpo","Estimulando a produ\xe7\xe3o de anticorpos","Evaporando os germes"],correctAnswer:2,funFact:"A vacina contra a var\xedola foi a primeira criada, por Edward Jenner, em 1796!"},{id:"410",subjectId:"5",question:"O que s\xe3o anticorpos?",options:["Pequenas c\xe9lulas que causam doen\xe7as","Subst\xe2ncias produzidas por v\xedrus","Defesas naturais do corpo contra germes","Vitaminas do corpo humano"],correctAnswer:2,funFact:'Eles funcionam como "soldadinhos" que identificam e eliminam os invasores do nosso corpo!'},{id:"411",subjectId:"5",question:"Qual dessas doen\xe7as pode ser prevenida com vacina?",options:["Gripe","Dor de cabe\xe7a","Alergia","C\xe1rie"],correctAnswer:0,funFact:"As vacinas s\xe3o atualizadas anualmente por causa das muta\xe7\xf5es do v\xedrus da gripe!"},{id:"412",subjectId:"5",question:"O que deve ser feito ao encontrar uma pessoa afogada?",options:["Esperar ela se levantar","Puxar pela roupa com for\xe7a","Retir\xe1-la da \xe1gua e chamar ajuda imediatamente","Sacudir a pessoa para ela acordar"],correctAnswer:2,funFact:"Nunca entre em \xe1gua perigosa sozinho para tentar salvar algu\xe9m \u2014 chame um adulto ou os bombeiros."},{id:"413",subjectId:"5",question:"Como evitar acidentes com crian\xe7as de 0 a 5 anos?",options:["Deixar objetos pequenos ao alcance","Evitar supervis\xe3o constante","Manter produtos perigosos fora do alcance","Permitir que brinquem na cozinha"],correctAnswer:2,funFact:"Muitas intoxica\xe7\xf5es acontecem por produtos de limpeza guardados em garrafas de refrigerante."},{id:"414",subjectId:"5",question:"O que fazer se algu\xe9m desmaiar?",options:["Sacudir a pessoa","Oferecer comida rapidamente","Deit\xe1-la com as pernas elevadas e chamar ajuda","Dar um susto para acordar"],correctAnswer:2,funFact:"Desmaios s\xe3o causados por falta de sangue moment\xe2nea no c\xe9rebro e podem acontecer por calor, susto ou jejum."},{id:"415",subjectId:"5",question:"Em que ano foi inventada a vacina e por quem?",options:["1790, por Edward Jenner","1800, por Louis Pasteur","1750, por Alexander Fleming","1796, por Robert Koch"],correctAnswer:0,funFact:'Edward Jenner \xe9 considerado o "pai da imunologia" e sua descoberta salvou milh\xf5es de vidas ao longo da hist\xf3ria.'},{id:"9",subjectId:"6",question:'Como se diz "obrigado" em ingl\xeas?',options:["Please","Thank you","Sorry","Hello"],correctAnswer:1,funFact:'"Thank you" \xe9 a forma mais comum de agradecer em ingl\xeas. A express\xe3o "thanks" \xe9 uma vers\xe3o mais informal. O ingl\xeas \xe9 a l\xedngua mais falada no mundo, com mais de 1,5 bilh\xe3o de falantes.'},{id:"10",subjectId:"6",question:'Qual \xe9 a tradu\xe7\xe3o de "casa" para ingl\xeas?',options:["House","Home","Room","Building"],correctAnswer:0,funFact:'"House" refere-se \xe0 estrutura f\xedsica, enquanto "home" refere-se ao conceito emocional de lar. O ingl\xeas tem muitas palavras que parecem similares ao portugu\xeas devido \xe0 origem latina comum.'},{id:"11",subjectId:"7",question:"Qual \xe9 a unidade de medida da for\xe7a?",options:["Joule","Newton","Watt","Pascal"],correctAnswer:1,funFact:"O Newton (N) \xe9 a unidade de for\xe7a no Sistema Internacional, nomeada em homenagem a Isaac Newton. 1 Newton \xe9 a for\xe7a necess\xe1ria para acelerar 1 kg a 1 m/s\xb2. A f\xf3rmula da for\xe7a \xe9 F = m \xd7 a."},{id:"12",subjectId:"7",question:"Qual \xe9 a velocidade da luz no v\xe1cuo?",options:["300.000 km/s","150.000 km/s","450.000 km/s","600.000 km/s"],correctAnswer:0,funFact:"A velocidade da luz no v\xe1cuo \xe9 aproximadamente 299.792.458 m/s (cerca de 300.000 km/s). \xc9 a velocidade m\xe1xima poss\xedvel no universo segundo a teoria da relatividade de Einstein. Nada pode viajar mais r\xe1pido que a luz!"},{id:"13",subjectId:"8",question:"Qual \xe9 o s\xedmbolo qu\xedmico da \xe1gua?",options:["H2O","CO2","O2","NaCl"],correctAnswer:0,funFact:"H\u2082O \xe9 a f\xf3rmula qu\xedmica da \xe1gua, composta por 2 \xe1tomos de hidrog\xeanio e 1 \xe1tomo de oxig\xeanio. A \xe1gua cobre cerca de 71% da superf\xedcie da Terra e \xe9 essencial para toda a vida no planeta."},{id:"14",subjectId:"8",question:"Qual \xe9 o pH da \xe1gua pura?",options:["5","6","7","8"],correctAnswer:2,funFact:"O pH da \xe1gua pura \xe9 7, considerado neutro. Valores abaixo de 7 s\xe3o \xe1cidos e acima de 7 s\xe3o b\xe1sicos (alcalinos). A escala de pH vai de 0 a 14 e \xe9 logar\xedtmica, ent\xe3o cada unidade representa uma mudan\xe7a de 10 vezes na acidez."}],Aa=(0,a.createContext)(void 0);function Ia(e){let{children:t}=e;const[r,n]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{l(!0),console.log("\ud83d\udce5 Carregando subjects e questions do Supabase...");const{data:e,error:t}=await ja.from("subjects").select("*").order("name");if(t)console.error("\u274c Erro ao carregar subjects:",t),n(Oa);else{const t=(e||[]).map(e=>({id:e.id,name:e.name,description:e.description||void 0}));console.log("\u2705 ".concat(t.length," subject(s) carregado(s)")),n(t.length>0?t:Oa)}const{data:r,error:a}=await ja.from("questions").select("*").order("created_at");if(a)console.error("\u274c Erro ao carregar questions:",a),o(Ra);else{const e=(r||[]).map(e=>({id:e.id,subjectId:e.subject_id,question:e.question,options:e.options,correctAnswer:e.correct_answer,funFact:e.fun_fact||void 0}));console.log("\u2705 ".concat(e.length," question(s) carregada(s)")),o(e.length>0?e:Ra)}}catch(e){console.error("\u274c Erro ao carregar dados:",e),n(Oa),o(Ra)}finally{l(!1)}})()},[]);return(0,Ea.jsx)(Aa.Provider,{value:{subjects:r,questions:s,addSubject:async e=>{try{console.log("\u2795 Adicionando subject:",e);const{data:t,error:a}=await ja.from("subjects").insert({id:e.id,name:e.name,description:e.description||null}).select().single();if(a)throw console.error("\u274c Erro ao adicionar subject:",a),a;const s=[...r,e];n(s),console.log("\u2705 Subject adicionado com sucesso")}catch(t){throw console.error("\u274c Erro ao adicionar subject:",t),t}},addQuestion:async e=>{try{console.log("\u2795 Adicionando question:",e.id);const{data:t,error:r}=await ja.from("questions").insert({id:e.id,subject_id:e.subjectId,question:e.question,options:e.options,correct_answer:e.correctAnswer,fun_fact:e.funFact||null}).select().single();if(r)throw console.error("\u274c Erro ao adicionar question:",r),r;const n=[...s,e];o(n),console.log("\u2705 Question adicionada com sucesso")}catch(t){throw console.error("\u274c Erro ao adicionar question:",t),t}},updateQuestion:async e=>{try{console.log("\u270f\ufe0f Atualizando question:",e.id);const{error:t}=await ja.from("questions").update({subject_id:e.subjectId,question:e.question,options:e.options,correct_answer:e.correctAnswer,fun_fact:e.funFact||null}).eq("id",e.id);if(t)throw console.error("\u274c Erro ao atualizar question:",t),t;const r=s.map(t=>t.id===e.id?e:t);o(r),console.log("\u2705 Question atualizada com sucesso")}catch(t){throw console.error("\u274c Erro ao atualizar question:",t),t}},deleteQuestion:async e=>{try{console.log("\ud83d\uddd1\ufe0f Deletando question:",e);const{error:t}=await ja.from("questions").delete().eq("id",e);if(t)throw console.error("\u274c Erro ao deletar question:",t),t;const r=s.filter(t=>t.id!==e);o(r),console.log("\u2705 Question deletada com sucesso")}catch(t){throw console.error("\u274c Erro ao deletar question:",t),t}},getQuestionsBySubject:e=>s.filter(t=>t.subjectId===e),resetToDefaults:()=>{n(Oa),o(Ra),console.log("\u26a0\ufe0f Reset para dados padr\xe3o (apenas no estado local)")}},children:t})}function Pa(){const e=(0,a.useContext)(Aa);if(void 0===e)throw new Error("useQuiz must be used within a QuizProvider");return e}function La(){const[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(""),[s,o]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),[f,p]=(0,a.useState)(""),[m,g]=(0,a.useState)(""),{login:v,register:b}=Ta(),y=ne();return(0,Ea.jsxs)("div",{className:"login-container",children:[(0,Ea.jsx)("div",{className:"login-background",children:(0,Ea.jsxs)("div",{className:"login-shapes",children:[(0,Ea.jsx)("div",{className:"shape shape-1"}),(0,Ea.jsx)("div",{className:"shape shape-2"}),(0,Ea.jsx)("div",{className:"shape shape-3"})]})}),(0,Ea.jsxs)("div",{className:"login-box",children:[(0,Ea.jsxs)("div",{className:"login-header",children:[(0,Ea.jsxs)("div",{className:"login-logo",children:[(0,Ea.jsx)("img",{src:"".concat("","/images/logo.png"),alt:"CRB Quiz Logo",className:"logo-image",onError:e=>{var t;const r=e.target;r.style.display="none";const n=null===(t=r.parentElement)||void 0===t?void 0:t.querySelector(".logo-fallback");n&&(n.style.display="flex")},onLoad:e=>{var t;const r=null===(t=e.target.parentElement)||void 0===t?void 0:t.querySelector(".logo-fallback");r&&(r.style.display="none")}}),(0,Ea.jsx)("div",{className:"logo-fallback",style:{display:"none"},children:(0,Ea.jsxs)("div",{className:"logo-text-container",children:[(0,Ea.jsx)("div",{className:"logo-text-crb",children:"CRB"}),(0,Ea.jsx)("div",{className:"logo-text-quizz",children:"QUIZZ"})]})})]}),(0,Ea.jsx)("p",{className:"login-subtitle",children:e?"Crie sua conta e comece a aprender":"Bem-vindo de volta!"})]}),(0,Ea.jsxs)("form",{onSubmit:e?async e=>{if(e.preventDefault(),p(""),g(""),!r||!s||!i)return void p("Por favor, preencha todos os campos");if(s!==i)return void p("As senhas n\xe3o coincidem");const a=await b(r,s);a.success?(g(a.message),setTimeout(()=>{t(!1),n(""),o(""),l(""),g("")},2e3)):p(a.message)}:async e=>{if(e.preventDefault(),p(""),g(""),!r||!s)return void p("Por favor, preencha todos os campos");await v(r,s)?y("/dashboard"):p("Usu\xe1rio ou senha incorretos")},className:"login-form",autoComplete:"off",children:[(0,Ea.jsxs)("div",{className:"form-group",children:[(0,Ea.jsxs)("label",{htmlFor:"username",children:[(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Usu\xe1rio"]}),(0,Ea.jsx)("input",{id:"username",type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Digite seu usu\xe1rio",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})]}),(0,Ea.jsxs)("div",{className:"form-group",children:[(0,Ea.jsxs)("label",{htmlFor:"password",children:[(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Senha"]}),(0,Ea.jsxs)("div",{className:"password-input-wrapper",children:[(0,Ea.jsx)("input",{id:"password",type:c?"text":"password",value:s,onChange:e=>o(e.target.value),placeholder:"Digite sua senha",autoComplete:"new-password",autoCapitalize:"off",autoCorrect:"off"}),(0,Ea.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>u(!c),"aria-label":c?"Ocultar senha":"Mostrar senha",children:c?(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06M9.9 4.24C10.5883 3.91019 11.3201 3.58777 12 3.36C19 3.36 23 11.36 23 11.36C22.393 13.1356 21.6691 14.7547 20.82 16.18M14.12 14.12C13.8454 14.4147 13.5141 14.6511 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1751 15.0074 10.8016 14.8565C10.4281 14.7055 10.0887 14.481 9.80385 14.1962C9.51903 13.9113 9.29447 13.5719 9.14354 13.1984C8.99262 12.8249 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 9.02091 11.2218 9.18488 10.8538C9.34884 10.4858 9.58525 10.1546 9.88 9.88",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M1 1L23 23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M1 12C1 12 5 20 12 20C19 20 23 12 23 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),e&&(0,Ea.jsxs)("div",{className:"form-group",children:[(0,Ea.jsxs)("label",{htmlFor:"confirmPassword",children:[(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Confirmar Senha"]}),(0,Ea.jsxs)("div",{className:"password-input-wrapper",children:[(0,Ea.jsx)("input",{id:"confirmPassword",type:d?"text":"password",value:i,onChange:e=>l(e.target.value),placeholder:"Confirme sua senha",autoComplete:"new-password",autoCapitalize:"off",autoCorrect:"off"}),(0,Ea.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>h(!d),"aria-label":d?"Ocultar senha":"Mostrar senha",children:d?(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06M9.9 4.24C10.5883 3.91019 11.3201 3.58777 12 3.36C19 3.36 23 11.36 23 11.36C22.393 13.1356 21.6691 14.7547 20.82 16.18M14.12 14.12C13.8454 14.4147 13.5141 14.6511 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1751 15.0074 10.8016 14.8565C10.4281 14.7055 10.0887 14.481 9.80385 14.1962C9.51903 13.9113 9.29447 13.5719 9.14354 13.1984C8.99262 12.8249 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 9.02091 11.2218 9.18488 10.8538C9.34884 10.4858 9.58525 10.1546 9.88 9.88",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M1 1L23 23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M1 12C1 12 5 20 12 20C19 20 23 12 23 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),f&&(0,Ea.jsxs)("div",{className:"error-message",children:[(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M12 8V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M12 16H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),f]}),m&&(0,Ea.jsxs)("div",{className:"success-message",children:[(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.7088 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M22 4L12 14.01L9 11.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),m]}),(0,Ea.jsxs)("button",{type:"submit",className:"login-button",children:[(0,Ea.jsx)("span",{children:e?"Cadastrar":"Entrar"}),(0,Ea.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M12 5L19 12L12 19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]}),(0,Ea.jsx)("div",{className:"switch-mode",children:(0,Ea.jsxs)("p",{children:[e?"J\xe1 tem uma conta?":"N\xe3o tem uma conta?"," ",(0,Ea.jsx)("button",{type:"button",onClick:()=>{t(!e),p(""),g(""),n(""),o(""),l(""),u(!1),h(!1)},className:"switch-button",children:e?"Fazer login":"Cadastrar-se"})]})})]})]})}function qa(e){let{subject:t,questions:r,onComplete:n,onBack:s,onRestart:o,quizKey:i}=e;const{user:l}=Ta(),[c,u]=(0,a.useState)(0),[d,h]=(0,a.useState)(new Map),[f,p]=(0,a.useState)(-1),[m,g]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),[S,_]=(0,a.useState)(null),k=(0,a.useRef)(null),x=(0,a.useRef)(null),j=(0,a.useRef)({correct:0,wrong:0}),[E,C]=(0,a.useState)({correct:0,wrong:0}),[N,T]=(0,a.useState)(new Set);(0,a.useEffect)(()=>{u(0),h(new Map),p(-1),_(null),g(!1),b(!1),j.current={correct:0,wrong:0},C({correct:0,wrong:0});(async()=>{if(l)try{const e=await async function(e,t){try{const{data:r,error:n}=await ja.from("answered_questions").select("question_id").eq("user_id",e).eq("subject_id",t);return n?(console.error("\u274c Erro ao buscar quest\xf5es respondidas:",n),{success:!1,error:n.message}):{success:!0,questionIds:(null===r||void 0===r?void 0:r.map(e=>e.question_id))||[]}}catch(r){return console.error("\u274c Erro ao buscar quest\xf5es respondidas:",r),{success:!1,error:r.message||"Erro desconhecido"}}}(l.id,t.id);e.success&&e.questionIds&&(T(new Set(e.questionIds)),console.log("\u2705 ".concat(e.questionIds.length," quest\xe3o(\xf5es) j\xe1 respondida(s) carregada(s)")))}catch(e){console.error("\u274c Erro ao carregar quest\xf5es respondidas:",e)}})()},[i,r,t.id]);const O=r[c],R=r.length,A=d.size,I=Array.from(d.values()).filter(e=>!0===e).length,P=R>0?A/R*100:0,L=(e,a)=>{const s=e||d;if(l){const e=Array.from(new Set([...Array.from(N),...Array.from(s.keys())]));e.length>0&&async function(e,t,r){try{if(console.log("\ud83d\udcbe Salvando quest\xf5es respondidas:",{userId:e,subjectId:t,questionCount:r.length}),0===r.length)return console.log("\u26a0\ufe0f Nenhuma quest\xe3o para salvar"),{success:!0};const{data:n,error:a}=await ja.from("answered_questions").select("question_id").eq("user_id",e).in("question_id",r);if(a)return console.error("\u274c Erro ao buscar quest\xf5es respondidas:",a),{success:!1,error:a.message};const s=new Set((null===n||void 0===n?void 0:n.map(e=>e.question_id))||[]),o=r.filter(e=>!s.has(e));if(0===o.length)return console.log("\u2705 Todas as quest\xf5es j\xe1 foram respondidas anteriormente"),{success:!0};const i=o.map(r=>({user_id:e,subject_id:t,question_id:r})),{error:l}=await ja.from("answered_questions").insert(i);return l?(console.error("\u274c Erro ao salvar quest\xf5es respondidas:",l),{success:!1,error:l.message}):(console.log("\u2705 ".concat(o.length," quest\xe3o(\xf5es) salva(s) com sucesso")),{success:!0})}catch(n){return console.error("\u274c Erro ao salvar quest\xf5es respondidas:",n),{success:!1,error:n.message||"Erro desconhecido"}}}(l.id,t.id,e).then(e=>{e.success?console.log("\u2705 Quest\xf5es respondidas salvas no Supabase"):console.error("\u274c Erro ao salvar quest\xf5es respondidas:",e.error)}).catch(e=>{console.error("\u274c Erro ao salvar quest\xf5es respondidas:",e)})}const o=r.map(e=>{const t=s.get(e.id)||!1;return{questionId:e.id,selectedAnswer:-1,isCorrect:t}});g(!0);const i=a||Tt({},j.current);console.log("Quiz finalizado - Tentativas (apenas primeira vez):",i),n(o,i)};return m?null:O?(0,Ea.jsxs)("div",{className:"quiz-container",children:[(0,Ea.jsxs)("div",{className:"quiz-header",children:[(0,Ea.jsxs)("div",{className:"quiz-header-top",children:[(0,Ea.jsx)("button",{onClick:s,className:"back-button-small",children:"\u2190 Voltar para Mat\xe9rias"}),o&&(0,Ea.jsx)("button",{onClick:()=>{o&&o()},className:"restart-button-small",children:"\u21bb Reiniciar Quiz"})]}),(0,Ea.jsx)("h2",{children:t.name}),(0,Ea.jsxs)("div",{className:"quiz-progress",children:[(0,Ea.jsx)("div",{className:"progress-bar",children:(0,Ea.jsx)("div",{className:"progress-fill",style:{width:"".concat(P,"%")}})}),(0,Ea.jsxs)("span",{className:"progress-text",children:[A," de ",R," respondidas (",I," corretas)"]})]}),c<R&&(0,Ea.jsx)("div",{className:"queue-info",children:(0,Ea.jsxs)("span",{className:"queue-text",children:["Quest\xe3o ",c+1," de ",R]})})]}),(0,Ea.jsxs)("div",{className:"quiz-content",children:[(0,Ea.jsxs)("div",{ref:x,className:"question-card ".concat(y?"transitioning":""," ").concat(v?"answer-revealed":""),children:[(0,Ea.jsx)("h3",{className:"question-text",children:O.question}),(0,Ea.jsx)("div",{className:"options-list",children:O.options.map((e,t)=>{const r=f===t,n=t===O.correctAnswer;let a="option-button";return v?r&&S?a+=" correct-answer":r&&!S?a+=" incorrect-answer":n&&!r&&(a+=" correct-answer"):r&&(a+=" selected"),(0,Ea.jsxs)("button",{className:a,onClick:()=>!v&&(e=>{if(v||!O)return;const t=e===O.correctAnswer;p(e),_(t),setTimeout(()=>{b(!0),setTimeout(()=>{if(k.current){const e=k.current,t=e.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:t,behavior:"smooth"}),e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}},400)},100)})(t),disabled:v,children:[e,v&&n&&(0,Ea.jsx)("span",{className:"correct-indicator",children:"\u2713 Resposta Correta"}),v&&r&&!S&&(0,Ea.jsx)("span",{className:"incorrect-indicator",children:"\u2717 Sua Resposta"})]},t)})}),v&&O&&null!==S&&(0,Ea.jsx)("div",{ref:k,className:"answer-feedback ".concat(S?"correct-feedback":"incorrect-feedback"," ").concat(v?"show":""),children:S?(0,Ea.jsx)("div",{className:"feedback-content",children:(0,Ea.jsx)("p",{className:"feedback-message",children:"Parab\xe9ns! Voc\xea acertou! \u2713 Continue assim!"})}):(0,Ea.jsxs)("div",{className:"feedback-content",children:[(0,Ea.jsx)("p",{className:"feedback-message",children:"Voc\xea errou! Esta quest\xe3o voltar\xe1 ao final para tentar novamente. A resposta correta est\xe1 destacada em verde."}),O.funFact&&(0,Ea.jsxs)("div",{className:"fun-fact",children:[(0,Ea.jsx)("div",{className:"fun-fact-icon",children:"\ud83d\udca1"}),(0,Ea.jsxs)("div",{className:"fun-fact-content",children:[(0,Ea.jsx)("strong",{children:"Curiosidade:"}),(0,Ea.jsx)("p",{children:O.funFact})]})]})]})})]}),(0,Ea.jsx)("div",{className:"quiz-navigation",children:(0,Ea.jsx)("button",{onClick:()=>{if(!O||-1===f||null===S)return;w(!0);const e=!N.has(O.id);e&&(S?j.current.correct+=1:j.current.wrong+=1,C(Tt({},j.current)));const t=new Map(d);if(t.set(O.id,S),h(t),e){const e=new Set(N);e.add(O.id),T(e)}setTimeout(()=>{c+1>=R?setTimeout(()=>{L(t,Tt({},j.current))},300):(u(c+1),p(-1),_(null),b(!1),w(!1))},500)},disabled:!v||-1===f,className:"nav-button primary",style:{width:"100%"},children:S?"Continuar":"Tentar Novamente Mais Tarde"})})]})]}):(0,Ea.jsx)("div",{className:"quiz-container",children:(0,Ea.jsx)("div",{className:"quiz-content",children:(0,Ea.jsx)("p",{children:"Carregando..."})})})}const za={"Matem\xe1tica":{icon:"\ud83d\udd22",color:"#4A90E2",gradient:"linear-gradient(135deg, #4A90E2 0%, #357ABD 100%)"},"Portugu\xeas":{icon:"\ud83d\udcda",color:"#E74C3C",gradient:"linear-gradient(135deg, #E74C3C 0%, #C0392B 100%)"},"Hist\xf3ria":{icon:"\ud83c\udfdb\ufe0f",color:"#F39C12",gradient:"linear-gradient(135deg, #F39C12 0%, #D68910 100%)"},Geografia:{icon:"\ud83c\udf0d",color:"#27AE60",gradient:"linear-gradient(135deg, #27AE60 0%, #229954 100%)"},"Ci\xeancias":{icon:"\ud83d\udd2c",color:"#9B59B6",gradient:"linear-gradient(135deg, #9B59B6 0%, #8E44AD 100%)"},"Ingl\xeas":{icon:"\ud83c\uddec\ud83c\udde7",color:"#3498DB",gradient:"linear-gradient(135deg, #3498DB 0%, #2980B9 100%)"},"F\xedsica":{icon:"\u269b\ufe0f",color:"#E67E22",gradient:"linear-gradient(135deg, #E67E22 0%, #D35400 100%)"},"Qu\xedmica":{icon:"\ud83e\uddea",color:"#1ABC9C",gradient:"linear-gradient(135deg, #1ABC9C 0%, #16A085 100%)"}};function Ua(e){let{onQuizStateChange:t}=e;const{subjects:r,getQuestionsBySubject:n}=Pa(),{user:s}=Ta(),[o,i]=(0,a.useState)(null),[l,c]=(0,a.useState)([]),[u,d]=(0,a.useState)(!1),[h,f]=(0,a.useState)([]),[p,m]=(0,a.useState)(()=>Date.now());(0,a.useEffect)(()=>{t&&t(u)},[u,t]);const g=async(e,t)=>{if(f(e),d(!1),o&&s){var r,n;const i=null!==(r=null===t||void 0===t?void 0:t.correct)&&void 0!==r?r:e.filter(e=>e.isCorrect).length,l=null!==(n=null===t||void 0===t?void 0:t.wrong)&&void 0!==n?n:e.length-i;console.log("\ud83d\udcbe Salvando estat\xedsticas do quiz no Supabase:",{userId:s.id,subject:o.name,subjectId:o.id,correct:i,wrong:l,attempts:t});try{const t=await async function(e,t,r,n){try{console.log("\ud83d\udcbe Salvando estat\xedsticas de quiz:",{userId:e,subjectId:t,correctCount:r,wrongCount:n});const{data:a,error:s}=await ja.from("quiz_statistics").select("id, total_attempts, correct_answers, wrong_answers").eq("user_id",e).eq("subject_id",t).maybeSingle();if(s&&"PGRST116"!==s.code)return console.error("\u274c Erro ao buscar estat\xedsticas:",s),{success:!1,error:s.message};const o=(new Date).toISOString();if(a){const e=a,t={total_attempts:(e.total_attempts||0)+1,correct_answers:(e.correct_answers||0)+r,wrong_answers:(e.wrong_answers||0)+n,last_attempt_date:o,updated_at:o},{error:s}=await ja.from("quiz_statistics").update(t).eq("id",e.id);return s?(console.error("\u274c Erro ao atualizar estat\xedsticas:",s),{success:!1,error:s.message}):(console.log("\u2705 Estat\xedsticas atualizadas com sucesso"),{success:!0})}{const a={user_id:e,subject_id:t,total_attempts:1,correct_answers:r,wrong_answers:n,last_attempt_date:o},{error:s}=await ja.from("quiz_statistics").insert(a);return s?(console.error("\u274c Erro ao criar estat\xedsticas:",s),{success:!1,error:s.message}):(console.log("\u2705 Estat\xedsticas criadas com sucesso"),{success:!0})}}catch(a){return console.error("\u274c Erro ao salvar estat\xedsticas:",a),{success:!1,error:a.message||"Erro desconhecido"}}}(s.id,o.id,i,l);t.success||console.error("\u274c Erro ao salvar estat\xedsticas de quiz:",t.error);const r=i,n=e.length,a=await async function(e,t,r,n){try{console.log("\ud83d\udcbe Salvando estat\xedsticas gerais do usu\xe1rio:",{userId:e,username:t,firstAttemptCorrect:r,totalQuestions:n});const{data:a,error:s}=await ja.from("user_quiz_stats").select("id, total_quizzes, total_first_attempt_correct, total_questions").eq("user_id",e).maybeSingle();if(s&&"PGRST116"!==s.code)return console.error("\u274c Erro ao buscar estat\xedsticas do usu\xe1rio:",s),{success:!1,error:s.message};const o=(new Date).toISOString();if(a){const e=a,t={total_quizzes:(e.total_quizzes||0)+1,total_first_attempt_correct:(e.total_first_attempt_correct||0)+r,total_questions:(e.total_questions||0)+n,last_quiz_date:o,updated_at:o},{error:s}=await ja.from("user_quiz_stats").update(t).eq("id",e.id);return s?(console.error("\u274c Erro ao atualizar estat\xedsticas do usu\xe1rio:",s),{success:!1,error:s.message}):(console.log("\u2705 Estat\xedsticas do usu\xe1rio atualizadas com sucesso"),{success:!0})}{const a={user_id:e,username:t,total_quizzes:1,total_first_attempt_correct:r,total_questions:n,last_quiz_date:o},{error:s}=await ja.from("user_quiz_stats").insert(a);return s?(console.error("\u274c Erro ao criar estat\xedsticas do usu\xe1rio:",s),{success:!1,error:s.message}):(console.log("\u2705 Estat\xedsticas do usu\xe1rio criadas com sucesso"),{success:!0})}}catch(a){return console.error("\u274c Erro ao salvar estat\xedsticas do usu\xe1rio:",a),{success:!1,error:a.message||"Erro desconhecido"}}}(s.id,s.username,r,n);a.success||console.error("\u274c Erro ao salvar estat\xedsticas do usu\xe1rio:",a.error),console.log("\u2705 Estat\xedsticas salvas com sucesso no Supabase")}catch(a){console.error("\u274c Erro ao salvar estat\xedsticas:",a)}}},v=()=>{i(null),d(!1),f([])},b=()=>{if(f([]),o){const e=n(o.id);e.length>0&&(c(e),d(!0),m(Date.now()))}else m(Date.now())};if(u&&o&&l.length>0)return(0,Ea.jsx)(qa,{quizKey:p,subject:o,questions:l,onComplete:g,onBack:v,onRestart:b},p);const y=h.filter(e=>e.isCorrect).length,w=h.length,S=w>0?Math.round(y/w*100):0;return(0,Ea.jsx)("div",{className:"aluno-dashboard",children:h.length>0?(0,Ea.jsxs)("div",{className:"quiz-results",children:[(0,Ea.jsx)("h2",{children:"Resultado do Quiz"}),(0,Ea.jsxs)("div",{className:"result-card",children:[(0,Ea.jsxs)("div",{className:"result-score",children:[(0,Ea.jsx)("div",{className:"score-circle",children:(0,Ea.jsxs)("span",{className:"score-number",children:[S,"%"]})}),(0,Ea.jsxs)("p",{className:"score-text",children:["Voc\xea acertou ",y," de ",w," quest\xf5es"]})]}),(0,Ea.jsx)("div",{className:"result-details",children:h.map((e,t)=>(0,Ea.jsxs)("div",{className:"result-item ".concat(e.isCorrect?"correct":"incorrect"),children:[(0,Ea.jsxs)("span",{children:["Quest\xe3o ",t+1,":"]}),(0,Ea.jsx)("span",{children:e.isCorrect?"\u2713 Correto":"\u2717 Incorreto"})]},t))}),(0,Ea.jsxs)("div",{className:"result-actions",children:[(0,Ea.jsx)("button",{onClick:b,className:"restart-button",children:"\u21bb Reiniciar Quiz"}),(0,Ea.jsx)("button",{onClick:v,className:"back-button",children:"Voltar para Mat\xe9rias"})]})]})]}):(0,Ea.jsxs)(Ea.Fragment,{children:[(0,Ea.jsxs)("div",{className:"dashboard-header-section",children:[(0,Ea.jsx)("h2",{children:"Selecione uma Mat\xe9ria"}),(0,Ea.jsx)("p",{className:"dashboard-subtitle",children:"Escolha uma mat\xe9ria para come\xe7ar o quiz"})]}),(0,Ea.jsx)("div",{className:"subjects-grid",children:r.map(e=>{const t=n(e.id).length,r=function(e){return za[e.name]||{icon:"\ud83d\udcd6",color:"#667eea",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}(e),a=t>0;return(0,Ea.jsxs)("div",{className:"subject-card ".concat(a?"subject-card-clickable":"subject-card-disabled"),style:{"--subject-color":r.color,"--subject-gradient":r.gradient},onClick:()=>a&&(e=>{const t=n(e.id);0!==t.length?(i(e),c(t),d(!0),f([]),m(Date.now())):alert("Esta mat\xe9ria ainda n\xe3o possui quest\xf5es dispon\xedveis.")})(e),title:a?"Clique para acessar ".concat(e.name):"Esta mat\xe9ria ainda n\xe3o possui quest\xf5es dispon\xedveis",children:[(0,Ea.jsxs)("div",{className:"subject-card-header",children:[(0,Ea.jsx)("div",{className:"subject-icon",style:{background:r.gradient},children:(0,Ea.jsx)("span",{className:"icon-emoji",children:r.icon})}),(0,Ea.jsxs)("div",{className:"subject-info",children:[(0,Ea.jsx)("h3",{children:e.name}),(0,Ea.jsx)("p",{children:e.description})]})]}),(0,Ea.jsxs)("div",{className:"subject-card-footer",children:[(0,Ea.jsxs)("div",{className:"question-count",children:[(0,Ea.jsx)("span",{className:"count-number",children:t}),(0,Ea.jsx)("span",{className:"count-label",children:1===t?"quest\xe3o":"quest\xf5es"})]}),a&&(0,Ea.jsx)("div",{className:"access-indicator",children:(0,Ea.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},e.id)})})]})})}async function Da(){try{let e="id, username, role, avatar",{data:t,error:r}=await ja.from("users").select(e);if(r&&(r.message.includes("email")||r.message.includes("telefone")||r.message.includes("column"))){console.log("\u26a0\ufe0f Campos email/telefone n\xe3o encontrados, buscando sem eles...");const e=await ja.from("users").select("id, username, role, avatar");t=e.data,r=e.error}if(r)return console.error("\u274c Erro ao buscar usu\xe1rios:",r),{success:!1,error:r.message};const{data:n,error:a}=await ja.from("user_profiles").select("user_id, uploaded_image, avatar");a&&"PGRST116"!==a.code&&console.warn("\u26a0\ufe0f Erro ao buscar perfis (continuando sem eles):",a);const s=new Map;(n||[]).forEach(e=>{const t=e.uploaded_image||e.avatar||null;t&&(s.set(e.user_id,t),console.log("\ud83d\udcf8 Perfil encontrado para usu\xe1rio ".concat(e.user_id,":"),{hasUploadedImage:!!e.uploaded_image,hasAvatar:!!e.avatar,finalValue:t.substring(0,50)+"..."}))});const{data:o,error:i}=await ja.from("user_sessions").select("user_id, login_time, is_active").order("login_time",{ascending:!1});if(i)return console.error("\u274c Erro ao buscar sess\xf5es:",i),{success:!1,error:i.message};const l=new Map;(o||[]).forEach(e=>{const t=l.get(e.user_id);(!t||new Date(e.login_time)>new Date(t.loginTime))&&l.set(e.user_id,{loginTime:e.login_time,isActive:e.is_active||!1})});return{success:!0,users:(t||[]).map(e=>{const t=l.get(e.id),r=s.get(e.id)||e.avatar||null;return{id:e.id,username:e.username,role:e.role,avatar:r,lastLogin:(null===t||void 0===t?void 0:t.loginTime)||null,isActive:(null===t||void 0===t?void 0:t.isActive)||!1,email:e.email||null,telefone:e.telefone||null}})}}catch(e){return console.error("\u274c Erro ao buscar usu\xe1rios:",e),{success:!1,error:e.message||"Erro desconhecido"}}}async function Fa(){try{const e=await async function(){try{const{data:e,error:t}=await ja.from("user_quiz_stats").select("*").order("total_quizzes",{ascending:!1});return t?(console.error("\u274c Erro ao buscar estat\xedsticas de usu\xe1rios:",t),{success:!1,error:t.message}):{success:!0,stats:(e||[]).map(e=>({userId:e.user_id,username:e.username,totalQuizzes:e.total_quizzes||0,totalFirstAttemptCorrect:e.total_first_attempt_correct||0,totalQuestions:e.total_questions||0,lastQuizDate:e.last_quiz_date||void 0}))}}catch(e){return console.error("\u274c Erro ao buscar estat\xedsticas de usu\xe1rios:",e),{success:!1,error:e.message||"Erro desconhecido"}}}();if(!e.success||!e.stats)return{success:!1,error:e.error};const{data:t,error:r}=await ja.from("users").select("id, avatar");if(r)return console.error("\u274c Erro ao buscar usu\xe1rios para ranking:",r),{success:!1,error:r.message};const{data:n,error:a}=await ja.from("user_profiles").select("user_id, uploaded_image, avatar");a&&"PGRST116"!==a.code&&console.warn("\u26a0\ufe0f Erro ao buscar perfis para ranking (continuando sem eles):",a);const s=new Map;(n||[]).forEach(e=>{const t=e.uploaded_image||e.avatar||null;t&&s.set(e.user_id,t)});const o=new Map;(t||[]).forEach(e=>{const t=s.get(e.id)||e.avatar||null;o.set(e.id,t)});return{success:!0,rankings:e.stats.map(e=>{const t=e.totalQuestions>0?Math.round(e.totalFirstAttemptCorrect/e.totalQuestions*100):0;return{position:0,userId:e.userId,username:e.username,totalQuizzes:e.totalQuizzes,totalFirstAttemptCorrect:e.totalFirstAttemptCorrect,accuracy:t,avatar:o.get(e.userId)||void 0}}).sort((e,t)=>t.totalQuizzes!==e.totalQuizzes?t.totalQuizzes-e.totalQuizzes:t.totalFirstAttemptCorrect!==e.totalFirstAttemptCorrect?t.totalFirstAttemptCorrect-e.totalFirstAttemptCorrect:t.accuracy-e.accuracy).map((e,t)=>Tt(Tt({},e),{},{position:t+1}))}}catch(e){return console.error("\u274c Erro ao calcular ranking:",e),{success:!1,error:e.message||"Erro desconhecido"}}}const Ma=[{id:"avatar1",emoji:"\ud83d\udc64",color:"#2563eb"},{id:"avatar2",emoji:"\ud83c\udf93",color:"#10b981"},{id:"avatar3",emoji:"\ud83e\uddd1",color:"#f59e0b"},{id:"avatar4",emoji:"\ud83d\udc68\u200d\ud83c\udf93",color:"#8b5cf6"},{id:"avatar5",emoji:"\ud83d\udc69\u200d\ud83c\udf93",color:"#ec4899"},{id:"avatar6",emoji:"\ud83e\uddd1",color:"#06b6d4"},{id:"avatar7",emoji:"\ud83d\udc68\u200d\ud83c\udfeb",color:"#ef4444"},{id:"avatar8",emoji:"\ud83d\udc69\u200d\ud83c\udfeb",color:"#14b8a6"}];function Ba(){const e=ne(),{subjects:t,questions:r,addSubject:n}=Pa(),{user:s}=Ta(),[o,i]=(0,a.useState)("statistics"),[l,c]=(0,a.useState)([]),[u,d]=(0,a.useState)(null),[h,f]=(0,a.useState)([]),[p,m]=(0,a.useState)([]),[g,v]=(0,a.useState)([]),[b,y]=(0,a.useState)(new Map),[w,S]=(0,a.useState)(new Map),[_,k]=(0,a.useState)(!1),[x,j]=(0,a.useState)(!1),[E,C]=(0,a.useState)(!1),[N,T]=(0,a.useState)([]),[O,R]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null),[P,L]=(0,a.useState)({username:"",password:"",role:"aluno",avatar:"",email:"",telefone:""}),[q,z]=(0,a.useState)(!1),[U,D]=(0,a.useState)(null),[F,M]=(0,a.useState)({id:"",name:"",description:""}),B=(e,t)=>{if(t){if(t.startsWith("data:image")||t.startsWith("http://")||t.startsWith("https://")||t.startsWith("blob:"))return{type:"image",value:t};const e=Ma.find(e=>e.id===t);return e?{type:"emoji",value:e.emoji,color:e.color}:t.length>50&&/^[A-Za-z0-9+/=]+$/.test(t)?{type:"image",value:"data:image/png;base64,".concat(t)}:t.length<=4?{type:"emoji",value:t,color:"#2563eb"}:t.length>20?{type:"image",value:t.startsWith("data:")?t:"data:image/png;base64,".concat(t)}:{type:"emoji",value:t,color:"#2563eb"}}return{type:"emoji",value:"\ud83d\udc64",color:"#2563eb"}},W=e=>{var r;return(null===(r=t.find(t=>t.id===e))||void 0===r?void 0:r.name)||"Desconhecida"};(0,a.useEffect)(()=>{(async()=>{"statistics"===o?await V():"users"===o&&await Q()})()},[o,s]);const V=async()=>{try{console.log("\ud83d\udce5 Carregando estat\xedsticas do Supabase...");const e=await async function(){try{const{data:e,error:t}=await ja.from("quiz_statistics").select("*").order("last_attempt_date",{ascending:!1});return t?(console.error("\u274c Erro ao buscar estat\xedsticas:",t),{success:!1,error:t.message}):{success:!0,statistics:(e||[]).map(e=>({subjectId:e.subject_id,totalAttempts:e.total_attempts||0,correctAnswers:e.correct_answers||0,wrongAnswers:e.wrong_answers||0,lastAttemptDate:e.last_attempt_date||void 0}))}}catch(e){return console.error("\u274c Erro ao buscar estat\xedsticas:",e),{success:!1,error:e.message||"Erro desconhecido"}}}();e.success&&e.statistics&&c(e.statistics);const t=await Fa();t.success&&t.rankings&&f(t.rankings);const r=await async function(){try{const e=new Date(Date.now()-864e5).toISOString(),{data:t,error:r}=await ja.from("user_sessions").select("user_id, username, login_time").eq("is_active",!0).gte("login_time",e).order("login_time",{ascending:!1});if(r)return console.error("\u274c Erro ao buscar sess\xf5es ativas:",r),{success:!1,error:r.message};const n=new Map;return(t||[]).forEach(e=>{const t=n.get(e.user_id);(!t||new Date(e.login_time)>new Date(t.loginTime))&&n.set(e.user_id,{userId:e.user_id,username:e.username,loginTime:e.login_time})}),{success:!0,sessions:Array.from(n.values())}}catch(e){return console.error("\u274c Erro ao buscar sess\xf5es ativas:",e),{success:!1,error:e.message||"Erro desconhecido"}}}();if(r.success&&r.sessions){const e=new Map;r.sessions.forEach(t=>{const r=e.get(t.userId);(!r||new Date(t.loginTime)>new Date(r))&&e.set(t.userId,t.loginTime)}),y(e)}const n=await Da();if(n.success&&n.users){const e=new Date(Date.now()-6048e5),t=n.users.filter(t=>!!t.lastLogin&&new Date(t.lastLogin)>e).sort((e,t)=>e.username.localeCompare(t.username)),r=n.users.filter(t=>!t.lastLogin||new Date(t.lastLogin)<=e).sort((e,t)=>e.username.localeCompare(t.username));m(t),v(r);const a=new Map;n.users.forEach(e=>{const t=B(e.id,e.avatar);var r;(a.set(e.id,t),"image"===t.type)&&console.log("\ud83d\udcf8 Avatar de imagem encontrado para ".concat(e.username,":"),(null===(r=e.avatar)||void 0===r?void 0:r.substring(0,50))+"...")}),S(a)}}catch(e){console.error("\u274c Erro ao carregar estat\xedsticas:",e)}},Q=async()=>{try{const e=await Da();if(e.success&&e.users){const t=[...e.users].sort((e,t)=>e.username.localeCompare(t.username));T(t);const r=new Map;t.forEach(e=>{const t=B(e.id,e.avatar);var n;(r.set(e.id,t),"image"===t.type)&&console.log("\ud83d\udcf8 Avatar de imagem encontrado para ".concat(e.username,":"),(null===(n=e.avatar)||void 0===n?void 0:n.substring(0,50))+"...")}),S(r)}}catch(e){console.error("\u274c Erro ao carregar usu\xe1rios:",e)}},K=async(e,t)=>{if(!window.confirm('Tem certeza que deseja deletar o usu\xe1rio "'.concat(t,'"?')))return;const r=await async function(e){try{const{error:t}=await ja.from("users").delete().eq("id",e);return t?(console.error("\u274c Erro ao deletar usu\xe1rio:",t),{success:!1,error:t.message}):{success:!0}}catch(t){return console.error("\u274c Erro ao deletar usu\xe1rio:",t),{success:!1,error:t.message||"Erro desconhecido"}}}(e);r.success?(alert("Usu\xe1rio deletado com sucesso!"),Q()):alert("Erro: ".concat(r.error))},H=async(e,t)=>{if(!window.confirm('Tem certeza que deseja deletar a mat\xe9ria "'.concat(t,'"? Todas as quest\xf5es relacionadas ser\xe3o deletadas.')))return;const r=await async function(e){try{const{error:t}=await ja.from("subjects").delete().eq("id",e);return t?(console.error("\u274c Erro ao deletar mat\xe9ria:",t),{success:!1,error:t.message}):{success:!0}}catch(t){return console.error("\u274c Erro ao deletar mat\xe9ria:",t),{success:!1,error:t.message||"Erro desconhecido"}}}(e);r.success?(alert("Mat\xe9ria deletada com sucesso!"),window.location.reload()):alert("Erro: ".concat(r.error))},G=(()=>{if(0===l.length)return null;return[...l].sort((e,t)=>t.totalAttempts-e.totalAttempts)[0]})(),J=e=>{if(s&&e.id===s.id)return!0;const t=b.get(e.id);if(!t)return!1;const r=new Date(t),n=Date.now()-r.getTime();return Math.floor(n/6e4)<2},$=e=>{if(!e)return"Nunca";const t=new Date(e),r=(new Date).getTime()-t.getTime(),n=Math.floor(r/6e4),a=Math.floor(r/36e5),s=Math.floor(r/864e5);return n<2?"Online agora":n<60?"".concat(n," min atr\xe1s"):a<24?"".concat(a,"h atr\xe1s"):s<7?"".concat(s," dias atr\xe1s"):t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})};return(0,Ea.jsxs)("div",{className:"admin-dashboard",children:[(0,Ea.jsxs)("div",{className:"admin-tabs",children:[(0,Ea.jsx)("button",{className:"admin-tab ".concat("statistics"===o?"active":""),onClick:()=>i("statistics"),children:"\ud83d\udcca Estat\xedsticas"}),(0,Ea.jsx)("button",{className:"admin-tab ".concat("users"===o?"active":""),onClick:()=>i("users"),children:"\ud83d\udc65 Usu\xe1rios"}),(0,Ea.jsx)("button",{className:"admin-tab ".concat("subjects"===o?"active":""),onClick:()=>i("subjects"),children:"\ud83d\udcda Mat\xe9rias"}),(0,Ea.jsx)("button",{className:"admin-tab",onClick:()=>e("/migrate-questions"),children:"\ud83d\udd04 Migrar Quest\xf5es"})]}),"statistics"===o&&(()=>{const e=[...p,...g],r=e.filter(e=>J(e)).sort((e,t)=>e.username.localeCompare(t.username)),n=e.filter(e=>!J(e)).sort((e,t)=>e.username.localeCompare(t.username));return(0,Ea.jsxs)("div",{className:"admin-section",children:[(0,Ea.jsx)("h2",{children:"Dashboard"}),(0,Ea.jsxs)("div",{className:"dashboard-cards-grid",children:[(0,Ea.jsxs)("div",{className:"dashboard-card stat-card-success",children:[(0,Ea.jsx)("div",{className:"stat-icon",children:(0,Ea.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M22 11.08V12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2C16.84 2 20.87 5.38 21.8 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M22 4L12 14.01L9 11.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Ea.jsxs)("div",{className:"stat-content",children:[(0,Ea.jsx)("h3",{children:"Mat\xe9ria Mais Realizada"}),(0,Ea.jsx)("p",{className:"stat-value",children:G?W(G.subjectId):"N/A"}),(0,Ea.jsx)("p",{className:"stat-label",children:G?"".concat(G.totalAttempts," tentativas"):"Sem dados"})]})]}),(0,Ea.jsxs)("div",{className:"dashboard-card dashboard-card-clickable",onClick:()=>k(!0),children:[(0,Ea.jsx)("div",{className:"dashboard-card-icon dashboard-card-users",children:(0,Ea.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15C10.9391 15 9.92172 15.4214 9.17157 16.1716C8.42143 16.9217 8 17.9391 8 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Ea.jsxs)("div",{className:"dashboard-card-content",children:[(0,Ea.jsx)("h3",{children:"\ud83d\udc65 Usu\xe1rios do Sistema"}),(0,Ea.jsx)("p",{className:"dashboard-card-value",children:e.length}),(0,Ea.jsxs)("p",{className:"dashboard-card-description",children:[r.length," online \u2022 ",n.length," offline"]}),(0,Ea.jsx)("div",{className:"dashboard-card-arrow",children:(0,Ea.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,Ea.jsxs)("div",{className:"dashboard-card dashboard-card-clickable",onClick:()=>j(!0),children:[(0,Ea.jsx)("div",{className:"dashboard-card-icon dashboard-card-ranking",children:(0,Ea.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,Ea.jsxs)("div",{className:"dashboard-card-content",children:[(0,Ea.jsx)("h3",{children:"\ud83c\udfc6 Ranking de Usu\xe1rios"}),(0,Ea.jsx)("p",{className:"dashboard-card-value",children:h.length}),(0,Ea.jsxs)("p",{className:"dashboard-card-description",children:["Top ",Math.min(3,h.length)," melhores desempenhos"]}),(0,Ea.jsx)("div",{className:"dashboard-card-arrow",children:(0,Ea.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,Ea.jsxs)("div",{className:"dashboard-card dashboard-card-clickable",onClick:()=>C(!0),children:[(0,Ea.jsx)("div",{className:"dashboard-card-icon dashboard-card-stats",children:(0,Ea.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M3 3V21H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M7 16L12 11L16 15L21 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M21 10H15V16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Ea.jsxs)("div",{className:"dashboard-card-content",children:[(0,Ea.jsx)("h3",{children:"\ud83d\udcca Estat\xedsticas por Mat\xe9ria"}),(0,Ea.jsx)("p",{className:"dashboard-card-value",children:t.length}),(0,Ea.jsxs)("p",{className:"dashboard-card-description",children:[t.length," mat\xe9ria",1!==t.length?"s":""," cadastrada",1!==t.length?"s":""]}),(0,Ea.jsx)("div",{className:"dashboard-card-arrow",children:(0,Ea.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]}),_&&(0,Ea.jsx)("div",{className:"admin-modal-overlay",onClick:()=>k(!1),children:(0,Ea.jsxs)("div",{className:"admin-modal-content admin-modal-large",onClick:e=>e.stopPropagation(),children:[(0,Ea.jsxs)("div",{className:"admin-modal-header",children:[(0,Ea.jsx)("h2",{children:"\ud83d\udc65 Usu\xe1rios do Sistema"}),(0,Ea.jsx)("button",{className:"admin-modal-close",onClick:()=>k(!1),children:"\xd7"})]}),(0,Ea.jsx)("div",{className:"admin-modal-body",children:(()=>{const t=e=>{const t=w.get(e.id)||B(e.id,e.avatar),r=J(e);return(0,Ea.jsxs)("div",{className:"user-system-card ".concat(r?"user-online":"user-offline"),children:[(0,Ea.jsx)("div",{className:"user-system-status-indicator",children:r?(0,Ea.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#10b981",stroke:"white",strokeWidth:"2"})}):(0,Ea.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#94a3b8",stroke:"white",strokeWidth:"2"})})}),(0,Ea.jsx)("div",{className:"user-system-avatar",style:"emoji"===t.type?{backgroundColor:t.color}:{},children:"image"===t.type?(0,Ea.jsx)("img",{src:t.value,alt:e.username}):(0,Ea.jsx)("span",{children:t.value})}),(0,Ea.jsxs)("div",{className:"user-system-info",children:[(0,Ea.jsx)("div",{className:"user-system-name",children:e.username}),(0,Ea.jsx)("div",{className:"user-system-role",children:"admin"===e.role?"\ud83d\udc68\u200d\ud83d\udcbc Admin":"\ud83c\udf93 Aluno"}),(0,Ea.jsx)("div",{className:"user-system-date",children:$(e.lastLogin)})]})]},e.id)};return 0===e.length?(0,Ea.jsx)("p",{className:"users-empty",style:{textAlign:"center",padding:"40px",color:"#94a3b8"},children:"Nenhum usu\xe1rio encontrado"}):(0,Ea.jsxs)("div",{className:"users-system-two-columns",children:[(0,Ea.jsxs)("div",{className:"users-column users-online-column",children:[(0,Ea.jsx)("div",{className:"users-column-header",children:(0,Ea.jsxs)("h4",{children:["\ud83d\udfe2 Online (",r.length,")"]})}),(0,Ea.jsx)("div",{className:"users-column-list",children:0===r.length?(0,Ea.jsx)("p",{className:"users-empty",children:"Nenhum usu\xe1rio online"}):r.map(t)})]}),(0,Ea.jsxs)("div",{className:"users-column users-offline-column",children:[(0,Ea.jsx)("div",{className:"users-column-header",children:(0,Ea.jsxs)("h4",{children:["\u26aa Offline (",n.length,")"]})}),(0,Ea.jsx)("div",{className:"users-column-list",children:0===n.length?(0,Ea.jsx)("p",{className:"users-empty",children:"Nenhum usu\xe1rio offline"}):n.map(t)})]})]})})()})]})}),x&&(0,Ea.jsx)("div",{className:"admin-modal-overlay",onClick:()=>j(!1),children:(0,Ea.jsxs)("div",{className:"admin-modal-content admin-modal-large",onClick:e=>e.stopPropagation(),children:[(0,Ea.jsxs)("div",{className:"admin-modal-header",children:[(0,Ea.jsx)("h2",{children:"\ud83c\udfc6 Ranking de Usu\xe1rios"}),(0,Ea.jsx)("button",{className:"admin-modal-close",onClick:()=>j(!1),children:"\xd7"})]}),(0,Ea.jsx)("div",{className:"admin-modal-body",children:0===h.length?(0,Ea.jsx)("div",{className:"ranking-empty",children:(0,Ea.jsx)("p",{children:"Nenhum usu\xe1rio completou quizzes ainda."})}):(0,Ea.jsx)("div",{className:"ranking-list",children:h.map(e=>{const t=w.get(e.userId)||B(e.userId,e.avatar);return(0,Ea.jsxs)("div",{className:"ranking-item ".concat(e.position<=3?"ranking-top":""),children:[(0,Ea.jsx)("div",{className:"ranking-position",children:(0,Ea.jsx)("span",{className:"ranking-medal",children:(r=e.position,1===r?"\ud83e\udd47":2===r?"\ud83e\udd48":3===r?"\ud83e\udd49":"#".concat(r))})}),(0,Ea.jsx)("div",{className:"ranking-avatar",style:"emoji"===t.type?{backgroundColor:t.color}:{},children:"image"===t.type?(0,Ea.jsx)("img",{src:t.value,alt:e.username}):(0,Ea.jsx)("span",{children:t.value})}),(0,Ea.jsxs)("div",{className:"ranking-info",children:[(0,Ea.jsx)("div",{className:"ranking-name",children:e.username}),(0,Ea.jsxs)("div",{className:"ranking-stats",children:[(0,Ea.jsxs)("span",{className:"ranking-stat",children:[(0,Ea.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M9 11L12 14L22 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M21 12V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.totalQuizzes," quiz",1!==e.totalQuizzes?"zes":""]}),(0,Ea.jsxs)("span",{className:"ranking-stat",children:[(0,Ea.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M22 11.08V12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2C16.84 2 20.87 5.38 21.8 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M22 4L12 14.01L9 11.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.totalFirstAttemptCorrect," acertos de primeira"]}),(0,Ea.jsxs)("span",{className:"ranking-stat",children:[(0,Ea.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.accuracy,"% precis\xe3o"]})]})]})]},e.userId);var r})})})]})}),E&&(0,Ea.jsx)("div",{className:"admin-modal-overlay",onClick:()=>C(!1),children:(0,Ea.jsxs)("div",{className:"admin-modal-content admin-modal-large",onClick:e=>e.stopPropagation(),children:[(0,Ea.jsxs)("div",{className:"admin-modal-header",children:[(0,Ea.jsx)("h2",{children:"\ud83d\udcca Estat\xedsticas por Mat\xe9ria"}),(0,Ea.jsx)("button",{className:"admin-modal-close",onClick:()=>C(!1),children:"\xd7"})]}),(0,Ea.jsx)("div",{className:"admin-modal-body",children:(0,Ea.jsx)("div",{className:"bar-chart-container",children:(()=>{const e=[...t.map(e=>{const t=l.find(t=>t.subjectId===e.id),r=(null===t||void 0===t?void 0:t.correctAnswers)||0,n=(null===t||void 0===t?void 0:t.wrongAnswers)||0;return{subject:e,correctAnswers:r,wrongAnswers:n,totalAnswers:r+n}})].sort((e,t)=>t.totalAnswers!==e.totalAnswers?t.totalAnswers-e.totalAnswers:e.subject.name.localeCompare(t.subject.name)),r=Math.max(...e.map(e=>e.totalAnswers),1);return(0,Ea.jsx)("div",{className:"bar-chart",children:e.map(e=>{let{subject:t,correctAnswers:n,wrongAnswers:a,totalAnswers:s}=e;const o=(r>0?n/r*100:0)+(r>0?a/r*100:0);return(0,Ea.jsxs)("div",{className:"bar-chart-item",onClick:()=>{C(!1),d(t.id)},title:"".concat(t.name,": ").concat(n," acertos, ").concat(a," erros"),children:[(0,Ea.jsxs)("div",{className:"bar-chart-label",children:[(0,Ea.jsx)("span",{className:"bar-chart-name",children:t.name}),(0,Ea.jsxs)("div",{className:"bar-chart-values",children:[(0,Ea.jsxs)("span",{className:"bar-chart-value bar-chart-correct",children:["\u2713 ",n]}),(0,Ea.jsxs)("span",{className:"bar-chart-value bar-chart-wrong",children:["\u2717 ",a]})]})]}),(0,Ea.jsx)("div",{className:"bar-chart-bar-container",children:s>0?(0,Ea.jsxs)("div",{className:"bar-chart-bar-stacked",style:{width:"".concat(o,"%")},children:[n>0&&(0,Ea.jsx)("div",{className:"bar-chart-bar-segment bar-chart-correct-segment",style:{width:"".concat(n/s*100,"%")},title:"".concat(n," acertos"),children:n>0&&n/s>.15&&(0,Ea.jsx)("span",{className:"bar-chart-segment-label",children:n})}),a>0&&(0,Ea.jsx)("div",{className:"bar-chart-bar-segment bar-chart-wrong-segment",style:{width:"".concat(a/s*100,"%")},title:"".concat(a," erros"),children:a>0&&a/s>.15&&(0,Ea.jsx)("span",{className:"bar-chart-segment-label",children:a})})]}):(0,Ea.jsx)("div",{className:"bar-chart-bar-empty",children:(0,Ea.jsx)("span",{className:"bar-chart-empty-label",children:"Sem dados"})})})]},t.id)})})})()})})]})})]})})(),"users"===o&&(()=>{const e=e=>{if(!e)return"Nunca";const t=new Date(e),r=(new Date).getTime()-t.getTime(),n=Math.floor(r/6e4),a=Math.floor(r/36e5),s=Math.floor(r/864e5);return n<60?"".concat(n," min atr\xe1s"):a<24?"".concat(a,"h atr\xe1s"):s<7?"".concat(s," dias atr\xe1s"):t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})},t=[...N].sort((e,t)=>{const r=J(e);return r!==J(t)?r?-1:1:e.username.localeCompare(t.username)});return(0,Ea.jsxs)("div",{className:"admin-section",children:[(0,Ea.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,Ea.jsxs)("div",{children:[(0,Ea.jsx)("h2",{children:"Gerenciamento de Usu\xe1rios"}),(0,Ea.jsxs)("p",{style:{margin:"8px 0 0 0",color:"#64748b",fontSize:"0.9rem"},children:["Total: ",N.length," usu\xe1rio",1!==N.length?"s":""," \u2022 Online: ",N.filter(e=>J(e)).length," \u2022 Offline: ",N.filter(e=>!J(e)).length]})]}),(0,Ea.jsx)("button",{className:"admin-button admin-button-primary",onClick:()=>{I(null),L({username:"",password:"",role:"aluno",avatar:"",email:"",telefone:""}),R(!0)},children:"+ Novo Usu\xe1rio"})]}),0===N.length?(0,Ea.jsxs)("div",{className:"users-empty-state",children:[(0,Ea.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15C10.9391 15 9.92172 15.4214 9.17157 16.1716C8.42143 16.9217 8 17.9391 8 19V21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,Ea.jsx)("p",{children:"Nenhum usu\xe1rio encontrado"}),(0,Ea.jsx)("p",{style:{fontSize:"0.9rem",color:"#94a3b8",marginTop:"8px"},children:'Clique em "Novo Usu\xe1rio" para adicionar o primeiro usu\xe1rio ao sistema'})]}):(0,Ea.jsx)("div",{className:"users-management-grid",children:t.map(t=>{const r=w.get(t.id)||B(t.id,t.avatar),n=J(t);return(0,Ea.jsxs)("div",{className:"user-management-card ".concat(n?"user-online":"user-offline"),children:[(0,Ea.jsx)("div",{className:"user-management-status-indicator",children:n?(0,Ea.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#10b981",stroke:"white",strokeWidth:"2"})}):(0,Ea.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#94a3b8",stroke:"white",strokeWidth:"2"})})}),(0,Ea.jsx)("div",{className:"user-management-avatar",style:"emoji"===r.type?{backgroundColor:r.color}:{},children:"image"===r.type?(0,Ea.jsx)("img",{src:r.value,alt:t.username}):(0,Ea.jsx)("span",{children:r.value})}),(0,Ea.jsxs)("div",{className:"user-management-info",children:[(0,Ea.jsx)("h3",{className:"user-management-name",children:t.username}),(0,Ea.jsx)("div",{className:"user-management-role",children:(0,Ea.jsx)("span",{className:"role-badge ".concat(t.role),children:"admin"===t.role?"\ud83d\udc68\u200d\ud83d\udcbc Admin":"\ud83c\udf93 Aluno"})}),(0,Ea.jsx)("div",{className:"user-management-lastlogin",children:e(t.lastLogin)}),t.email&&(0,Ea.jsxs)("div",{className:"user-management-contact",children:[(0,Ea.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M22 6L12 13L2 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,Ea.jsx)("span",{className:"user-management-contact-text",children:t.email})]}),t.telefone&&(0,Ea.jsxs)("div",{className:"user-management-contact",children:[(0,Ea.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M3 5C3 3.89543 3.89543 3 5 3H8.27924C8.70967 3 9.09181 3.27543 9.22792 3.68377L10.7257 8.17721C10.8831 8.64932 10.6694 9.16531 10.2243 9.38787L7.96701 10.5165C9.06925 12.9612 11.0388 14.9308 13.4835 16.033L14.6121 13.7757C14.8347 13.3306 15.3507 13.1169 15.8228 13.2743L20.3162 14.7721C20.7246 14.9082 21 15.2903 21 15.7208V19C21 20.1046 20.1046 21 19 21H18C9.71573 21 3 14.2843 3 6V5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,Ea.jsx)("span",{className:"user-management-contact-text",children:t.telefone})]})]}),(0,Ea.jsxs)("div",{className:"user-management-actions",children:[(0,Ea.jsx)("button",{className:"admin-button admin-button-small admin-button-secondary",onClick:()=>{I(t),L({username:t.username,password:"",role:t.role,avatar:t.avatar||"",email:t.email||"",telefone:t.telefone||""}),R(!0)},title:"Editar usu\xe1rio",children:(0,Ea.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M18.5 2.5C18.8978 2.10218 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10218 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10218 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Ea.jsx)("button",{className:"admin-button admin-button-small admin-button-danger",onClick:()=>K(t.id,t.username),title:"Deletar usu\xe1rio",children:(0,Ea.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M3 6H5H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]},t.id)})})]})})(),"subjects"===o&&(0,Ea.jsxs)("div",{className:"admin-section",children:[(0,Ea.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,Ea.jsx)("h2",{children:"Gerenciamento de Mat\xe9rias"}),(0,Ea.jsx)("button",{className:"admin-button admin-button-primary",onClick:()=>{D(null),M({id:"",name:"",description:""}),z(!0)},children:"+ Nova Mat\xe9ria"})]}),(0,Ea.jsx)("div",{className:"admin-grid",children:t.map(e=>(0,Ea.jsxs)("div",{className:"admin-card",children:[(0,Ea.jsxs)("div",{className:"admin-card-header",children:[(0,Ea.jsx)("h3",{children:e.name}),(0,Ea.jsxs)("div",{className:"admin-card-actions",children:[(0,Ea.jsx)("button",{className:"admin-button admin-button-small admin-button-secondary",onClick:()=>{D(e),M({id:e.id,name:e.name,description:e.description||""}),z(!0)},children:"Editar"}),(0,Ea.jsx)("button",{className:"admin-button admin-button-small admin-button-danger",onClick:()=>H(e.id,e.name),children:"Deletar"})]})]}),(0,Ea.jsx)("p",{className:"admin-card-description",children:e.description||"Sem descri\xe7\xe3o"}),(0,Ea.jsx)("div",{className:"admin-card-footer",children:(0,Ea.jsxs)("span",{className:"admin-card-badge",children:[r.filter(t=>t.subjectId===e.id).length," quest\xf5es"]})})]},e.id))})]}),u&&(()=>{const e=t.find(e=>e.id===u),r=l.find(e=>e.subjectId===u);if(!r)return(0,Ea.jsx)("div",{className:"stat-modal-overlay",onClick:()=>d(null),children:(0,Ea.jsxs)("div",{className:"stat-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Ea.jsxs)("div",{className:"stat-modal-header",children:[(0,Ea.jsx)("h2",{children:(null===e||void 0===e?void 0:e.name)||"Estat\xedsticas"}),(0,Ea.jsx)("button",{className:"stat-modal-close",onClick:()=>d(null),children:"\xd7"})]}),(0,Ea.jsx)("div",{className:"stat-modal-body",children:(0,Ea.jsxs)("div",{className:"stat-modal-empty",children:[(0,Ea.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M9 11L12 14L22 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,Ea.jsx)("p",{children:"Nenhuma estat\xedstica dispon\xedvel para esta mat\xe9ria ainda."}),(0,Ea.jsx)("p",{className:"stat-modal-empty-hint",children:"As estat\xedsticas aparecer\xe3o quando os alunos come\xe7arem a fazer os quizzes desta mat\xe9ria."})]})})]})});const n=r,a=n.correctAnswers+n.wrongAnswers,s=a>0?Math.round(n.correctAnswers/a*100):0,o=a>0?Math.round(n.wrongAnswers/a*100):0;return(0,Ea.jsx)("div",{className:"stat-modal-overlay",onClick:()=>d(null),children:(0,Ea.jsxs)("div",{className:"stat-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Ea.jsxs)("div",{className:"stat-modal-header",children:[(0,Ea.jsxs)("div",{className:"stat-modal-title-section",children:[(0,Ea.jsx)("div",{className:"stat-modal-icon-header",children:(0,Ea.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Ea.jsxs)("div",{children:[(0,Ea.jsx)("h2",{children:(null===e||void 0===e?void 0:e.name)||"Estat\xedsticas"}),(0,Ea.jsx)("p",{className:"stat-modal-subtitle",children:(null===e||void 0===e?void 0:e.description)||""})]})]}),(0,Ea.jsx)("button",{className:"stat-modal-close",onClick:()=>d(null),"aria-label":"Fechar",children:(0,Ea.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,Ea.jsxs)("div",{className:"stat-modal-body",children:[(0,Ea.jsxs)("div",{className:"stat-modal-grid",children:[(0,Ea.jsxs)("div",{className:"stat-modal-card",children:[(0,Ea.jsx)("div",{className:"stat-modal-icon stat-modal-primary",children:(0,Ea.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M9 11L12 14L22 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Ea.jsxs)("div",{className:"stat-modal-card-content",children:[(0,Ea.jsx)("h3",{children:"Total de Tentativas"}),(0,Ea.jsx)("p",{className:"stat-modal-value",children:n.totalAttempts}),(0,Ea.jsx)("p",{className:"stat-modal-description",children:"Vezes que o quiz foi realizado"})]})]}),(0,Ea.jsxs)("div",{className:"stat-modal-card",children:[(0,Ea.jsx)("div",{className:"stat-modal-icon stat-modal-success",children:(0,Ea.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M22 11.08V12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2C16.84 2 20.87 5.38 21.8 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M22 4L12 14.01L9 11.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,Ea.jsxs)("div",{className:"stat-modal-card-content",children:[(0,Ea.jsx)("h3",{children:"Acertos"}),(0,Ea.jsx)("p",{className:"stat-modal-value stat-modal-success-text",children:n.correctAnswers}),(0,Ea.jsx)("p",{className:"stat-modal-description",children:a>0?"".concat(s,"% das respostas"):"Nenhuma resposta ainda"})]})]}),(0,Ea.jsxs)("div",{className:"stat-modal-card",children:[(0,Ea.jsx)("div",{className:"stat-modal-icon stat-modal-error",children:(0,Ea.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,Ea.jsx)("path",{d:"M15 9L9 15M9 9L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,Ea.jsxs)("div",{className:"stat-modal-card-content",children:[(0,Ea.jsx)("h3",{children:"Erros"}),(0,Ea.jsx)("p",{className:"stat-modal-value stat-modal-error-text",children:n.wrongAnswers}),(0,Ea.jsx)("p",{className:"stat-modal-description",children:a>0?"".concat(o,"% das respostas"):"Nenhuma resposta ainda"})]})]})]}),a>0&&(0,Ea.jsxs)("div",{className:"stat-modal-progress",children:[(0,Ea.jsx)("h3",{children:"Distribui\xe7\xe3o de Respostas"}),(0,Ea.jsxs)("div",{className:"stat-progress-bar-large",children:[(0,Ea.jsx)("div",{className:"stat-progress-correct-large",style:{width:"".concat(s,"%")},children:s>10&&(0,Ea.jsxs)("span",{className:"stat-progress-label",children:[s,"%"]})}),(0,Ea.jsx)("div",{className:"stat-progress-wrong-large",style:{width:"".concat(o,"%")},children:o>10&&(0,Ea.jsxs)("span",{className:"stat-progress-label",children:[o,"%"]})})]}),(0,Ea.jsxs)("div",{className:"stat-progress-legend",children:[(0,Ea.jsxs)("div",{className:"stat-legend-item",children:[(0,Ea.jsx)("div",{className:"stat-legend-color stat-legend-correct"}),(0,Ea.jsxs)("span",{children:["Acertos (",n.correctAnswers,")"]})]}),(0,Ea.jsxs)("div",{className:"stat-legend-item",children:[(0,Ea.jsx)("div",{className:"stat-legend-color stat-legend-wrong"}),(0,Ea.jsxs)("span",{children:["Erros (",n.wrongAnswers,")"]})]})]})]})]})]})})})(),O&&(0,Ea.jsx)("div",{className:"admin-modal-overlay",onClick:()=>R(!1),children:(0,Ea.jsxs)("div",{className:"admin-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Ea.jsxs)("div",{className:"admin-modal-header",children:[(0,Ea.jsx)("h2",{children:A?"Editar Usu\xe1rio":"Novo Usu\xe1rio"}),(0,Ea.jsx)("button",{className:"admin-modal-close",onClick:()=>R(!1),children:"\xd7"})]}),(0,Ea.jsxs)("div",{className:"admin-modal-body",children:[(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsx)("label",{children:"Usu\xe1rio *"}),(0,Ea.jsx)("input",{type:"text",value:P.username,onChange:e=>L(Tt(Tt({},P),{},{username:e.target.value})),placeholder:"Nome de usu\xe1rio"})]}),(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsxs)("label",{children:["Senha ",A?"(deixe em branco para n\xe3o alterar)":"*"," "]}),(0,Ea.jsx)("input",{type:"password",value:P.password,onChange:e=>L(Tt(Tt({},P),{},{password:e.target.value})),placeholder:"Senha"})]}),(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsx)("label",{children:"Role *"}),(0,Ea.jsxs)("select",{value:P.role,onChange:e=>L(Tt(Tt({},P),{},{role:e.target.value})),children:[(0,Ea.jsx)("option",{value:"aluno",children:"Aluno"}),(0,Ea.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsx)("label",{children:"Avatar (ID ou emoji)"}),(0,Ea.jsx)("input",{type:"text",value:P.avatar,onChange:e=>L(Tt(Tt({},P),{},{avatar:e.target.value})),placeholder:"Ex: avatar1 ou \ud83d\udc64"})]}),(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsx)("label",{children:"Email"}),(0,Ea.jsx)("input",{type:"email",value:P.email,onChange:e=>L(Tt(Tt({},P),{},{email:e.target.value})),placeholder:"usuario@exemplo.com"})]}),(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsx)("label",{children:"Telefone"}),(0,Ea.jsx)("input",{type:"tel",value:P.telefone,onChange:e=>L(Tt(Tt({},P),{},{telefone:e.target.value})),placeholder:"(00) 00000-0000"})]})]}),(0,Ea.jsxs)("div",{className:"admin-modal-footer",children:[(0,Ea.jsx)("button",{className:"admin-button admin-button-secondary",onClick:()=>R(!1),children:"Cancelar"}),(0,Ea.jsx)("button",{className:"admin-button admin-button-primary",onClick:A?async()=>{if(!A)return;const e=await async function(e,t){try{const r={};if(void 0!==t.username&&(r.username=t.username),void 0!==t.password&&(r.password=t.password),void 0!==t.role&&(r.role=t.role),void 0!==t.avatar&&(r.avatar=t.avatar),void 0!==t.email&&(r.email=t.email||null),void 0!==t.telefone&&(r.telefone=t.telefone||null),0===Object.keys(r).length)return{success:!0};const{error:n}=await ja.from("users").update(r).eq("id",e);return n?(console.error("\u274c Erro ao atualizar usu\xe1rio:",n),{success:!1,error:n.message}):{success:!0}}catch(r){return console.error("\u274c Erro ao atualizar usu\xe1rio:",r),{success:!1,error:r.message||"Erro desconhecido"}}}(A.id,P);e.success?(alert("Usu\xe1rio atualizado com sucesso!"),R(!1),I(null),L({username:"",password:"",role:"aluno",avatar:"",email:"",telefone:""}),Q()):alert("Erro: ".concat(e.error))}:async()=>{if(!P.username||!P.password)return void alert("Preencha todos os campos obrigat\xf3rios");const e=await async function(e){try{const t={username:e.username,password:e.password,role:e.role,avatar:e.avatar||null};void 0!==e.email&&(t.email=e.email||null),void 0!==e.telefone&&(t.telefone=e.telefone||null);const{data:r,error:n}=await ja.from("users").insert(t).select().single();return n?(console.error("\u274c Erro ao criar usu\xe1rio:",n),{success:!1,error:n.message}):{success:!0,user:r}}catch(t){return console.error("\u274c Erro ao criar usu\xe1rio:",t),{success:!1,error:t.message||"Erro desconhecido"}}}(P);e.success?(alert("Usu\xe1rio criado com sucesso!"),R(!1),L({username:"",password:"",role:"aluno",avatar:"",email:"",telefone:""}),Q()):alert("Erro: ".concat(e.error))},children:A?"Salvar":"Criar"})]})]})}),q&&(0,Ea.jsx)("div",{className:"admin-modal-overlay",onClick:()=>z(!1),children:(0,Ea.jsxs)("div",{className:"admin-modal-content",onClick:e=>e.stopPropagation(),children:[(0,Ea.jsxs)("div",{className:"admin-modal-header",children:[(0,Ea.jsx)("h2",{children:U?"Editar Mat\xe9ria":"Nova Mat\xe9ria"}),(0,Ea.jsx)("button",{className:"admin-modal-close",onClick:()=>z(!1),children:"\xd7"})]}),(0,Ea.jsxs)("div",{className:"admin-modal-body",children:[(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsx)("label",{children:"ID *"}),(0,Ea.jsx)("input",{type:"text",value:F.id,onChange:e=>M(Tt(Tt({},F),{},{id:e.target.value})),placeholder:"Ex: matematica",disabled:!!U})]}),(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsx)("label",{children:"Nome *"}),(0,Ea.jsx)("input",{type:"text",value:F.name,onChange:e=>M(Tt(Tt({},F),{},{name:e.target.value})),placeholder:"Nome da mat\xe9ria"})]}),(0,Ea.jsxs)("div",{className:"admin-form-group",children:[(0,Ea.jsx)("label",{children:"Descri\xe7\xe3o"}),(0,Ea.jsx)("textarea",{value:F.description,onChange:e=>M(Tt(Tt({},F),{},{description:e.target.value})),placeholder:"Descri\xe7\xe3o da mat\xe9ria",rows:3})]})]}),(0,Ea.jsxs)("div",{className:"admin-modal-footer",children:[(0,Ea.jsx)("button",{className:"admin-button admin-button-secondary",onClick:()=>z(!1),children:"Cancelar"}),(0,Ea.jsx)("button",{className:"admin-button admin-button-primary",onClick:U?async()=>{if(!U)return;const e=await async function(e,t){try{const r={};void 0!==t.name&&(r.name=t.name),void 0!==t.description&&(r.description=t.description);const{error:n}=await ja.from("subjects").update(r).eq("id",e);return n?(console.error("\u274c Erro ao atualizar mat\xe9ria:",n),{success:!1,error:n.message}):{success:!0}}catch(r){return console.error("\u274c Erro ao atualizar mat\xe9ria:",r),{success:!1,error:r.message||"Erro desconhecido"}}}(U.id,F);e.success?(alert("Mat\xe9ria atualizada com sucesso!"),z(!1),D(null),M({id:"",name:"",description:""}),window.location.reload()):alert("Erro: ".concat(e.error))}:async()=>{if(!F.id||!F.name)return void alert("Preencha todos os campos obrigat\xf3rios");const e=await async function(e){try{const{data:t,error:r}=await ja.from("subjects").insert({id:e.id,name:e.name,description:e.description||null}).select().single();return r?(console.error("\u274c Erro ao criar mat\xe9ria:",r),{success:!1,error:r.message}):{success:!0,subject:t}}catch(t){return console.error("\u274c Erro ao criar mat\xe9ria:",t),{success:!1,error:t.message||"Erro desconhecido"}}}(F);e.success?(n({id:F.id,name:F.name,description:F.description}),alert("Mat\xe9ria criada com sucesso!"),z(!1),M({id:"",name:"",description:""})):alert("Erro: ".concat(e.error))},children:U?"Salvar":"Criar"})]})]})})]})}const Wa=[{id:"avatar1",emoji:"\ud83d\udc64",color:"#2563eb"},{id:"avatar2",emoji:"\ud83c\udf93",color:"#10b981"},{id:"avatar3",emoji:"\ud83e\uddd1\u200d\ud83d\udcbb",color:"#f59e0b"},{id:"avatar4",emoji:"\ud83d\udc68\u200d\ud83c\udf93",color:"#8b5cf6"},{id:"avatar5",emoji:"\ud83d\udc69\u200d\ud83c\udf93",color:"#ec4899"},{id:"avatar6",emoji:"\ud83e\uddd1\u200d\ud83d\udd2c",color:"#06b6d4"},{id:"avatar7",emoji:"\ud83d\udc68\u200d\ud83c\udfeb",color:"#ef4444"},{id:"avatar8",emoji:"\ud83d\udc69\u200d\ud83c\udfeb",color:"#14b8a6"}];function Va(e){var t,r;let{onBack:n}=e;const{user:s,refreshUser:o}=Ta(),[i,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)("preset"),[f,p]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!0),v=(0,a.useRef)(null),[b,y]=(0,a.useState)(""),[w,S]=(0,a.useState)("");if((0,a.useEffect)(()=>{(async()=>{if(s)try{g(!0);const e=await async function(e){try{const{data:t,error:r}=await ja.from("user_profiles").select("avatar, uploaded_image").eq("user_id",e).maybeSingle();return r&&"PGRST116"!==r.code?(console.error("\u274c Erro ao buscar perfil:",r),{success:!1,error:r.message}):{success:!0,profile:t?{avatar:t.avatar,uploaded_image:t.uploaded_image}:void 0}}catch(t){return console.error("\u274c Erro ao buscar perfil:",t),{success:!1,error:t.message||"Erro desconhecido"}}}(s.id);e.success&&e.profile&&(l(e.profile.avatar||""),u(e.profile.uploaded_image||""),y(e.profile.avatar||""),S(e.profile.uploaded_image||""))}catch(e){console.error("\u274c Erro ao carregar perfil:",e)}finally{g(!1)}})()},[s]),!s)return null;if(m)return(0,Ea.jsx)("div",{className:"profile-container",children:"Carregando perfil..."});return(0,Ea.jsxs)("div",{className:"profile-container",children:[(0,Ea.jsxs)("div",{className:"profile-header",children:[(0,Ea.jsx)("h2",{children:"Meu Perfil"}),(0,Ea.jsx)("p",{children:"Personalize seu avatar"})]}),(0,Ea.jsxs)("div",{className:"profile-avatar-preview",children:[(0,Ea.jsx)("div",{className:"avatar-preview-large",children:w||c?(0,Ea.jsx)("img",{src:w||c,alt:"Avatar",className:"avatar-image"}):b||i?(0,Ea.jsx)("div",{className:"avatar-emoji-large",style:{backgroundColor:(null===(t=Wa.find(e=>e.id===(b||i)))||void 0===t?void 0:t.color)||"#2563eb"},children:null===(r=Wa.find(e=>e.id===(b||i)))||void 0===r?void 0:r.emoji}):(0,Ea.jsx)("div",{className:"avatar-emoji-large",style:{backgroundColor:"#2563eb"},children:"\ud83d\udc64"})}),(0,Ea.jsx)("p",{className:"avatar-preview-name",children:s.username})]}),(0,Ea.jsxs)("div",{className:"profile-tabs",children:[(0,Ea.jsx)("button",{className:"preset"===d?"active":"",onClick:()=>h("preset"),children:"Avatares"}),(0,Ea.jsx)("button",{className:"upload"===d?"active":"",onClick:()=>h("upload"),children:"Upload de Foto"})]}),"preset"===d&&(0,Ea.jsxs)("div",{className:"profile-section",children:[(0,Ea.jsx)("h3",{children:"Escolha um Avatar"}),(0,Ea.jsx)("div",{className:"avatars-grid",children:Wa.map(e=>{const t=(b||i)===e.id;return(0,Ea.jsxs)("button",{className:"avatar-option ".concat(t?"selected":""),onClick:()=>{return t=e.id,y(t),S(""),void p(!0);var t},style:{backgroundColor:e.color},children:[(0,Ea.jsx)("span",{className:"avatar-emoji",children:e.emoji}),t&&(0,Ea.jsx)("div",{className:"avatar-check",children:(0,Ea.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M20 6L9 17L4 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},e.id)})})]}),"upload"===d&&(0,Ea.jsxs)("div",{className:"profile-section",children:[(0,Ea.jsx)("h3",{children:"Enviar sua Foto"}),(0,Ea.jsx)("div",{className:"upload-area",children:w||c?(0,Ea.jsxs)("div",{className:"uploaded-preview",children:[(0,Ea.jsx)("img",{src:w||c,alt:"Uploaded",className:"uploaded-image"}),(0,Ea.jsxs)("button",{onClick:()=>{S(""),y(""),p(!0),v.current&&(v.current.value="")},className:"remove-upload-button",children:[(0,Ea.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Ea.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Remover"]})]}):(0,Ea.jsxs)("div",{className:"upload-placeholder",children:[(0,Ea.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ea.jsx)("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M17 8L12 3L7 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ea.jsx)("path",{d:"M12 3V15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,Ea.jsx)("p",{children:"Clique para fazer upload"}),(0,Ea.jsx)("p",{className:"upload-hint",children:"PNG, JPG at\xe9 2MB"}),(0,Ea.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;if(!r.type.startsWith("image/"))return void alert("Por favor, selecione uma imagem v\xe1lida");if(r.size>2097152)return void alert("A imagem deve ter no m\xe1ximo 2MB");const n=new FileReader;n.onloadend=()=>{const e=n.result;S(e),y(""),p(!0)},n.readAsDataURL(r)},className:"file-input"})]})})]}),(0,Ea.jsxs)("div",{className:"profile-actions",children:[(0,Ea.jsx)("button",{onClick:n||(()=>{y(i),S(c),p(!1),v.current&&(v.current.value="")}),className:"profile-button cancel-button",children:"Voltar"}),(0,Ea.jsx)("button",{onClick:async()=>{if(s)try{const e=await async function(e,t,r){try{console.log("\ud83d\udcbe Salvando perfil do usu\xe1rio:",{userId:e,avatar:t?"definido":"null",uploadedImage:r?"definido":"null"});const{data:n,error:a}=await ja.from("user_profiles").select("id").eq("user_id",e).maybeSingle();if(a&&"PGRST116"!==a.code)return console.error("\u274c Erro ao buscar perfil existente:",a),{success:!1,error:a.message};const s=(new Date).toISOString();if(n){const a={avatar:t,uploaded_image:r,updated_at:s},o=n,{error:i}=await ja.from("user_profiles").update(a).eq("id",o.id);if(i)return console.error("\u274c Erro ao atualizar perfil:",i),{success:!1,error:i.message};if(t||r){const n=r||t||null;await ja.from("users").update({avatar:n}).eq("id",e)}return console.log("\u2705 Perfil atualizado com sucesso"),{success:!0}}{const n={user_id:e,avatar:t,uploaded_image:r},{error:a}=await ja.from("user_profiles").insert(n);if(a)return console.error("\u274c Erro ao criar perfil:",a),{success:!1,error:a.message};if(t||r){const n=r||t||null;await ja.from("users").update({avatar:n}).eq("id",e)}return console.log("\u2705 Perfil criado com sucesso"),{success:!0}}}catch(n){return console.error("\u274c Erro ao salvar perfil:",n),{success:!1,error:n.message||"Erro desconhecido"}}}(s.id,b||null,w||null);e.success?(l(b),u(w),p(!1),await o(),n&&n()):alert("Erro ao salvar perfil: ".concat(e.error))}catch(e){console.error("\u274c Erro ao salvar perfil:",e),alert("Erro ao salvar perfil. Tente novamente.")}},className:"profile-button save-button",disabled:!f,children:"Salvar"})]})]})}const Qa=[{id:"avatar1",emoji:"\ud83d\udc64",color:"#2563eb"},{id:"avatar2",emoji:"\ud83c\udf93",color:"#10b981"},{id:"avatar3",emoji:"\ud83e\uddd1\u200d\ud83d\udcbb",color:"#f59e0b"},{id:"avatar4",emoji:"\ud83d\udc68\u200d\ud83c\udf93",color:"#8b5cf6"},{id:"avatar5",emoji:"\ud83d\udc69\u200d\ud83c\udf93",color:"#ec4899"},{id:"avatar6",emoji:"\ud83e\uddd1\u200d\ud83d\udd2c",color:"#06b6d4"},{id:"avatar7",emoji:"\ud83d\udc68\u200d\ud83c\udfeb",color:"#ef4444"},{id:"avatar8",emoji:"\ud83d\udc69\u200d\ud83c\udfeb",color:"#14b8a6"}];function Ka(){const{user:e,logout:t}=Ta(),r=ne(),[n,s]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),u=(0,a.useRef)(null),d=(0,a.useRef)(Date.now());if((0,a.useEffect)(()=>{if(!e)return;const n=6e5,a=()=>{d.current=Date.now(),u.current&&clearTimeout(u.current),u.current=setTimeout(async()=>{Date.now()-d.current>=n&&(await t(),r("/"))},n)},s=["mousedown","mousemove","keypress","scroll","touchstart","click"];return s.forEach(e=>{window.addEventListener(e,a,!0)}),a(),()=>{s.forEach(e=>{window.removeEventListener(e,a,!0)}),u.current&&clearTimeout(u.current)}},[e,t,r]),(0,a.useEffect)(()=>{(async()=>{if(null!==e&&void 0!==e&&e.id)try{const{data:t}=await ja.from("user_profiles").select("uploaded_image, avatar").eq("user_id",e.id).maybeSingle(),r=t,n=(null===r||void 0===r?void 0:r.uploaded_image)||(null===r||void 0===r?void 0:r.avatar)||e.avatar||null;c(n)}catch(t){console.error("\u274c Erro ao buscar avatar do perfil:",t),c(e.avatar||null)}})()},[e,n]),!e)return null;const h=(()=>{const t=l||e.avatar;if(t){if(t.startsWith("data:image"))return t;const e=Qa.find(e=>e.id===t);return e?e.emoji:t}return"\ud83d\udc64"})(),f=h.startsWith("data:image");return(0,Ea.jsxs)("div",{className:"dashboard-container",children:[(0,Ea.jsxs)("header",{className:"dashboard-header",children:[(0,Ea.jsx)("div",{className:"header-logo-section",children:(0,Ea.jsxs)("div",{className:"header-logo",children:[(0,Ea.jsx)("img",{src:"".concat("","/images/logo.png"),alt:"CRB Quiz Logo",className:"header-logo-image",onError:e=>{var t;const r=e.target;r.style.display="none";const n=null===(t=r.parentElement)||void 0===t?void 0:t.querySelector(".header-logo-fallback");n&&(n.style.display="flex")},onLoad:e=>{var t;const r=null===(t=e.target.parentElement)||void 0===t?void 0:t.querySelector(".header-logo-fallback");r&&(r.style.display="none")}}),(0,Ea.jsx)("div",{className:"header-logo-fallback",style:{display:"none"},children:(0,Ea.jsxs)("div",{className:"header-logo-text-container",children:[(0,Ea.jsx)("div",{className:"header-logo-text-crb",children:"CRB"}),(0,Ea.jsx)("div",{className:"header-logo-text-quiz",children:"QUIZ"})]})})]})}),(0,Ea.jsxs)("div",{className:"user-info",children:[(0,Ea.jsx)("button",{onClick:()=>s(!n),className:"user-avatar-button",title:"Meu Perfil",children:f?(0,Ea.jsx)("img",{src:h,alt:"Avatar",className:"header-avatar-image"}):(0,Ea.jsx)("div",{className:"header-avatar-emoji",children:h})}),(0,Ea.jsxs)("span",{children:["Ol\xe1, ",e.username]}),(0,Ea.jsxs)("span",{className:"user-role",children:["(","admin"===e.role?"Administrador":"Aluno",")"]}),(0,Ea.jsx)("button",{onClick:async()=>{await t(),r("/")},className:"logout-button",children:"Sair"})]})]}),(0,Ea.jsx)("main",{className:"dashboard-main",children:n?(0,Ea.jsx)(Va,{onBack:()=>{s(!1)}}):"admin"===e.role?(0,Ea.jsx)(Ba,{}):(0,Ea.jsx)(Ua,{onQuizStateChange:i})})]})}const Ha=new class{constructor(){this.results=[],this.STORAGE_KEYS={USER:"user",USERS:"users",USER_SESSIONS:"userSessions",SUBJECTS:"subjects",QUESTIONS:"questions",USER_PROFILE:e=>"userProfile_".concat(e),QUIZ_STATS:e=>"quizStats_".concat(e),QUIZ_STATISTICS:"quizStatistics",USER_QUIZ_STATS:"userQuizStats",ANSWERED_HISTORY:e=>"answeredQuestions_".concat(e)}}runAllTests(){return this.results=[],console.log("\ud83e\uddea Iniciando testes de conex\xe3o com o banco de dados...\n"),this.testLocalStorageAvailability(),this.testStorageQuota(),this.testUsersStructure(),this.testSubjectsStructure(),this.testQuestionsStructure(),this.testSessionsStructure(),this.testUserOperations(),this.testSubjectOperations(),this.testQuestionOperations(),this.testSessionOperations(),this.testProfileOperations(),this.testQuizStatsOperations(),this.testDataIntegrity(),this.testDataConsistency(),this.testReadPerformance(),this.testWritePerformance(),this.printSummary(),this.results}testLocalStorageAvailability(){try{if("undefined"===typeof Storage)return void this.addResult("fail","localStorage n\xe3o est\xe1 dispon\xedvel","O navegador n\xe3o suporta localStorage");const e="__test__";localStorage.setItem(e,"test");const t=localStorage.getItem(e);localStorage.removeItem(e),"test"===t?this.addResult("pass","localStorage est\xe1 dispon\xedvel e funcional","Opera\xe7\xf5es b\xe1sicas funcionando"):this.addResult("fail","localStorage n\xe3o est\xe1 funcionando corretamente","Falha ao ler/escrever")}catch(rs){this.addResult("fail","Erro ao acessar localStorage",rs.message)}}testStorageQuota(){try{"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate().then(e=>{const t=e.usage||0,r=e.quota||0,n=(t/r*100).toFixed(2);this.addResult("pass","Quota de armazenamento: ".concat((t/1024/1024).toFixed(2)," MB / ").concat((r/1024/1024).toFixed(2)," MB (").concat(n,"%)"),{used:t,quota:r,percentage:n})}):this.addResult("warning","N\xe3o foi poss\xedvel verificar a quota de armazenamento","API n\xe3o dispon\xedvel")}catch(rs){this.addResult("warning","Erro ao verificar quota",rs.message)}}testUsersStructure(){try{const e=localStorage.getItem(this.STORAGE_KEYS.USERS);if(!e)return void this.addResult("warning","Nenhum usu\xe1rio encontrado no banco","Dados padr\xe3o ser\xe3o criados no primeiro uso");const t=JSON.parse(e);if(!Array.isArray(t))return void this.addResult("fail","Estrutura de usu\xe1rios inv\xe1lida","Esperado: array, Recebido: "+typeof t);const r=t.filter(e=>e&&"string"===typeof e.id&&"string"===typeof e.username&&"string"===typeof e.password&&("admin"===e.role||"aluno"===e.role));r.length===t.length?this.addResult("pass","Estrutura de usu\xe1rios v\xe1lida (".concat(t.length," usu\xe1rios)"),{count:t.length}):this.addResult("warning","Alguns usu\xe1rios t\xeam estrutura inv\xe1lida",{total:t.length,valid:r.length})}catch(rs){this.addResult("fail","Erro ao validar estrutura de usu\xe1rios",rs.message)}}testSubjectsStructure(){try{const e=localStorage.getItem(this.STORAGE_KEYS.SUBJECTS);if(!e)return void this.addResult("warning","Nenhuma mat\xe9ria encontrada no banco","Dados padr\xe3o ser\xe3o criados no primeiro uso");const t=JSON.parse(e);if(!Array.isArray(t))return void this.addResult("fail","Estrutura de mat\xe9rias inv\xe1lida","Esperado: array");const r=t.filter(e=>e&&"string"===typeof e.id&&"string"===typeof e.name&&"string"===typeof e.description);r.length===t.length?this.addResult("pass","Estrutura de mat\xe9rias v\xe1lida (".concat(t.length," mat\xe9rias)"),{count:t.length}):this.addResult("warning","Algumas mat\xe9rias t\xeam estrutura inv\xe1lida",{total:t.length,valid:r.length})}catch(rs){this.addResult("fail","Erro ao validar estrutura de mat\xe9rias",rs.message)}}testQuestionsStructure(){try{const e=localStorage.getItem(this.STORAGE_KEYS.QUESTIONS);if(!e)return void this.addResult("warning","Nenhuma quest\xe3o encontrada no banco","Dados padr\xe3o ser\xe3o criados no primeiro uso");const t=JSON.parse(e);if(!Array.isArray(t))return void this.addResult("fail","Estrutura de quest\xf5es inv\xe1lida","Esperado: array");const r=t.filter(e=>e&&"string"===typeof e.id&&"string"===typeof e.subjectId&&"string"===typeof e.question&&Array.isArray(e.options)&&"number"===typeof e.correctAnswer&&e.options.length>0&&e.correctAnswer>=0&&e.correctAnswer<e.options.length);r.length===t.length?this.addResult("pass","Estrutura de quest\xf5es v\xe1lida (".concat(t.length," quest\xf5es)"),{count:t.length}):this.addResult("warning","Algumas quest\xf5es t\xeam estrutura inv\xe1lida",{total:t.length,valid:r.length})}catch(rs){this.addResult("fail","Erro ao validar estrutura de quest\xf5es",rs.message)}}testSessionsStructure(){try{const e=localStorage.getItem(this.STORAGE_KEYS.USER_SESSIONS);if(!e)return void this.addResult("pass","Nenhuma sess\xe3o ativa","Normal se n\xe3o houver usu\xe1rios logados");const t=JSON.parse(e);if(!Array.isArray(t))return void this.addResult("fail","Estrutura de sess\xf5es inv\xe1lida","Esperado: array");const r=t.filter(e=>e&&"string"===typeof e.userId&&"string"===typeof e.username&&"string"===typeof e.loginTime);r.length===t.length?this.addResult("pass","Estrutura de sess\xf5es v\xe1lida (".concat(t.length," sess\xf5es)"),{count:t.length}):this.addResult("warning","Algumas sess\xf5es t\xeam estrutura inv\xe1lida",{total:t.length,valid:r.length})}catch(rs){this.addResult("fail","Erro ao validar estrutura de sess\xf5es",rs.message)}}testUserOperations(){try{const e=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.USERS)||"[]");this.addResult("pass","Leitura de usu\xe1rios funcionando",{count:e.length});const t={id:"__test__",username:"__test__",password:"__test__",role:"aluno"},r=[...e],n=[...e,t];localStorage.setItem(this.STORAGE_KEYS.USERS,JSON.stringify(n));JSON.parse(localStorage.getItem(this.STORAGE_KEYS.USERS)||"[]").length===n.length?this.addResult("pass","Escrita de usu\xe1rios funcionando","Dados salvos corretamente"):this.addResult("fail","Falha na escrita de usu\xe1rios","Dados n\xe3o foram salvos"),localStorage.setItem(this.STORAGE_KEYS.USERS,JSON.stringify(r))}catch(rs){this.addResult("fail","Erro nas opera\xe7\xf5es de usu\xe1rios",rs.message)}}testSubjectOperations(){try{const e=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.SUBJECTS)||"[]");this.addResult("pass","Leitura de mat\xe9rias funcionando",{count:e.length});const t={id:"__test__",name:"Teste",description:"Mat\xe9ria de teste"},r=[...e],n=[...e,t];localStorage.setItem(this.STORAGE_KEYS.SUBJECTS,JSON.stringify(n));JSON.parse(localStorage.getItem(this.STORAGE_KEYS.SUBJECTS)||"[]").length===n.length?this.addResult("pass","Escrita de mat\xe9rias funcionando","Dados salvos corretamente"):this.addResult("fail","Falha na escrita de mat\xe9rias","Dados n\xe3o foram salvos"),localStorage.setItem(this.STORAGE_KEYS.SUBJECTS,JSON.stringify(r))}catch(rs){this.addResult("fail","Erro nas opera\xe7\xf5es de mat\xe9rias",rs.message)}}testQuestionOperations(){try{const e=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.QUESTIONS)||"[]");this.addResult("pass","Leitura de quest\xf5es funcionando",{count:e.length});const t={id:"__test__",subjectId:"1",question:"Teste?",options:["A","B","C","D"],correctAnswer:0,funFact:"Teste"},r=[...e],n=[...e,t];localStorage.setItem(this.STORAGE_KEYS.QUESTIONS,JSON.stringify(n));JSON.parse(localStorage.getItem(this.STORAGE_KEYS.QUESTIONS)||"[]").length===n.length?this.addResult("pass","Escrita de quest\xf5es funcionando","Dados salvos corretamente"):this.addResult("fail","Falha na escrita de quest\xf5es","Dados n\xe3o foram salvos"),localStorage.setItem(this.STORAGE_KEYS.QUESTIONS,JSON.stringify(r))}catch(rs){this.addResult("fail","Erro nas opera\xe7\xf5es de quest\xf5es",rs.message)}}testSessionOperations(){try{const e=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.USER_SESSIONS)||"[]");this.addResult("pass","Leitura de sess\xf5es funcionando",{count:e.length});const t={userId:"__test__",username:"__test__",loginTime:(new Date).toISOString()},r=[...e],n=[...e,t];localStorage.setItem(this.STORAGE_KEYS.USER_SESSIONS,JSON.stringify(n));JSON.parse(localStorage.getItem(this.STORAGE_KEYS.USER_SESSIONS)||"[]").length===n.length?this.addResult("pass","Escrita de sess\xf5es funcionando","Dados salvos corretamente"):this.addResult("fail","Falha na escrita de sess\xf5es","Dados n\xe3o foram salvos"),localStorage.setItem(this.STORAGE_KEYS.USER_SESSIONS,JSON.stringify(r))}catch(rs){this.addResult("fail","Erro nas opera\xe7\xf5es de sess\xf5es",rs.message)}}testProfileOperations(){try{const e=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.USERS)||"[]");if(0===e.length)return void this.addResult("warning","Nenhum usu\xe1rio para testar perfis","Crie usu\xe1rios primeiro");const t=e[0].id,r=this.STORAGE_KEYS.USER_PROFILE(t),n=localStorage.getItem(r),a={avatar:"avatar1",uploadedImage:""};localStorage.setItem(r,JSON.stringify(a));JSON.parse(localStorage.getItem(r)||"{}").avatar===a.avatar?this.addResult("pass","Opera\xe7\xf5es de perfil funcionando","Perfil salvo e lido corretamente"):this.addResult("fail","Falha nas opera\xe7\xf5es de perfil","Dados n\xe3o foram salvos corretamente"),n?localStorage.setItem(r,n):localStorage.removeItem(r)}catch(rs){this.addResult("fail","Erro nas opera\xe7\xf5es de perfil",rs.message)}}testQuizStatsOperations(){try{const e=this.STORAGE_KEYS.QUIZ_STATISTICS,t=localStorage.getItem(e),r=[{subjectId:"1",correct:5,wrong:2}];localStorage.setItem(e,JSON.stringify(r));JSON.parse(localStorage.getItem(e)||"[]").length===r.length?this.addResult("pass","Opera\xe7\xf5es de estat\xedsticas gerais funcionando","Dados salvos corretamente"):this.addResult("fail","Falha nas opera\xe7\xf5es de estat\xedsticas gerais","Dados n\xe3o foram salvos"),t?localStorage.setItem(e,t):localStorage.removeItem(e);const n=this.STORAGE_KEYS.ANSWERED_HISTORY("1"),a=localStorage.getItem(n),s=["q1","q2","q3"];localStorage.setItem(n,JSON.stringify(s));JSON.parse(localStorage.getItem(n)||"[]").length===s.length?this.addResult("pass","Opera\xe7\xf5es de hist\xf3rico de quest\xf5es funcionando","Dados salvos corretamente"):this.addResult("fail","Falha nas opera\xe7\xf5es de hist\xf3rico","Dados n\xe3o foram salvos"),a?localStorage.setItem(n,a):localStorage.removeItem(n)}catch(rs){this.addResult("fail","Erro nas opera\xe7\xf5es de estat\xedsticas",rs.message)}}testDataIntegrity(){try{const e=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.QUESTIONS)||"[]"),t=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.SUBJECTS)||"[]"),r=new Set(t.map(e=>e.id)),n=e.filter(e=>!r.has(e.subjectId));0===n.length?this.addResult("pass","Integridade referencial v\xe1lida","Todas as quest\xf5es referenciam mat\xe9rias v\xe1lidas"):this.addResult("warning","Quest\xf5es com refer\xeancias inv\xe1lidas encontradas",{count:n.length})}catch(rs){this.addResult("fail","Erro ao verificar integridade",rs.message)}}testDataConsistency(){try{const e=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.USERS)||"[]"),t=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.USER_SESSIONS)||"[]"),r=new Set(e.map(e=>e.id)),n=t.filter(e=>!r.has(e.userId));0===n.length?this.addResult("pass","Consist\xeancia de dados v\xe1lida","Todas as sess\xf5es referenciam usu\xe1rios v\xe1lidos"):this.addResult("warning","Sess\xf5es \xf3rf\xe3s encontradas",{count:n.length})}catch(rs){this.addResult("fail","Erro ao verificar consist\xeancia",rs.message)}}testReadPerformance(){try{const e=100,t=performance.now();for(let n=0;n<e;n++)localStorage.getItem(this.STORAGE_KEYS.USERS),localStorage.getItem(this.STORAGE_KEYS.SUBJECTS),localStorage.getItem(this.STORAGE_KEYS.QUESTIONS);const r=(performance.now()-t)/e;r<1?this.addResult("pass","Performance de leitura: ".concat(r.toFixed(3),"ms por opera\xe7\xe3o"),"Performance excelente"):r<5?this.addResult("pass","Performance de leitura: ".concat(r.toFixed(3),"ms por opera\xe7\xe3o"),"Performance boa"):this.addResult("warning","Performance de leitura: ".concat(r.toFixed(3),"ms por opera\xe7\xe3o"),"Performance pode ser melhorada")}catch(rs){this.addResult("fail","Erro ao testar performance de leitura",rs.message)}}testWritePerformance(){try{const e=100,t={test:"data"},r=performance.now();for(let s=0;s<e;s++)localStorage.setItem("__perf_test__",JSON.stringify(t));const n=performance.now();localStorage.removeItem("__perf_test__");const a=(n-r)/e;a<1?this.addResult("pass","Performance de escrita: ".concat(a.toFixed(3),"ms por opera\xe7\xe3o"),"Performance excelente"):a<5?this.addResult("pass","Performance de escrita: ".concat(a.toFixed(3),"ms por opera\xe7\xe3o"),"Performance boa"):this.addResult("warning","Performance de escrita: ".concat(a.toFixed(3),"ms por opera\xe7\xe3o"),"Performance pode ser melhorada")}catch(rs){this.addResult("fail","Erro ao testar performance de escrita",rs.message)}}addResult(e,t,r){const n=this.results.length+1;this.results.push({test:"Teste ".concat(n),status:e,message:t,details:r});const a="pass"===e?"\u2705":"fail"===e?"\u274c":"\u26a0\ufe0f";console.log("".concat(a," ").concat(t),r||"")}printSummary(){const e=this.results.filter(e=>"pass"===e.status).length,t=this.results.filter(e=>"fail"===e.status).length,r=this.results.filter(e=>"warning"===e.status).length,n=this.results.length;console.log("\n"+"=".repeat(50)),console.log("\ud83d\udcca RESUMO DOS TESTES"),console.log("=".repeat(50)),console.log("Total de testes: ".concat(n)),console.log("\u2705 Passou: ".concat(e," (").concat((e/n*100).toFixed(1),"%)")),console.log("\u274c Falhou: ".concat(t," (").concat((t/n*100).toFixed(1),"%)")),console.log("\u26a0\ufe0f  Avisos: ".concat(r," (").concat((r/n*100).toFixed(1),"%)")),console.log("=".repeat(50)),0===t?console.log("\ud83c\udf89 Todos os testes cr\xedticos passaram!"):console.log("\u26a0\ufe0f  Alguns testes falharam. Revise os detalhes acima.")}getStorageKeys(){const e=[];e.push(this.STORAGE_KEYS.USER),e.push(this.STORAGE_KEYS.USERS),e.push(this.STORAGE_KEYS.USER_SESSIONS),e.push(this.STORAGE_KEYS.SUBJECTS),e.push(this.STORAGE_KEYS.QUESTIONS),e.push(this.STORAGE_KEYS.QUIZ_STATISTICS),e.push(this.STORAGE_KEYS.USER_QUIZ_STATS);JSON.parse(localStorage.getItem(this.STORAGE_KEYS.USERS)||"[]").forEach(t=>{e.push(this.STORAGE_KEYS.USER_PROFILE(t.id)),e.push(this.STORAGE_KEYS.QUIZ_STATS(t.id))});return JSON.parse(localStorage.getItem(this.STORAGE_KEYS.SUBJECTS)||"[]").forEach(t=>{e.push(this.STORAGE_KEYS.ANSWERED_HISTORY(t.id))}),e}cleanup(){["__test__","__perf_test__"].forEach(e=>localStorage.removeItem(e))}};function Ga(){const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!1),[s,o]=(0,a.useState)(null),i=e=>{switch(e){case"pass":return"\u2705";case"fail":return"\u274c";case"warning":return"\u26a0\ufe0f";default:return"\u2753"}},l=e=>{switch(e){case"pass":return"#10b981";case"fail":return"#ef4444";case"warning":return"#f59e0b";default:return"#6b7280"}};return(0,Ea.jsxs)("div",{className:"database-test-container",children:[(0,Ea.jsxs)("div",{className:"database-test-header",children:[(0,Ea.jsx)("h2",{children:"\ud83e\uddea Teste de Conex\xf5es com o Banco de Dados"}),(0,Ea.jsx)("p",{children:"Este painel testa todas as conex\xf5es e opera\xe7\xf5es do localStorage"})]}),(0,Ea.jsxs)("div",{className:"database-test-controls",children:[(0,Ea.jsx)("button",{onClick:()=>{n(!0),t([]),o(null);const e=Ha.runAllTests();t(e);const r=e.filter(e=>"pass"===e.status).length,a=e.filter(e=>"fail"===e.status).length,s=e.filter(e=>"warning"===e.status).length;o({total:e.length,passed:r,failed:a,warnings:s}),n(!1)},disabled:r,className:"test-button",children:r?"Executando testes...":"\u25b6\ufe0f Executar Testes"}),(0,Ea.jsx)("button",{onClick:()=>{Ha.cleanup(),alert("Dados de teste limpos!")},className:"cleanup-button",children:"\ud83e\uddf9 Limpar Dados de Teste"})]}),s&&(0,Ea.jsxs)("div",{className:"database-test-summary",children:[(0,Ea.jsx)("h3",{children:"\ud83d\udcca Resumo"}),(0,Ea.jsxs)("div",{className:"summary-stats",children:[(0,Ea.jsxs)("div",{className:"stat-item",children:[(0,Ea.jsx)("span",{className:"stat-label",children:"Total:"}),(0,Ea.jsx)("span",{className:"stat-value",children:s.total})]}),(0,Ea.jsxs)("div",{className:"stat-item success",children:[(0,Ea.jsx)("span",{className:"stat-label",children:"\u2705 Passou:"}),(0,Ea.jsx)("span",{className:"stat-value",children:s.passed}),(0,Ea.jsxs)("span",{className:"stat-percentage",children:["(",(s.passed/s.total*100).toFixed(1),"%)"]})]}),(0,Ea.jsxs)("div",{className:"stat-item error",children:[(0,Ea.jsx)("span",{className:"stat-label",children:"\u274c Falhou:"}),(0,Ea.jsx)("span",{className:"stat-value",children:s.failed}),(0,Ea.jsxs)("span",{className:"stat-percentage",children:["(",(s.failed/s.total*100).toFixed(1),"%)"]})]}),(0,Ea.jsxs)("div",{className:"stat-item warning",children:[(0,Ea.jsx)("span",{className:"stat-label",children:"\u26a0\ufe0f Avisos:"}),(0,Ea.jsx)("span",{className:"stat-value",children:s.warnings}),(0,Ea.jsxs)("span",{className:"stat-percentage",children:["(",(s.warnings/s.total*100).toFixed(1),"%)"]})]})]})]}),e.length>0&&(0,Ea.jsxs)("div",{className:"database-test-results",children:[(0,Ea.jsx)("h3",{children:"\ud83d\udccb Resultados Detalhados"}),(0,Ea.jsx)("div",{className:"results-list",children:e.map((e,t)=>(0,Ea.jsxs)("div",{className:"result-item result-".concat(e.status),style:{borderLeftColor:l(e.status)},children:[(0,Ea.jsxs)("div",{className:"result-header",children:[(0,Ea.jsx)("span",{className:"result-icon",children:i(e.status)}),(0,Ea.jsx)("span",{className:"result-test",children:e.test}),(0,Ea.jsx)("span",{className:"result-status",children:e.status.toUpperCase()})]}),(0,Ea.jsx)("div",{className:"result-message",children:e.message}),e.details&&(0,Ea.jsx)("div",{className:"result-details",children:(0,Ea.jsx)("pre",{children:JSON.stringify(e.details,null,2)})})]},t))})]}),r&&(0,Ea.jsxs)("div",{className:"loading-overlay",children:[(0,Ea.jsx)("div",{className:"spinner"}),(0,Ea.jsx)("p",{children:"Executando testes..."})]})]})}async function Ja(){console.log("\ud83d\ude80 Iniciando migra\xe7\xe3o de quest\xf5es..."),console.log("\ud83d\udcca Total de quest\xf5es a migrar: ".concat(Ra.length));let e=0,t=0;const r=[],{data:n}=await ja.from("questions").select("id"),a=new Set((n||[]).map(e=>e.id)),s=50;for(let i=0;i<Ra.length;i+=s){const n=Ra.slice(i,i+s);console.log("\ud83d\udce6 Processando lote ".concat(Math.floor(i/s)+1," de ").concat(Math.ceil(Ra.length/s),"..."));const l=n.filter(e=>!a.has(e.id)).map(e=>({id:e.id,subject_id:e.subjectId,question:e.question,options:e.options,correct_answer:e.correctAnswer,fun_fact:e.funFact||null}));if(0!==l.length)try{const{data:a,error:o}=await ja.from("questions").insert(l).select("id");o?(console.error("\u274c Erro no lote ".concat(Math.floor(i/s)+1,":"),o),r.push("Lote ".concat(Math.floor(i/s)+1,": ").concat(o.message)),t+=l.length):(e+=(null===a||void 0===a?void 0:a.length)||0,t+=n.length-((null===a||void 0===a?void 0:a.length)||0),console.log("\u2705 Lote ".concat(Math.floor(i/s)+1,": ").concat((null===a||void 0===a?void 0:a.length)||0," quest\xf5es inseridas")))}catch(o){console.error("\u274c Erro ao inserir lote ".concat(Math.floor(i/s)+1,":"),o),r.push("Lote ".concat(Math.floor(i/s)+1,": ").concat(o.message||"Erro desconhecido")),t+=l.length}else console.log("\u23ed\ufe0f  Lote ".concat(Math.floor(i/s)+1,": Todas as quest\xf5es j\xe1 existem, pulando...")),t+=n.length}return console.log("\n\ud83d\udcca Resumo da migra\xe7\xe3o:"),console.log("\u2705 Inseridas: ".concat(e)),console.log("\u23ed\ufe0f  Puladas (j\xe1 existiam): ".concat(t)),console.log("\u274c Erros: ".concat(r.length)),r.length>0&&(console.log("\n\u26a0\ufe0f  Erros encontrados:"),r.forEach((e,t)=>{console.log("  ".concat(t+1,". ").concat(e))})),{success:0===r.length,inserted:e,skipped:t,errors:r}}function $a(){const e=ne(),[t,r]=(0,a.useState)(!1),[n,s]=(0,a.useState)(null);return(0,Ea.jsx)("div",{className:"migrate-questions-container",children:(0,Ea.jsxs)("div",{className:"migrate-questions-card",children:[(0,Ea.jsx)("h2",{children:"\ud83d\udd04 Migra\xe7\xe3o de Quest\xf5es"}),(0,Ea.jsxs)("p",{className:"migrate-description",children:["Este processo ir\xe1 migrar todas as quest\xf5es do arquivo ",(0,Ea.jsx)("code",{children:"mockData.ts"})," para a tabela ",(0,Ea.jsx)("code",{children:"questions"})," do Supabase."]}),(0,Ea.jsxs)("p",{className:"migrate-warning",children:["\u26a0\ufe0f ",(0,Ea.jsx)("strong",{children:"Aten\xe7\xe3o:"})," Quest\xf5es que j\xe1 existem no banco ser\xe3o puladas (n\xe3o ser\xe3o duplicadas)."]}),(0,Ea.jsxs)("div",{className:"migrate-buttons",children:[(0,Ea.jsx)("button",{className:"migrate-button migrate-button-back",onClick:()=>e("/dashboard"),disabled:t,children:"\u2190 Voltar ao Dashboard"}),(0,Ea.jsx)("button",{className:"migrate-button",onClick:async()=>{if(window.confirm("Deseja migrar todas as quest\xf5es do mockData.ts para o banco de dados?\n\nIsso pode demorar alguns minutos.")){r(!0),s(null);try{const e=await Ja();s(e)}catch(e){s({success:!1,inserted:0,skipped:0,errors:[e.message||"Erro desconhecido"]})}finally{r(!1)}}},disabled:t,children:t?"\ud83d\udd04 Migrando...":"\ud83d\ude80 Iniciar Migra\xe7\xe3o"})]}),n&&(0,Ea.jsxs)("div",{className:"migrate-result ".concat(n.success?"success":"warning"),children:[(0,Ea.jsx)("h3",{children:n.success?"\u2705 Migra\xe7\xe3o Conclu\xedda!":"\u26a0\ufe0f Migra\xe7\xe3o Conclu\xedda com Erros"}),(0,Ea.jsxs)("div",{className:"migrate-stats",children:[(0,Ea.jsxs)("div",{className:"stat-item",children:[(0,Ea.jsx)("span",{className:"stat-label",children:"Inseridas:"}),(0,Ea.jsx)("span",{className:"stat-value success",children:n.inserted})]}),(0,Ea.jsxs)("div",{className:"stat-item",children:[(0,Ea.jsx)("span",{className:"stat-label",children:"Puladas:"}),(0,Ea.jsx)("span",{className:"stat-value info",children:n.skipped})]}),n.errors.length>0&&(0,Ea.jsxs)("div",{className:"stat-item",children:[(0,Ea.jsx)("span",{className:"stat-label",children:"Erros:"}),(0,Ea.jsx)("span",{className:"stat-value error",children:n.errors.length})]})]}),n.errors.length>0&&(0,Ea.jsxs)("div",{className:"migrate-errors",children:[(0,Ea.jsx)("h4",{children:"Detalhes dos Erros:"}),(0,Ea.jsx)("ul",{children:n.errors.map((e,t)=>(0,Ea.jsx)("li",{children:e},t))})]})]})]})})}"undefined"!==typeof window&&(window.testDatabase=()=>Ha.runAllTests(),window.getStorageKeys=()=>Ha.getStorageKeys(),window.cleanupTestData=()=>{Ha.cleanup(),console.log("\u2705 Dados de teste limpos")});const Ya={async checkConnection(){console.log("\ud83d\udd0d Verificando conex\xe3o com Supabase..."),console.log("URL:","https://autzgrrevjmckxbydahx.supabase.co"),console.log("Key configurada:",!0);try{const{data:e,error:t}=await ja.from("users").select("count").limit(1);return t?(console.error("\u274c Erro na conex\xe3o:",t),!1):(console.log("\u2705 Conex\xe3o OK"),!0)}catch(e){return console.error("\u274c Erro:",e),!1}},async listUsers(){console.log("\ud83d\udd0d Listando usu\xe1rios...");try{const{data:e,error:t}=await ja.from("users").select("*").order("created_at",{ascending:!1});return t?void console.error("\u274c Erro:",t):(console.table(e),e)}catch(e){console.error("\u274c Erro:",e)}},async testLogin(e,t){console.log("\ud83d\udd0d Testando login: ".concat(e,"..."));try{const{data:r,error:n}=await ja.from("users").select("*").eq("username",e).eq("password",t).maybeSingle();return n?(console.error("\u274c Erro na query:",n),null):r?(console.log("\u2705 Login OK:",r),r):(console.log("\u274c Usu\xe1rio n\xe3o encontrado ou senha incorreta"),null)}catch(r){return console.error("\u274c Erro:",r),null}},async checkUserExists(e){console.log('\ud83d\udd0d Verificando se usu\xe1rio "'.concat(e,'" existe...'));try{const{data:t,error:r}=await ja.from("users").select("id, username, role").eq("username",e).limit(1);if(r)return console.error("\u274c Erro:",r),!1;if(t&&t.length>0){const e=t[0];return console.log("\u2705 Usu\xe1rio existe:",e),!0}return console.log("\u274c Usu\xe1rio n\xe3o existe"),!1}catch(t){return console.error("\u274c Erro:",t),!1}},async testRegister(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"aluno";console.log("\ud83d\udd0d Testando cadastro: ".concat(e,"..."));try{const{data:s}=await ja.from("users").select("id, username").eq("username",e).limit(1);if(s&&s.length>0)return console.log("\u274c Usu\xe1rio j\xe1 existe:",s[0]),{success:!1,error:"Usu\xe1rio j\xe1 existe",existing:s[0]};const o={username:e,password:t,role:r};console.log("\ud83d\udce4 Dados a inserir:",o);const{data:i,error:l}=await ja.from("users").insert(o).select().maybeSingle();var n,a;if(l)return console.error("\u274c Erro no cadastro:",l),console.error("C\xf3digo:",l.code),console.error("Mensagem:",l.message),console.error("Detalhes:",l.details),console.error("Hint:",l.hint),"42501"===l.code||null!==(n=l.message)&&void 0!==n&&n.includes("permission")?(console.error("\ud83d\udd12 PROBLEMA: Pol\xedtica RLS bloqueando inser\xe7\xe3o!"),console.error("\ud83d\udca1 Solu\xe7\xe3o: Execute supabase_fix_rls.sql no Supabase")):"23505"===l.code||null!==(a=l.message)&&void 0!==a&&a.includes("duplicate")?console.error("\ud83d\udd12 PROBLEMA: Usu\xe1rio duplicado!"):"PGRST301"===l.code&&(console.error("\ud83d\udd12 PROBLEMA: Erro de autentica\xe7\xe3o JWT!"),console.error("\ud83d\udca1 Solu\xe7\xe3o: Verifique as vari\xe1veis de ambiente")),{success:!1,error:l};if(!i)return console.log("\u274c Usu\xe1rio n\xe3o foi criado (sem dados retornados)"),{success:!1,error:"Sem dados retornados"};const c=i;return console.log("\u2705 Cadastro OK:",c),{success:!0,data:c}}catch(s){return console.error("\u274c Erro:",s),{success:!1,error:s}}},async checkRLS(){console.log("\ud83d\udd0d Verificando pol\xedticas RLS...");try{const{data:e,error:t}=await ja.from("users").select("*").limit(1);console.log("Leitura:",t?"\u274c Bloqueada":"\u2705 Permitida",t);const r={username:"test_rls_"+Date.now(),password:"test",role:"aluno"},{error:n}=await ja.from("users").insert(r);console.log("Inser\xe7\xe3o:",n?"\u274c Bloqueada":"\u2705 Permitida",n)}catch(e){console.error("\u274c Erro:",e)}}};function Xa(e){let{children:t}=e;const{isAuthenticated:r}=Ta();return r?(0,Ea.jsx)(Ea.Fragment,{children:t}):(0,Ea.jsx)(ve,{to:"/",replace:!0})}function Za(e){let{children:t}=e;const{isAuthenticated:r,user:n}=Ta();return r?"admin"!==(null===n||void 0===n?void 0:n.role)?(0,Ea.jsx)(ve,{to:"/dashboard",replace:!0}):(0,Ea.jsx)(Ea.Fragment,{children:t}):(0,Ea.jsx)(ve,{to:"/",replace:!0})}function es(){return(0,Ea.jsxs)(we,{children:[(0,Ea.jsx)(be,{path:"/",element:(0,Ea.jsx)(La,{})}),(0,Ea.jsx)(be,{path:"/dashboard",element:(0,Ea.jsx)(Xa,{children:(0,Ea.jsx)(Ka,{})})}),(0,Ea.jsx)(be,{path:"/test-db",element:(0,Ea.jsx)(Za,{children:(0,Ea.jsx)(Ga,{})})}),(0,Ea.jsx)(be,{path:"/migrate-questions",element:(0,Ea.jsx)(Za,{children:(0,Ea.jsx)($a,{})})})]})}"undefined"!==typeof window&&(window.debugAuth=Ya,console.log("\ud83d\udca1 Use debugAuth no console para debugar autentica\xe7\xe3o"),console.log("   Exemplos:"),console.log("   - debugAuth.checkConnection()"),console.log("   - debugAuth.listUsers()"),console.log('   - debugAuth.testLogin("admin", "admin123")'),console.log('   - debugAuth.checkUserExists("admin")'),console.log("   - debugAuth.checkRLS()"));const ts=function(){return(0,Ea.jsx)(Na,{children:(0,Ea.jsx)(Ia,{children:(0,Ea.jsx)(je,{children:(0,Ea.jsx)(es,{})})})})};o.createRoot(document.getElementById("root")).render((0,Ea.jsx)(a.StrictMode,{children:(0,Ea.jsx)(ts,{})}))})();
//# sourceMappingURL=main.c4ab10e4.js.map